import{r as c,a as qt,b as Ft}from"./vendor-b69f2a9f.js";import{u as Ut,a as xt,N as at,B as $t,R as Kt,b as ie}from"./router-bda2d4b7.js";import{c as ne}from"./utils-75920557.js";import{T as fe,P as de,S as he,A as Vt,L as zt,M as be,B as ye,a as pe,b as Wt,c as ge,d as re,U as Ve,e as ht,f as je,F as Ie,g as we,X as Oe,C as ee,h as _e,I as Ce,i as Ne,j as Ae,k as mt,l as St,m as Le,n as Yt,D as Ke,o as Te,p as Se,q as Gt,R as ue,r as st,s as Qt,K as _t,H as Ht,t as oe,u as pt,v as Ee,w as qe,x as Ge,y as Je,z as Zt,E as Fe,G as At,V as Tt,J as Jt,N as gt,O as Pe,W as rt,Q as Xt,Y as Xe,Z as Et,_ as Dt,$ as yt,a0 as bt,a1 as Mt,a2 as ea,a3 as ta,a4 as Be,a5 as ft,a6 as He,a7 as lt,a8 as jt,a9 as it,aa,ab as Ye,ac as sa,ad as nt,ae as ra,af as la,ag as ia,ah as dt,ai as na,aj as da,ak as Rt,al as ca,am as ct}from"./icons-3ed7b2f4.js";(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))v(f);new MutationObserver(f=>{for(const o of f)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&v(g)}).observe(document,{childList:!0,subtree:!0});function C(f){const o={};return f.integrity&&(o.integrity=f.integrity),f.referrerPolicy&&(o.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?o.credentials="include":f.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function v(f){if(f.ep)return;f.ep=!0;const o=C(f);fetch(f.href,o)}})();var It={exports:{}},Ze={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=c,xa=Symbol.for("react.element"),ma=Symbol.for("react.fragment"),ga=Object.prototype.hasOwnProperty,ua=oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ha={key:!0,ref:!0,__self:!0,__source:!0};function Pt(r,x,C){var v,f={},o=null,g=null;C!==void 0&&(o=""+C),x.key!==void 0&&(o=""+x.key),x.ref!==void 0&&(g=x.ref);for(v in x)ga.call(x,v)&&!ha.hasOwnProperty(v)&&(f[v]=x[v]);if(r&&r.defaultProps)for(v in x=r.defaultProps,x)f[v]===void 0&&(f[v]=x[v]);return{$$typeof:xa,type:r,key:o,ref:g,props:f,_owner:ua.current}}Ze.Fragment=ma;Ze.jsx=Pt;Ze.jsxs=Pt;It.exports=Ze;var e=It.exports,ot={},vt=qt;ot.createRoot=vt.createRoot,ot.hydrateRoot=vt.hydrateRoot;const pa=[{id:"SR001",date:"2024-01-15",pickupStationCode:"ST001",areaCode:"AC001",dropOffPoint:"Embu Town Center",driverName:"Timothy Peter",driverId:"DRIVER001",driverPhone:"0729678901",vehicleReg:"KAB 123A",quantitySold:150,itemPrice:45,totalCost:6750,packaging:{basins:5,sacks:10,boxes:2},packagingCosts:{basinCost:50,sackCost:30,boxCost:100},totalPackagingCost:500,estimatedDeliveryTime:"2024-01-15T14:00:00Z",assignedBy:"Admin User",status:"delivered",createdAt:"2024-01-15T08:00:00Z",updatedAt:"2024-01-15T14:30:00Z"},{id:"SR002",date:"2024-01-15",pickupStationCode:"ST002",areaCode:"AC002",dropOffPoint:"Mecca Center",driverName:"Murithi Kamau",driverId:"DRIVER002",driverPhone:"0729789012",vehicleReg:"KAB 456B",quantitySold:200,itemPrice:50,totalCost:1e4,packaging:{basins:8,sacks:15,boxes:3},packagingCosts:{basinCost:50,sackCost:30,boxCost:100},totalPackagingCost:750,estimatedDeliveryTime:"2024-01-15T16:00:00Z",assignedBy:"Manager One",status:"in-transit",createdAt:"2024-01-15T09:30:00Z",updatedAt:"2024-01-15T15:45:00Z"},{id:"SR003",date:"2024-01-15",pickupStationCode:"ST003",areaCode:"AC003",dropOffPoint:"Ena Market",driverName:"Agnes Wanjiku",driverId:"DRIVER003",driverPhone:"0729890123",vehicleReg:"KAB 789C",quantitySold:120,itemPrice:48,totalCost:5760,packaging:{basins:4,sacks:8,boxes:2},packagingCosts:{basinCost:50,sackCost:30,boxCost:100},totalPackagingCost:400,estimatedDeliveryTime:"2024-01-15T12:00:00Z",assignedBy:"Supervisor Alpha",status:"delivered",createdAt:"2024-01-15T07:15:00Z",updatedAt:"2024-01-15T12:15:00Z"},{id:"SR004",date:"2024-01-15",pickupStationCode:"ST004",areaCode:"AC004",dropOffPoint:"Ugweri Center",driverName:"Eugene Ochieng",driverId:"DRIVER004",driverPhone:"0729901234",vehicleReg:"KAB 012D",quantitySold:180,itemPrice:52,totalCost:9360,packaging:{basins:6,sacks:12,boxes:3},packagingCosts:{basinCost:50,sackCost:30,boxCost:100},totalPackagingCost:600,estimatedDeliveryTime:"2024-01-15T18:00:00Z",assignedBy:"Admin User",status:"loaded",createdAt:"2024-01-15T10:45:00Z",updatedAt:"2024-01-15T11:00:00Z"},{id:"SR005",date:"2024-01-14",pickupStationCode:"ST001",areaCode:"AC001",dropOffPoint:"Embu Town Center",driverName:"Timothy Peter",driverId:"DRIVER001",driverPhone:"0729678901",vehicleReg:"KAB 123A",quantitySold:95,itemPrice:46,totalCost:4370,packaging:{basins:3,sacks:6,boxes:1},packagingCosts:{basinCost:50,sackCost:30,boxCost:100},totalPackagingCost:300,estimatedDeliveryTime:"2024-01-14T15:30:00Z",assignedBy:"Manager One",status:"delivered",createdAt:"2024-01-14T11:20:00Z",updatedAt:"2024-01-14T15:45:00Z"}],ya=[{id:"DR001",date:"2024-01-15",transportCode:"TC001",sourceAreaCode:"AC001",sourceStationCode:"ST001",destinationLocation:"Malindi",destinationAreaCode:"AC002",destinationType:"market",buyerName:"Husra General Store",buyerId:"BUYER001",buyerPhone:"0729123456",buyerType:"company",quantityReceived:145,quantityExpected:150,quantityDifference:-5,condition:"good",itemPrice:45,totalRevenue:6525,deliveryStatus:"delivered",deliveryTime:"2024-01-15T14:30:00Z",driverName:"Timothy Peter",driverId:"DRIVER001",vehicleReg:"KAB 123A",verifiedBy:"Admin User",verificationDate:"2024-01-15T14:30:00Z",notes:"Minor quantity difference due to packaging",hasDiscrepancy:!0,discrepancyType:"quantity",discrepancyDescription:"Minor quantity difference due to packaging",discrepancyResolved:!1,lastModifiedBy:"Admin User",lastModifiedDate:"2024-01-15T14:30:00Z",createdAt:"2024-01-15T14:30:00Z",updatedAt:"2024-01-15T14:30:00Z"},{id:"DR002",date:"2024-01-15",transportCode:"TC002",sourceAreaCode:"AC002",sourceStationCode:"ST002",destinationLocation:"Samburu",destinationAreaCode:"AC003",destinationType:"warehouse",buyerName:"Exodus Trading Co.",buyerId:"BUYER002",buyerPhone:"0729234567",buyerType:"company",quantityReceived:200,quantityExpected:200,quantityDifference:0,condition:"excellent",itemPrice:50,totalRevenue:1e4,deliveryStatus:"delivered",deliveryTime:"2024-01-15T16:15:00Z",driverName:"Murithi Kamau",driverId:"DRIVER002",vehicleReg:"KAB 456B",verifiedBy:"Manager One",verificationDate:"2024-01-15T16:15:00Z",notes:"Perfect delivery, no issues",hasDiscrepancy:!1,discrepancyResolved:!0,lastModifiedBy:"Manager One",lastModifiedDate:"2024-01-15T16:15:00Z",createdAt:"2024-01-15T16:15:00Z",updatedAt:"2024-01-15T16:15:00Z"},{id:"DR003",date:"2024-01-15",transportCode:"TC003",sourceAreaCode:"AC003",sourceStationCode:"ST003",destinationLocation:"Ena Market",destinationAreaCode:"AC003",destinationType:"market",buyerName:"Boss Lady Enterprises",buyerId:"BUYER003",buyerPhone:"0729345678",buyerType:"individual",quantityReceived:118,quantityExpected:120,quantityDifference:-2,condition:"good",itemPrice:48,totalRevenue:5664,deliveryStatus:"delivered",deliveryTime:"2024-01-15T12:15:00Z",driverName:"Agnes Wanjiku",driverId:"DRIVER003",vehicleReg:"KAB 789C",verifiedBy:"Supervisor Alpha",verificationDate:"2024-01-15T12:15:00Z",notes:"Small quantity difference, customer satisfied",hasDiscrepancy:!0,discrepancyType:"quantity",discrepancyDescription:"Small quantity difference, customer satisfied",discrepancyResolved:!0,lastModifiedBy:"Supervisor Alpha",lastModifiedDate:"2024-01-15T12:15:00Z",createdAt:"2024-01-15T12:15:00Z",updatedAt:"2024-01-15T12:15:00Z"},{id:"DR004",date:"2024-01-15",transportCode:"TC004",sourceAreaCode:"AC004",sourceStationCode:"ST004",destinationLocation:"Ugweri Center",destinationAreaCode:"AC004",destinationType:"wholesale",buyerName:"Koy Wholesale",buyerId:"BUYER004",buyerPhone:"0729456789",buyerType:"cooperative",quantityReceived:0,quantityExpected:180,quantityDifference:-180,condition:"good",itemPrice:52,totalRevenue:0,deliveryStatus:"in-transit",deliveryTime:null,driverName:"Eugene Ochieng",driverId:"DRIVER004",vehicleReg:"KAB 012D",verifiedBy:"Admin User",verificationDate:"2024-01-15T11:00:00Z",notes:"Currently en route to destination",hasDiscrepancy:!0,discrepancyType:"quantity",discrepancyDescription:"Currently en route to destination",discrepancyResolved:!1,lastModifiedBy:"Admin User",lastModifiedDate:"2024-01-15T11:00:00Z",createdAt:"2024-01-15T11:00:00Z",updatedAt:"2024-01-15T11:00:00Z"}],ba=[{id:"ITEM001",name:"Husra",code:"601",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM002",name:"mchino's",code:"602",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM003",name:"Exodus",code:"603",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM004",name:"wanini",code:"604",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM005",name:"Boss Lady",code:"605",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM006",name:"Koy",code:"606",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM007",name:"Kiman thr",code:"607",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM008",name:"Benja",code:"609",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM009",name:"Kindra",code:"610",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM010",name:"Kanaria",code:"613",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM011",name:"Mihk",code:"614",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM012",name:"Miami",code:"615",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM013",name:"Jack",code:"616",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM014",name:"Ben",code:"617",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM015",name:"Faith",code:"618",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM016",name:"JIK",code:"619",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM017",name:"Macaira",code:"621",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM018",name:"Katharu",code:"622",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM019",name:"Haki",code:"623",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM020",name:"Sm K",code:"624",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM021",name:"Kalunda",code:"625",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM022",name:"Brian",code:"626",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM023",name:"Bakari",code:"627-628",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM024",name:"mwashetani",code:"629-630",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM025",name:"Kinyua",code:"631",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM026",name:"liam",code:"634",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM027",name:"KBC",code:"636",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM028",name:"SMK",code:"637",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM029",name:"Murithi",code:"639",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM030",name:"Maumau",code:"641",category:{id:"CAT001",name:"ITEM BOXES",description:"Boxed items and containers",color:"blue"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM031",name:"Manare",code:"601",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM032",name:"Annox",code:"602",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM033",name:"Timothy peter",code:"603",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM034",name:"Murithi",code:"604",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM035",name:"Arris",code:"605",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM036",name:"Mwayrika",code:"606",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM037",name:"Sachso",code:"607",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM038",name:"Mwanzani",code:"608",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM039",name:"Agnes",code:"609",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM040",name:"mutugi",code:"610",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM041",name:"Javakha",code:"611",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM042",name:"Emily",code:"612",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM043",name:"muthee",code:"613",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM044",name:"Ceedean",code:"614",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM045",name:"M-mandera",code:"615",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM046",name:"Tsimba",code:"617",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM047",name:"Sacob",code:"618-619",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM048",name:"micah",code:"620",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM049",name:"manjara-",code:"621",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM050",name:"Cau",code:"622",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM051",name:"mercy",code:"623",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM052",name:"Ayub",code:"624",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM053",name:"odson",code:"625",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM054",name:"Maralligiri",code:"626",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM055",name:"Toalson",code:"627",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM056",name:"Eugene",code:"628",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM057",name:"Purity",code:"629",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM058",name:"Pamela",code:"630",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM059",name:"Josphine",code:"632-634",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM060",name:"Bon hamil",code:"635",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM061",name:"Edegard",code:"636-637",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM062",name:"Silas",code:"638",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM063",name:"Limoja",code:"639",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM064",name:"Frank",code:"640",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM065",name:"Cyprian",code:"641",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM066",name:"Kaberia",code:"642",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM067",name:"Kakimbue",code:"643",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM068",name:"Roho Safi",code:"644",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM069",name:"Faith",code:"645",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM070",name:"Murriam",code:"646",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM071",name:"Katharu",code:"647",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM072",name:"Team",code:"648",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM073",name:"Emmanuel",code:"649",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM074",name:"Ruth",code:"650",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM075",name:"Hamisi",code:"651",category:{id:"CAT002",name:"ITEM SACKS",description:"Sack items and bags",color:"green"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM076",name:"Quinter",code:"601-02",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM077",name:"murangan",code:"603",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM078",name:"Kapporose",code:"604",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM079",name:"gembe",code:"605",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM080",name:"Rwhamed",code:"606",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM081",name:"Fahza",code:"607",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM082",name:"Bint",code:"608",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM083",name:"Tenga",code:"609",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM084",name:"lyed",code:"610",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM085",name:"Moela",code:"611",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM086",name:"Drop",code:"612",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM087",name:"munira",code:"613",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM088",name:"Drop",code:"614-616",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM089",name:"Karambu",code:"617",category:{id:"CAT003",name:"ITEM BASINS",description:"Basin items and containers",color:"purple"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM090",name:"W-baba",code:"601",category:{id:"CAT004",name:"MIRITIN",description:"Miritin related items",color:"orange"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM091",name:"Mosco",code:"602",category:{id:"CAT004",name:"MIRITIN",description:"Miritin related items",color:"orange"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM092",name:"Beebry",code:"603",category:{id:"CAT004",name:"MIRITIN",description:"Miritin related items",color:"orange"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM093",name:"Mbituar",code:"604",category:{id:"CAT004",name:"MIRITIN",description:"Miritin related items",color:"orange"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM094",name:"Gordan",code:"605",category:{id:"CAT004",name:"MIRITIN",description:"Miritin related items",color:"orange"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM095",name:"Gitonga",code:"606",category:{id:"CAT004",name:"MIRITIN",description:"Miritin related items",color:"orange"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM096",name:"pain Killer",code:"601-605",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM097",name:"Eric",code:"606",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM098",name:"Jackson",code:"607",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM099",name:"Jasmin",code:"608-609",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM100",name:"Omar",code:"610",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM101",name:"Adila",code:"611",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM102",name:"Josephine",code:"612",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM103",name:"App",code:"613",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM104",name:"Mo-mo",code:"614-626",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM105",name:"Dalley",code:"627-628",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"ITEM106",name:"Sarah",code:"629-650",category:{id:"CAT005",name:"PAIN KILLER",description:"Pain killer related items",color:"red"},location:"Embu",createdAt:"2024-01-15",updatedAt:"2024-01-15"}],fa=[{id:"BUYER001",name:"Husra General Store",contactPerson:"Husra Ahmed",phone:"0729123456",email:"husra@store.com",location:"Embu Town",areaCode:"AC001",buyerType:"company",paymentTerms:"cash",creditLimit:5e4,preferredDeliveryTime:"09:00-12:00",status:"active",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"BUYER002",name:"Exodus Trading Co.",contactPerson:"Exodus Mwangi",phone:"0729234567",email:"exodus@trading.com",location:"Mecca Center",areaCode:"AC002",buyerType:"company",paymentTerms:"credit",creditLimit:75e3,preferredDeliveryTime:"14:00-17:00",status:"active",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"BUYER003",name:"Boss Lady Enterprises",contactPerson:"Grace Wanjiku",phone:"0729345678",email:"grace@bosslady.com",location:"Ena Market",areaCode:"AC003",buyerType:"individual",paymentTerms:"cash",creditLimit:25e3,preferredDeliveryTime:"08:00-10:00",status:"active",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"BUYER004",name:"Koy Wholesale",contactPerson:"Koy Otieno",phone:"0729456789",email:"koy@wholesale.com",location:"Ugweri Center",areaCode:"AC004",buyerType:"cooperative",paymentTerms:"credit",creditLimit:1e5,preferredDeliveryTime:"10:00-13:00",status:"active",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"BUYER005",name:"Manare Distributors",contactPerson:"Manare Hassan",phone:"0729567890",email:"manare@distributors.com",location:"Embu Town",areaCode:"AC001",buyerType:"company",paymentTerms:"credit",creditLimit:15e4,preferredDeliveryTime:"15:00-18:00",status:"active",createdAt:"2024-01-15",updatedAt:"2024-01-15"}],ja=[{id:"DRIVER001",name:"Timothy Peter",phone:"0729678901",licenseNumber:"DL001234",vehicleType:"truck",vehicleNumber:"KAB 123A",areaCode:"AC001",status:"active",experience:"5 years",rating:4.5,createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"DRIVER002",name:"Murithi Kamau",phone:"0729789012",licenseNumber:"DL002345",vehicleType:"van",vehicleNumber:"KAB 456B",areaCode:"AC002",status:"active",experience:"3 years",rating:4.2,createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"DRIVER003",name:"Agnes Wanjiku",phone:"0729890123",licenseNumber:"DL003456",vehicleType:"truck",vehicleNumber:"KAB 789C",areaCode:"AC003",status:"active",experience:"7 years",rating:4.8,createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"DRIVER004",name:"Eugene Ochieng",phone:"0729901234",licenseNumber:"DL004567",vehicleType:"van",vehicleNumber:"KAB 012D",areaCode:"AC004",status:"active",experience:"4 years",rating:4.3,createdAt:"2024-01-15",updatedAt:"2024-01-15"}],va=[{id:"STAFF001",name:"Admin User",email:"admin@jbtrans.com",phone:"0729001234",role:"admin",status:"active",accessLevel:"full",securityLevel:"high",twoFactorEnabled:!0,lastLogin:"2024-01-15T10:30:00Z",createdAt:"2024-01-01",updatedAt:"2024-01-15"},{id:"STAFF002",name:"Manager One",email:"manager@jbtrans.com",phone:"0729112345",role:"manager",status:"active",accessLevel:"limited",securityLevel:"medium",twoFactorEnabled:!1,lastLogin:"2024-01-15T09:15:00Z",createdAt:"2024-01-01",updatedAt:"2024-01-15"},{id:"STAFF003",name:"Supervisor Alpha",email:"supervisor@jbtrans.com",phone:"0729223456",role:"supervisor",status:"active",accessLevel:"limited",securityLevel:"medium",twoFactorEnabled:!1,lastLogin:"2024-01-15T08:45:00Z",createdAt:"2024-01-01",updatedAt:"2024-01-15"},{id:"STAFF004",name:"Operator Beta",email:"operator@jbtrans.com",phone:"0729334567",role:"operator",status:"active",accessLevel:"readonly",securityLevel:"low",twoFactorEnabled:!1,lastLogin:"2024-01-15T07:30:00Z",createdAt:"2024-01-01",updatedAt:"2024-01-15"}],Lt=c.createContext(null),Na=({children:r})=>{const[x,C]=c.useState(null),[v,f]=c.useState(!1),[o,g]=c.useState(!1),[h,S]=c.useState(pa),[t,i]=c.useState([]),[n,T]=c.useState([]),[d,E]=c.useState(ya),[B,z]=c.useState([]),[p,q]=c.useState([]),[R,l]=c.useState(ba),[k,m]=c.useState(fa),[L,y]=c.useState(ja),[a,M]=c.useState(va);return c.useEffect(()=>{const s=localStorage.getItem("theme");s&&g(s==="dark")},[]),c.useEffect(()=>{document.documentElement.classList.toggle("dark",o),localStorage.setItem("theme",o?"dark":"light")},[o]),e.jsx(Lt.Provider,{value:{user:x,setUser:C,isAuthenticated:v,setIsAuthenticated:f,isDark:o,setIsDark:g,sourceRecords:h,setSourceRecords:S,pickupRecords:t,setPickupRecords:i,deliveryRecords:n,setDeliveryRecords:T,destinationRecords:d,setDestinationRecords:E,transportLogs:B,setTransportLogs:z,profitRecords:p,setProfitRecords:q,inventoryItems:R,setInventoryItems:l,buyers:k,setBuyers:m,drivers:L,setDrivers:y,staff:a,setStaff:M},children:r})},le=()=>{const r=c.useContext(Lt);if(!r)throw new Error("useApp must be used within an AppProvider");return r},Bt=c.createContext(void 0),ut=()=>{const r=c.useContext(Bt);if(!r)throw new Error("useNotifications must be used within a NotificationsProvider");return r},ka=({children:r})=>{const[x,C]=c.useState([]);c.useEffect(()=>{const i=localStorage.getItem("mwalimu-notifications");if(i)try{const T=JSON.parse(i).map(d=>({...d,timestamp:new Date(d.timestamp)}));C(T)}catch(n){console.error("Failed to load notifications:",n)}},[]),c.useEffect(()=>{localStorage.setItem("mwalimu-notifications",JSON.stringify(x))},[x]);const v=c.useCallback(i=>{const n={...i,id:`notification-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,read:!1};C(T=>[n,...T]),i.type!=="error"&&setTimeout(()=>{C(T=>T.filter(d=>d.id!==n.id))},1e4)},[]),f=c.useCallback(i=>{C(n=>n.map(T=>T.id===i?{...T,read:!0}:T))},[]),o=c.useCallback(()=>{C(i=>i.map(n=>({...n,read:!0})))},[]),g=c.useCallback(i=>{C(n=>n.filter(T=>T.id!==i))},[]),h=c.useCallback(()=>{C([])},[]),S=x.filter(i=>!i.read).length,t={notifications:x,unreadCount:S,addNotification:v,markAsRead:f,markAllAsRead:o,removeNotification:g,clearAllNotifications:h};return e.jsx(Bt.Provider,{value:t,children:r})},Ot=({size:r="md",showText:x=!0,className:C=""})=>{const v={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"},f={sm:"text-sm",md:"text-lg",lg:"text-2xl"};return e.jsxs("div",{className:`flex items-center space-x-2 ${C}`,children:[e.jsx("div",{className:`${v[r]} bg-gradient-to-br from-bright-green to-green-600 rounded-lg flex items-center justify-center shadow-lg`,children:e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:`${r==="sm"?"h-3 w-3":r==="md"?"h-4 w-4":"h-6 w-6"} text-white`}),e.jsx(de,{className:`${r==="sm"?"h-2 w-2":r==="md"?"h-2.5 w-2.5":"h-3 w-3"} text-white absolute -top-1 -right-1`})]})}),x&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`${f[r]} font-bold text-gray-900 dark:text-gray-100`,children:"Mwalimu"}),e.jsx("span",{className:`${r==="sm"?"text-xs":r==="md"?"text-sm":"text-base"} font-medium text-bright-green`,children:"Transporters"})]})]})},wa=[{icon:zt,label:"Dashboard",path:"/dashboard",adminOnly:!1},{icon:de,label:"Source Records",path:"/source-records",adminOnly:!1},{icon:fe,label:"Transport Log",path:"/transport-log",adminOnly:!1},{icon:be,label:"Destination Records",path:"/destination-records",adminOnly:!1},{icon:ye,label:"Analytics Dashboard",path:"/analytics",adminOnly:!0},{icon:pe,label:"Performance Reports",path:"/profit-reports",adminOnly:!0},{icon:Wt,label:"Area Performance",path:"/area-performance",adminOnly:!0},{icon:ge,label:"System Monitoring",path:"/monitoring",adminOnly:!0},{icon:re,label:"Discrepancy Reports",path:"/discrepancies",adminOnly:!0},{icon:Ve,label:"Buyers Management",path:"/buyers",adminOnly:!0},{icon:ht,label:"Staff Management",path:"/staff",adminOnly:!0},{icon:je,label:"Admin Controls",path:"/admin-controls",adminOnly:!0},{icon:Ie,label:"Audit Logs",path:"/audit-logs",adminOnly:!0},{icon:ht,label:"Staff Control",path:"/staff-control",adminOnly:!0,isCard:!0},{icon:he,label:"Settings Card",path:"/settings-card",adminOnly:!1,isCard:!0}],Ca=()=>{const r=Ut(),x=xt(),{user:C}=le(),v=ne("w-64 glass-sidebar px-6 py-4 fixed left-0 top-0 bottom-0 h-screen transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0","[&.mobile-closed]:transform [&.mobile-closed]:-translate-x-full lg:[&.mobile-closed]:translate-x-0",!C&&"translate-x-full lg:translate-x-0");return e.jsx("aside",{className:v,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"mb-8 flex-shrink-0",children:e.jsx(Ot,{size:"lg",className:"justify-center"})}),e.jsx("nav",{className:"flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:hover:scrollbar-thumb-gray-500",children:wa.map(({icon:f,label:o,path:g,adminOnly:h,isCard:S})=>{if(h&&(C==null?void 0:C.role)!=="admin")return null;const t=r.pathname===g;return e.jsxs("button",{onClick:()=>x(g),className:ne("flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-left transition-colors hover-lift",S?"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30":"",t?"bg-gradient-to-r from-bright-green to-green-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx(f,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:o}),S&&e.jsx("span",{className:"ml-auto text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full flex-shrink-0",children:"Card"})]},g)})}),e.jsxs("div",{className:"mt-auto space-y-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>x("/settings"),className:"flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover-lift",children:[e.jsx(he,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Settings"})]}),C&&e.jsxs("button",{onClick:()=>x("/login"),className:"flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover-lift",children:[e.jsx(Vt,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})})};function Y(r){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(r)}function ve(r){return new Date(r).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"})}const Sa=({isOpen:r,onClose:x})=>{const{notifications:C,unreadCount:v,markAsRead:f,markAllAsRead:o,removeNotification:g}=ut(),h=c.useRef(null);c.useEffect(()=>{const i=n=>{h.current&&!h.current.contains(n.target)&&x()};return r&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[r,x]);const S=i=>{switch(i){case"success":return e.jsx(ee,{className:"h-4 w-4 text-green-600"});case"warning":return e.jsx(re,{className:"h-4 w-4 text-yellow-600"});case"error":return e.jsx(Ne,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Ce,{className:"h-4 w-4 text-blue-600"})}},t=i=>{switch(i){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}};return r?e.jsxs("div",{ref:h,className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-[9999]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Notifications"}),v>0&&e.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs rounded-full",children:v})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[v>0&&e.jsx("button",{onClick:o,className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Mark all read"}),e.jsx("button",{onClick:x,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Oe,{className:"h-4 w-4 text-gray-500"})})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:C.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No notifications"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"You're all caught up!"})]}):e.jsx("div",{className:"p-2",children:C.map(i=>e.jsx("div",{className:`p-3 rounded-lg border mb-2 transition-all duration-200 hover:shadow-md ${i.read?"bg-gray-50 dark:bg-gray-700/50":t(i.type)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:S(i.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${i.read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:i.title}),e.jsx("p",{className:`text-sm mt-1 ${i.read?"text-gray-500 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:i.message}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:ve(i.timestamp.toISOString())})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!i.read&&e.jsx("button",{onClick:()=>f(i.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Mark as read",children:e.jsx(ee,{className:"h-3 w-3 text-gray-400"})}),e.jsx("button",{onClick:()=>g(i.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Remove notification",children:e.jsx(_e,{className:"h-3 w-3 text-gray-400"})})]})]}),i.action&&e.jsxs("button",{onClick:i.action.onClick,className:"mt-2 text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:[i.action.label," â†’"]})]})]})},i.id))})}),C.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50 rounded-b-xl",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:[C.length," notification",C.length!==1?"s":""," total"]})})]}):null},De=()=>{const{addNotification:r}=ut(),x=(g,h,S)=>{r({type:"success",title:g,message:h,action:S})},C=(g,h,S)=>{r({type:"error",title:g,message:h,action:S})},v=(g,h,S)=>{r({type:"warning",title:g,message:h,action:S})},f=(g,h,S)=>{r({type:"info",title:g,message:h,action:S})};return{showSuccessNotification:x,showErrorNotification:C,showWarningNotification:v,showInfoNotification:f,addSampleNotifications:()=>{x("New Record Added","Successfully added pickup record for Area AC001 with 50kg of goods.",{label:"View Record",onClick:()=>console.log("Navigate to record")}),v("Low Stock Alert","Area AC002 is running low on miraa stock. Consider restocking soon.",{label:"Check Stock",onClick:()=>console.log("Navigate to stock")}),C("Delivery Failed","Delivery to Nairobi CBD failed due to vehicle breakdown. Driver John Kimani needs assistance.",{label:"View Details",onClick:()=>console.log("Navigate to delivery details")}),f("System Update","New features have been added to the dashboard. Check out the enhanced analytics section.",{label:"Learn More",onClick:()=>console.log("Navigate to help")})}}},Aa=({title:r,subtitle:x,showNotifications:C=!0,showUserMenu:v=!0})=>{const{user:f,isDark:o,setIsDark:g}=le(),{unreadCount:h}=ut(),{addSampleNotifications:S}=De(),[t,i]=c.useState(!1),[n,T]=c.useState(!1),d=()=>{localStorage.removeItem("mwalimu-user"),localStorage.removeItem("mwalimu-auth"),window.location.href="/login"},E=()=>{S()},B=()=>{g(!o)};return e.jsx("header",{className:"glass-sidebar border-b border-white/20 dark:border-gray-700/50 shadow-sm relative z-10",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(Ot,{size:"md"}),r&&e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r}),x&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:x})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[C&&e.jsx("button",{onClick:E,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Add sample notifications (demo)",children:e.jsx(Ae,{className:"h-4 w-4"})}),C&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!t),className:"relative p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:[e.jsx(we,{className:"h-5 w-5"}),h>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full text-xs text-white flex items-center justify-center text-[10px]",children:h>9?"9+":h})]}),e.jsx(Sa,{isOpen:t,onClose:()=>i(!1)})]}),e.jsx("button",{onClick:B,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:o?"Switch to light mode":"Switch to dark mode",children:o?e.jsx(mt,{className:"h-5 w-5"}):e.jsx(St,{className:"h-5 w-5"})}),v&&f&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:f.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:f.role})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>T(!n),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-bright-green to-green-600 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"h-4 w-4 text-white"})})}),n&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>{T(!1),window.location.href="/settings"},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(he,{className:"h-4 w-4 mr-3"}),"Settings"]}),e.jsxs("button",{onClick:()=>{T(!1),console.log("Profile clicked")},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Le,{className:"h-4 w-4 mr-3"}),"Profile"]}),e.jsx("hr",{className:"my-2 border-gray-200 dark:border-gray-700"}),e.jsxs("button",{onClick:()=>{T(!1),d()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx(Yt,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})})]})]})]})]})})})},xe=({children:r,title:x,subtitle:C})=>e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(Ca,{}),e.jsxs("div",{className:"flex-1 flex flex-col ml-64 lg:ml-0",children:[e.jsx(Aa,{title:x,subtitle:C}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-6",children:e.jsx("div",{className:"space-y-4 sm:space-y-6",children:r})})})]})]}),me=({children:r})=>{const{isAuthenticated:x}=le();return x?e.jsx(e.Fragment,{children:r}):e.jsx(at,{to:"/login",replace:!0})},Ta=()=>{const[r,x]=c.useState("user"),C=xt(),{setUser:v,setIsAuthenticated:f}=le(),o=g=>{g.preventDefault(),v({id:"1",name:r==="admin"?"Admin User":"Regular User",email:r==="admin"?"admin@mwalimu.com":"user@mwalimu.com",role:r}),f(!0),C("/dashboard")};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:'url("/login-cover.jpg?v=3")'},children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-bright-green to-miraa-green p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"ðŸš›"})}),e.jsx("h1",{className:"text-2xl font-extrabold text-white mb-2",children:"Mwalimu Transporters"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Miraa Transport Management System"})]}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700"}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 text-center mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Select your role to continue"})]}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Access Role"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("label",{className:`relative flex p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ${r==="user"?"border-bright-green bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("input",{type:"radio",name:"role",value:"user",checked:r==="user",onChange:g=>x(g.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r==="user"?"border-bright-green":"border-gray-300 dark:border-gray-500"}`,children:r==="user"&&e.jsx("div",{className:"w-2 h-2 bg-bright-green rounded-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"User Portal"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record daily activities"})]})]}),e.jsx("div",{className:`ml-auto ${r==="user"?"text-bright-green":"text-gray-400"}`,children:"ðŸ‘¤"})]}),e.jsxs("label",{className:`relative flex p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ${r==="admin"?"border-bright-green bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("input",{type:"radio",name:"role",value:"admin",checked:r==="admin",onChange:g=>x(g.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r==="admin"?"border-bright-green":"border-gray-300 dark:border-gray-500"}`,children:r==="admin"&&e.jsx("div",{className:"w-2 h-2 bg-bright-green rounded-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Admin Portal"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage all records"})]})]}),e.jsx("div",{className:`ml-auto ${r==="admin"?"text-bright-green":"text-gray-400"}`,children:"âš™ï¸"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Ready to continue?"})})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-bright-green to-miraa-green text-white font-semibold py-3 px-6 rounded-xl hover:from-miraa-green hover:to-bright-green focus:outline-none focus:ring-2 focus:ring-bright-green focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Access Portal â†’"})]}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 mt-6"}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Demo Mode â€¢ Select role to access portal"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"System Online"})]})]})]})]})})})},w=({children:r,className:x,onClick:C,padding:v="md",variant:f="default"})=>{const o={none:"",sm:"p-4",md:"p-6",lg:"p-8"},g={default:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm",enhanced:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200",outlined:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",elevated:"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700",glass:"glass-card hover:bg-white/90 dark:hover:bg-gray-800/90 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",gradient:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 border border-gray-200/50 dark:border-gray-700/50 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",neon:"bg-white dark:bg-gray-800 border border-bright-green/20 dark:border-bright-green/30 rounded-xl shadow-lg hover:shadow-bright-green/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",blue:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-800 dark:to-gray-900 border border-blue-200 dark:border-blue-700 rounded-xl shadow-lg hover:shadow-blue-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",green:"bg-gradient-to-br from-green-50 to-green-100 dark:from-gray-800 dark:to-gray-900 border border-green-200 dark:border-green-700 rounded-xl shadow-lg hover:shadow-green-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",red:"bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-800 dark:to-gray-900 border border-red-200 dark:border-red-700 rounded-xl shadow-lg hover:shadow-red-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",purple:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-gray-800 dark:to-gray-900 border border-purple-200 dark:border-purple-700 rounded-xl shadow-lg hover:shadow-purple-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",emerald:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-gray-800 dark:to-gray-900 border border-emerald-200 dark:border-emerald-700 rounded-xl shadow-lg hover:shadow-emerald-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",teal:"bg-gradient-to-br from-teal-50 to-teal-100 dark:from-gray-800 dark:to-gray-900 border border-teal-200 dark:border-teal-700 rounded-xl shadow-lg hover:shadow-teal-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",lime:"bg-gradient-to-br from-lime-50 to-lime-100 dark:from-gray-800 dark:to-gray-900 border border-lime-200 dark:border-lime-700 rounded-xl shadow-lg hover:shadow-lime-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",forest:"bg-gradient-to-br from-green-50 to-green-100 dark:from-gray-800 dark:to-gray-900 border border-green-200 dark:border-green-700 rounded-xl shadow-lg hover:shadow-green-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",mint:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-900 border border-green-200 dark:border-green-700 rounded-xl shadow-lg hover:shadow-green-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5"};return e.jsx("div",{className:ne(g[f],o[v],"transition-all duration-200","overflow-hidden",C&&"cursor-pointer hover:shadow-lg hover:-translate-y-px",x),onClick:C,children:r})},Ea=()=>{const{sourceRecords:r,user:x}=le(),{showSuccessNotification:C}=De(),v=xt(),[f,o]=c.useState("overview"),[g,h]=c.useState(!1),[S]=c.useState(!0),[t,i]=c.useState(new Date),[n,T]=c.useState({cpu:45,memory:67,storage:23,network:89}),[d,E]=c.useState([]),[B,z]=c.useState([{id:"1",type:"success",message:"New record added successfully",time:"2m ago",read:!1},{id:"2",type:"warning",message:"Low stock alert for Area AC001",time:"15m ago",read:!1},{id:"3",type:"info",message:"System backup completed",time:"1h ago",read:!0},{id:"4",type:"error",message:"Failed to sync with server",time:"2h ago",read:!0}]);c.useEffect(()=>{const s=setInterval(()=>{i(new Date)},1e3);return()=>clearInterval(s)},[]),c.useEffect(()=>{const s=setInterval(()=>{T(N=>({cpu:Math.max(20,Math.min(80,N.cpu+(Math.random()-.5)*10)),memory:Math.max(30,Math.min(90,N.memory+(Math.random()-.5)*8)),storage:Math.max(10,Math.min(50,N.storage+(Math.random()-.5)*5)),network:Math.max(70,Math.min(100,N.network+(Math.random()-.5)*6))}))},5e3);return()=>clearInterval(s)},[]);const p={totalRecords:r.length,totalGoodsIn:r.reduce((s,N)=>s+N.quantitySold,0),totalCost:r.reduce((s,N)=>s+N.totalCost,0),totalPackagingCost:r.reduce((s,N)=>s+(N.totalPackagingCost||0),0)},q=[{point:"AC001",records:r.filter(s=>s.areaCode==="AC001").length,goods:r.filter(s=>s.areaCode==="AC001").reduce((s,N)=>s+N.quantitySold,0)},{point:"AC002",records:r.filter(s=>s.areaCode==="AC002").length,goods:r.filter(s=>s.areaCode==="AC002").reduce((s,N)=>s+N.quantitySold,0)},{point:"AC003",records:r.filter(s=>s.areaCode==="AC003").length,goods:r.filter(s=>s.areaCode==="AC003").reduce((s,N)=>s+N.quantitySold,0)},{point:"AC004",records:r.filter(s=>s.areaCode==="AC004").length,goods:r.filter(s=>s.areaCode==="AC004").reduce((s,N)=>s+N.quantitySold,0)}],R=(x==null?void 0:x.role)==="admin"?[{title:"Total Records",value:p.totalRecords.toString(),icon:Ie,color:"gradient-blue",textColor:"text-gradient-blue",trend:"+12%",trendColor:"text-blue-600",description:"Records this month",bgPattern:"from-blue-400/20 to-blue-600/20"},{title:"Total Goods In",value:`${p.totalGoodsIn}kg`,icon:de,color:"gradient-emerald",textColor:"text-gradient-emerald",trend:"+8%",trendColor:"text-green-600",description:"Goods processed",bgPattern:"from-emerald-400/20 to-emerald-600/20"},{title:"Total Investment",value:Y(p.totalCost),icon:Ke,color:"gradient-purple",textColor:"text-gradient-purple",trend:"+15%",trendColor:"text-purple-600",description:"Total capital",bgPattern:"from-purple-400/20 to-purple-600/20"},{title:"Packaging Costs",value:Y(p.totalPackagingCost),icon:de,color:"gradient-red",textColor:"text-gradient-red",trend:"+5%",trendColor:"text-red-600",description:"Packaging expenses",bgPattern:"from-red-400/20 to-red-600/20"}]:[{title:"My Records",value:p.totalRecords.toString(),icon:Ie,color:"gradient-teal",textColor:"text-gradient-teal",trend:"+12%",trendColor:"text-blue-600",description:"Records this month",bgPattern:"from-teal-400/20 to-teal-600/20"},{title:"Goods Processed",value:`${p.totalGoodsIn}kg`,icon:de,color:"gradient-lime",textColor:"text-gradient-lime",trend:"+8%",trendColor:"text-green-600",description:"Goods processed",bgPattern:"from-lime-400/20 to-lime-600/20"},{title:"Total Value",value:Y(p.totalCost),icon:Ke,color:"gradient-green-purple",textColor:"text-gradient-green-purple",trend:"+15%",trendColor:"text-purple-600",description:"Total value",bgPattern:"from-green-400/20 to-purple-400/20"},{title:"Efficiency",value:"92%",icon:Te,color:"gradient-mint",textColor:"text-gradient-mint",trend:"+3%",trendColor:"text-orange-600",description:"Performance score",bgPattern:"from-mint-400/20 to-mint-600/20"}],l=[{id:"1",type:"record",action:"Added new source record",time:"2 minutes ago",icon:de,color:"text-green-600",user:"John Doe",details:"AC001 - 50kg miraa"},{id:"2",type:"transport",action:"Updated transport log",time:"15 minutes ago",icon:fe,color:"text-blue-600",user:"Jane Smith",details:"Trip TR-001 completed"},{id:"3",type:"destination",action:"Recorded delivery",time:"1 hour ago",icon:be,color:"text-purple-600",user:"Bob Johnson",details:"Nairobi delivery"},{id:"4",type:"system",action:"System backup completed",time:"2 hours ago",icon:je,color:"text-gray-600",user:"System",details:"Daily backup"},{id:"5",type:"alert",action:"Low stock alert",time:"3 hours ago",icon:Ne,color:"text-yellow-600",user:"System",details:"Area AC002"}],k=[{title:"Record Goods In",description:"Add new source records",icon:de,color:"gradient-emerald",textColor:"text-gradient-emerald",action:()=>v("/source-records"),shortcut:"Ctrl+N",category:"primary",badge:"New",bgPattern:"from-emerald-400/20 to-emerald-600/20"},{title:"Track Transport",description:"Update transport logs",icon:fe,color:"gradient-blue",textColor:"text-gradient-blue",action:()=>v("/transport-log"),shortcut:"Ctrl+T",category:"primary",badge:"Active",bgPattern:"from-blue-400/20 to-blue-600/20"},{title:"Record Delivery",description:"Log destination records",icon:be,color:"gradient-purple",textColor:"text-gradient-purple",action:()=>v("/destination-records"),shortcut:"Ctrl+D",category:"primary",badge:"Hot",bgPattern:"from-purple-400/20 to-purple-600/20"},{title:"View Reports",description:"Check performance metrics",icon:ye,color:"gradient-red",textColor:"text-gradient-red",action:()=>v("/profit-reports"),shortcut:"Ctrl+R",category:"secondary",badge:null,bgPattern:"from-red-400/20 to-red-600/20"},{title:"Search Records",description:"Find specific records",icon:Ee,color:"gradient-teal",textColor:"text-gradient-teal",action:()=>C("Info","Search functionality coming soon"),shortcut:"Ctrl+F",category:"secondary",badge:null,bgPattern:"from-teal-400/20 to-teal-600/20"},{title:"Export Data",description:"Download records",icon:oe,color:"gradient-lime",textColor:"text-gradient-lime",action:()=>C("Info","Export functionality coming soon"),shortcut:"Ctrl+E",category:"secondary",badge:null,bgPattern:"from-lime-400/20 to-lime-600/20"}],m=async()=>{h(!0);try{await new Promise(s=>setTimeout(s,1e3)),C("Success","Dashboard refreshed successfully")}finally{h(!1)}},L=async s=>{try{await new Promise(N=>setTimeout(N,2e3)),C("Success",`${s.toUpperCase()} export completed`)}catch{C("Error",`Failed to export ${s.toUpperCase()}`)}},y=s=>{E(N=>N.includes(s)?N.filter(O=>O!==s):[...N,s])},a=s=>{z(N=>N.map(O=>O.id===s?{...O,read:!0}:O))},M=B.filter(s=>!s.read).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-blue-50 via-green-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${S?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:S?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Se,{className:"h-4 w-4"}),t.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[M," notifications"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"85%"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gradient-blue-green",children:["Welcome back, ",(x==null?void 0:x.name)||"User","! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Here's what's happening with your miraa transport operations today"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",t.toLocaleString()]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["System Status: ",e.jsx("span",{className:"text-green-600 font-medium",children:"Healthy"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:m,disabled:g,className:"btn-glass flex items-center gap-2 hover:bg-green-50 dark:hover:bg-green-900/20",children:[e.jsx(ue,{className:`h-4 w-4 ${g?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>o("overview"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="overview"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Overview"}),e.jsx("button",{onClick:()=>o("activities"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="activities"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Activities"}),e.jsx("button",{onClick:()=>o("analytics"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="analytics"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Analytics"}),e.jsx("button",{onClick:()=>o("tools"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="tools"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Tools"}),e.jsxs("button",{onClick:()=>o("notifications"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 relative ${f==="notifications"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:["Notifications",M>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:M})]}),e.jsx("button",{onClick:()=>o("settings"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="settings"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Settings"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:R.map((s,N)=>e.jsxs(w,{variant:"glass",className:"group cursor-pointer hover-lift relative overflow-hidden",children:[e.jsxs("div",{className:`absolute inset-0 bg-gradient-to-br ${s.bgPattern} opacity-30`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-white/20 to-transparent rounded-full -translate-y-10 translate-x-10"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-tr from-white/20 to-transparent rounded-full translate-y-8 -translate-x-8"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${s.color} group-hover:scale-110 transition-transform duration-200 shadow-lg`,children:e.jsx(s.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(st,{className:"h-4 w-4 text-gray-400 hover:text-yellow-500"})}),e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(Qt,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:s.title}),e.jsx("p",{className:`text-2xl font-bold ${s.textColor}`,children:s.value}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.description})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:`flex items-center text-sm ${s.trendColor}`,children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),s.trend]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"vs last week"})]})]})]},N))}),f==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{variant:"blue",className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Access your most used features"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"Use shortcuts for faster access"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map((s,N)=>e.jsxs("button",{onClick:s.action,className:`group p-6 rounded-xl border transition-all duration-200 hover:-translate-y-1 text-left relative overflow-hidden ${s.category==="primary"?"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-gray-200 dark:border-gray-700 hover:shadow-lg":"bg-gradient-to-br from-gray-50/50 to-gray-100/50 dark:from-gray-800/50 dark:to-gray-900/50 border-gray-200/50 dark:border-gray-700/50 hover:shadow-md"}`,children:[e.jsxs("div",{className:`absolute inset-0 bg-gradient-to-br ${s.bgPattern} opacity-20`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-white/30 to-transparent rounded-full -translate-y-8 translate-x-8"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-gradient-to-tr from-white/20 to-transparent rounded-full translate-y-6 -translate-x-6"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.color} group-hover:scale-110 transition-transform duration-200 shadow-lg`,children:e.jsx(s.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.badge&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${s.badge==="New"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":s.badge==="Active"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":s.badge==="Hot"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:s.badge}),e.jsx("div",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded",children:s.shortcut}),e.jsx("button",{onClick:O=>{O.stopPropagation(),y(s.title)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(Ht,{className:`h-4 w-4 ${d.includes(s.title)?"text-red-500 fill-current":"text-gray-400"}`})})]})]}),e.jsx("h4",{className:`font-semibold ${s.textColor} mb-1`,children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.description})]})]},N))})]}),e.jsxs(w,{variant:"purple",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-bright-green hover:text-green-600 font-medium",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:e.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.time})]})]},s.id))})]})]}),f==="activities"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Activity Timeline"}),e.jsx("div",{className:"space-y-4",children:l.map((s,N)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-r ${k[N%k.length].color} flex items-center justify-center`,children:e.jsx(s.icon,{className:"h-4 w-4 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.time})]})]},s.id))})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Te,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Efficiency Rate"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall performance"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"92%"}),e.jsx("p",{className:"text-xs text-green-600",children:"+5% this week"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Se,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Avg. Processing Time"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Per record"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"4.2m"}),e.jsx("p",{className:"text-xs text-blue-600",children:"-0.3m improvement"})]})]})]})]})]}),f==="analytics"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Pickup Point Performance"}),e.jsx("div",{className:"space-y-4",children:q.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-bright-green to-green-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:s.point})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Area ",s.point]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.records," records"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[s.goods,"kg"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"total goods"})]})]},s.point))})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Data Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Records This Month"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-300",children:"+12%"})]}),e.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"75%"}})})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Goods Processed"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-300",children:"+8%"})]}),e.jsx("div",{className:"w-full bg-green-200 dark:bg-green-800 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"60%"}})})]})]})]})]}),f==="tools"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(oe,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Export Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export your records in various formats"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>L("csv"),className:"w-full btn-blue text-left flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),e.jsxs("button",{onClick:()=>L("excel"),className:"w-full btn-emerald text-left flex items-center",children:[e.jsx(pt,{className:"h-4 w-4 mr-2"}),"Export as Excel"]}),e.jsxs("button",{onClick:()=>L("pdf"),className:"w-full btn-purple text-left flex items-center",children:[e.jsx(pt,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Ee,{className:"h-5 w-5 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Search & Filter"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Find specific records quickly"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>v("/source-records"),className:"w-full btn-teal text-left flex items-center",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Advanced Filters"]}),e.jsxs("button",{onClick:()=>o("analytics"),className:"w-full btn-lime text-left flex items-center",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Date Range Search"]}),e.jsxs("button",{onClick:()=>v("/destination-records"),className:"w-full btn-purple text-left flex items-center",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Location Search"]})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(he,{className:"h-5 w-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Tools"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Manage your account and preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>v("/settings-card"),className:"w-full btn-blue text-left flex items-center",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Profile Settings"]}),e.jsxs("button",{onClick:()=>o("notifications"),className:"w-full btn-emerald text-left flex items-center",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Notifications"]}),e.jsxs("button",{onClick:()=>v("/settings-card"),className:"w-full btn-red text-left flex items-center",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Security"]})]})]})]}),(x==null?void 0:x.role)==="user"&&e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Your Actions"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Quick access to your daily tasks"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>v("/source-records"),className:"group p-6 border-2 border-bright-green border-dashed rounded-xl hover:bg-green-50 dark:hover:bg-green-900/20 transition-all duration-200 hover:-translate-y-1 text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-bright-green to-green-600 rounded-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Source Records"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record goods received"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-bright-green",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),"Get Started"]})]}),e.jsxs("button",{onClick:()=>v("/transport-log"),className:"group p-6 border-2 border-blue-500 border-dashed rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200 hover:-translate-y-1 text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(fe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Transport Log"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track vehicles and drivers"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),"Track Now"]})]}),e.jsxs("button",{onClick:()=>v("/destination-records"),className:"group p-6 border-2 border-purple-500 border-dashed rounded-xl hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-200 hover:-translate-y-1 text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Destination Records"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record deliveries"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-purple-600",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),"Record Delivery"]})]})]})]}),f==="notifications"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{variant:"glass",className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Stay updated with system alerts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{B.forEach(s=>a(s.id)),C("Success","All notifications marked as read")},className:"btn-blue text-sm",children:"Mark All Read"}),e.jsxs("button",{onClick:()=>o("settings"),className:"btn-emerald text-sm flex items-center gap-1",children:[e.jsx(he,{className:"h-4 w-4"}),"Settings"]})]})]}),e.jsx("div",{className:"space-y-4",children:B.map(s=>e.jsx("div",{className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${s.read?"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${s.type==="success"?"bg-green-100 dark:bg-green-900/20":s.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/20":s.type==="error"?"bg-red-100 dark:bg-red-900/20":"bg-blue-100 dark:bg-blue-900/20"}`,children:[s.type==="success"&&e.jsx(Zt,{className:"h-4 w-4 text-green-600"}),s.type==="warning"&&e.jsx(Ne,{className:"h-4 w-4 text-yellow-600"}),s.type==="error"&&e.jsx(Oe,{className:"h-4 w-4 text-red-600"}),s.type==="info"&&e.jsx(Ce,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.read&&e.jsx("button",{onClick:()=>a(s.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(Fe,{className:"h-4 w-4 text-gray-400"})}),e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(_e,{className:"h-4 w-4 text-gray-400"})})]})]})},s.id))})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(we,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive real-time alerts"})]})]}),e.jsx("button",{onClick:()=>C("Success","Push notifications toggled"),className:"w-12 h-6 bg-emerald-500 rounded-full relative transition-colors",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(At,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Daily summaries"})]})]}),e.jsx("button",{onClick:()=>C("Success","Email notifications toggled"),className:"w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full relative transition-colors",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Tt,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Sound Alerts"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Audio notifications"})]})]}),e.jsx("button",{onClick:()=>C("Success","Sound alerts toggled"),className:"w-12 h-6 bg-emerald-500 rounded-full relative transition-colors",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5 transition-transform"})})]})]})]})]}),f==="settings"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"System Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Jt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"CPU Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Processing power"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[n.cpu.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${n.cpu}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(gt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Memory Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"RAM utilization"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[n.memory.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${n.memory}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(Pe,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Storage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Disk space"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[n.storage.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${n.storage}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:e.jsx(rt,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Network"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Connection speed"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[n.network.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${n.network}%`}})})]})]})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"User Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(mt,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Dark Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toggle theme"})]})]}),e.jsx("button",{className:"w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full relative",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Xt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Language"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"English (US)"})]})]}),e.jsx(Xe,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Se,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Timezone"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"EAT (UTC+3)"})]})]}),e.jsx(Xe,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ke,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Currency"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kenyan Shilling (KES)"})]})]}),e.jsx(Xe,{className:"h-4 w-4 text-gray-400"})]})]})]})]})]})},I=({label:r,type:x="text",value:C,onChange:v,error:f,success:o,info:g,required:h=!1,placeholder:S,disabled:t=!1,className:i,min:n,max:T,step:d,pattern:E,maxLength:B,minLength:z,autoComplete:p,autoFocus:q=!1,readOnly:R=!1,showPasswordToggle:l=!1,leftIcon:k,rightIcon:m,validation:L,onBlur:y,onFocus:a,onKeyDown:M})=>{const[s,N]=c.useState(!1),[O,j]=c.useState(!1),[F,G]=c.useState(null),J=c.useRef(null),W=K=>{const _=x==="number"?Number(K.target.value):K.target.value;if(v(_),L){const se=X(K.target.value,L);G(se)}},X=(K,_)=>_.required&&!K.trim()?"This field is required":_.min&&K.length<_.min?`Minimum length is ${_.min} characters`:_.max&&K.length>_.max?`Maximum length is ${_.max} characters`:_.pattern&&!_.pattern.test(K)?"Invalid format":_.custom?_.custom(K):null,H=()=>{j(!0),a==null||a()},ce=()=>{j(!1),y==null||y()},A=()=>x==="password"&&l?s?"text":"password":x,u=()=>f||F?e.jsx(Ne,{className:"h-4 w-4 text-red-500"}):o?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):g?e.jsx(Ce,{className:"h-4 w-4 text-blue-500"}):null,D=()=>f||F?"border-red-500 focus:ring-red-500 focus:border-red-500":o?"border-green-500 focus:ring-green-500 focus:border-green-500":O?"border-bright-green focus:ring-bright-green focus:border-bright-green":"border-gray-300 dark:border-gray-600 focus:ring-bright-green focus:border-bright-green";return e.jsxs("div",{className:`space-y-2 ${i}`,children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-1",children:[e.jsx("span",{children:r}),h&&e.jsx("span",{className:"text-red-500",children:"*"}),g&&e.jsx(Ce,{className:"h-3 w-3 text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[k&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-700 dark:text-blue-400",children:k}),e.jsx("input",{ref:J,type:A(),value:C,onChange:W,onFocus:H,onBlur:ce,onKeyDown:M,placeholder:S,disabled:t,readOnly:R,autoFocus:q,autoComplete:p,min:n,max:T,step:d,pattern:E,maxLength:B,minLength:z,className:ne("w-full px-3 py-3 rounded-lg transition-all duration-200","bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-opacity-50",D(),k&&"pl-10",(m||l||u())&&"pr-10",t&&"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800",R&&"bg-gray-50 dark:bg-gray-800 cursor-default",f||F?"border-red-500":"border-gray-300 dark:border-gray-600")}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[u(),m&&e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:m}),l&&x==="password"&&e.jsx("button",{type:"button",onClick:()=>N(!s),className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s?e.jsx(Et,{className:"h-4 w-4"}):e.jsx(Fe,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[(f||F)&&e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center space-x-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsx("span",{children:f||F})]}),o&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center space-x-1",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:o})]}),g&&!f&&!F&&e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center space-x-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),e.jsx("span",{children:g})]})]}),B&&typeof C=="string"&&e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:ne("text-xs",C.length>B*.9?"text-red-500":"text-gray-500 dark:text-gray-400"),children:[C.length,"/",B]})})]})},U=({label:r,value:x,onChange:C,options:v,error:f,success:o,info:g,required:h=!1,placeholder:S="Select an option...",disabled:t=!1,className:i,searchable:n=!1,clearable:T=!1,multiple:d=!1,loading:E=!1,emptyMessage:B="No options available",leftIcon:z,rightIcon:p,onSearch:q,onCreate:R,validation:l})=>{const[k,m]=c.useState(!1),[L,y]=c.useState(""),[a,M]=c.useState(!1),[s,N]=c.useState(null),O=c.useRef(null),j=c.useRef(null),F=v.filter(D=>D.label.toLowerCase().includes(L.toLowerCase())||D.value.toLowerCase().includes(L.toLowerCase())),G=v.find(D=>D.value===x),J=d?v.filter(D=>x.split(",").includes(D.value)):[G].filter(Boolean);c.useEffect(()=>{const D=K=>{O.current&&!O.current.contains(K.target)&&(m(!1),y(""))};return k&&document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[k]),c.useEffect(()=>{k&&n&&j.current&&j.current.focus()},[k,n]);const W=D=>{if(d){const K=x?x.split(","):[],_=K.includes(D)?K.filter(se=>se!==D):[...K,D];C(_.join(","))}else C(D),m(!1),y("")},X=D=>{D.stopPropagation(),C(""),N(null)},H=D=>{y(D),q==null||q(D)},ce=()=>{L&&R&&(R(L),y(""))},A=()=>f||s?e.jsx(Ne,{className:"h-4 w-4 text-red-500"}):o?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):g?e.jsx(Ce,{className:"h-4 w-4 text-blue-500"}):null,u=()=>f||s?"border-red-500 focus:ring-red-500 focus:border-red-500":o?"border-green-500 focus:ring-green-500 focus:border-green-500":a||k?"border-bright-green focus:ring-bright-green focus:border-bright-green":"border-gray-300 dark:border-gray-600 focus:ring-bright-green focus:border-bright-green";return e.jsxs("div",{className:`space-y-2 ${i}`,children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-1",children:[e.jsx("span",{children:r}),h&&e.jsx("span",{className:"text-red-500",children:"*"}),g&&e.jsx(Ce,{className:"h-3 w-3 text-gray-400"})]}),e.jsxs("div",{className:"relative",ref:O,children:[e.jsxs("button",{type:"button",onClick:()=>!t&&m(!k),onFocus:()=>M(!0),onBlur:()=>M(!1),disabled:t,className:ne("w-full px-3 py-3 rounded-lg transition-all duration-200","bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-opacity-50","flex items-center justify-between",u(),z&&"pl-10",(p||T||A())&&"pr-10",t&&"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800",f||s?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[z&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-700 dark:text-blue-400",children:z}),e.jsx("div",{className:"flex-1 text-left",children:d?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[J.map(D=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-bright-green text-white text-xs rounded-md",children:[D==null?void 0:D.label,e.jsx("button",{onClick:K=>{K.stopPropagation(),W((D==null?void 0:D.value)||"")},className:"ml-1 hover:bg-green-600 rounded-full p-0.5",children:e.jsx(Oe,{className:"h-2 w-2"})})]},D==null?void 0:D.value)),J.length===0&&e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:S})]}):e.jsx("span",{className:G?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:G?G.label:S})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[A(),p&&e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:p}),T&&x&&e.jsx("button",{onClick:X,className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(Dt,{className:ne("h-4 w-4 text-gray-600 dark:text-gray-400 transition-transform duration-200",k&&"rotate-180")})]})]}),k&&e.jsxs("div",{className:"absolute z-[9999] w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-hidden min-w-max left-0 right-0 sm:min-w-0",children:[n&&e.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{ref:j,type:"text",value:L,onChange:D=>H(D.target.value),placeholder:"Search options...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:E?e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-bright-green mx-auto"}),e.jsx("p",{className:"mt-2 text-sm",children:"Loading..."})]}):F.length>0?F.map(D=>e.jsxs("button",{onClick:()=>!D.disabled&&W(D.value),disabled:D.disabled,className:ne("w-full px-3 py-3 text-left text-sm transition-colors","hover:bg-gray-100 dark:hover:bg-gray-700","flex items-start space-x-3",D.disabled&&"opacity-50 cursor-not-allowed",d&&x.split(",").includes(D.value)&&"bg-bright-green text-white hover:bg-green-600",!d&&x===D.value&&"bg-bright-green text-white hover:bg-green-600"),children:[D.icon&&e.jsx("span",{className:"flex-shrink-0",children:D.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium break-words whitespace-normal",children:D.label}),D.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 break-words whitespace-normal",children:D.description})]}),!d&&x===D.value&&e.jsx(ee,{className:"h-4 w-4 flex-shrink-0"})]},D.value)):e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("p",{className:"text-sm",children:B}),L&&R&&e.jsxs("button",{onClick:ce,className:"mt-2 text-sm text-bright-green hover:text-green-600 font-medium",children:['Create "',L,'"']})]})})]})]}),e.jsxs("div",{className:"space-y-1",children:[(f||s)&&e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center space-x-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsx("span",{children:f||s})]}),o&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center space-x-1",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:o})]}),g&&!f&&!s&&e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center space-x-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),e.jsx("span",{children:g})]})]})]})},ke=({isOpen:r,onClose:x,title:C,children:v,size:f="md",type:o="default",icon:g})=>{if(!r)return null;const h={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"},S={default:{headerBg:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",borderColor:"border-gray-200 dark:border-gray-700",iconColor:"text-gray-600 dark:text-gray-400",titleColor:"text-gray-900 dark:text-gray-100"},success:{headerBg:"bg-gradient-to-r from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20",borderColor:"border-emerald-200 dark:border-emerald-700",iconColor:"text-emerald-600 dark:text-emerald-400",titleColor:"text-emerald-900 dark:text-emerald-100"},warning:{headerBg:"bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20",borderColor:"border-yellow-200 dark:border-yellow-700",iconColor:"text-yellow-600 dark:text-yellow-400",titleColor:"text-yellow-900 dark:text-yellow-100"},error:{headerBg:"bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20",borderColor:"border-red-200 dark:border-red-700",iconColor:"text-red-600 dark:text-red-400",titleColor:"text-red-900 dark:text-red-100"},info:{headerBg:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",borderColor:"border-blue-200 dark:border-blue-700",iconColor:"text-blue-600 dark:text-blue-400",titleColor:"text-blue-900 dark:text-blue-100"}},t={default:e.jsx(he,{className:"h-6 w-6"}),success:e.jsx(ee,{className:"h-6 w-6"}),warning:e.jsx(Ne,{className:"h-6 w-6"}),error:e.jsx(Ne,{className:"h-6 w-6"}),info:e.jsx(Ce,{className:"h-6 w-6"})},i=S[o],n=g||t[o];return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:x}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs("div",{className:ne("relative inline-block align-bottom bg-white dark:bg-gray-800 rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full border-2",h[f],i.borderColor),children:[e.jsx("div",{className:ne("px-6 py-4 border-b",i.headerBg,i.borderColor),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${i.iconColor} bg-white/50 dark:bg-gray-800/50`,children:n}),e.jsx("h3",{className:ne("text-xl font-bold",i.titleColor),children:C})]}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-white/20 dark:hover:bg-gray-700/50 rounded-lg transition-colors group",children:e.jsx(Oe,{className:"h-5 w-5 text-gray-500 group-hover:text-gray-700 dark:group-hover:text-gray-300"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 px-6 py-6",children:v})]})]})})};function ze({data:r,columns:x,onEdit:C,onDelete:v,onView:f,onBulkAction:o,searchable:g=!0,searchPlaceholder:h="Search...",emptyMessage:S="No data available",loading:t=!1,pagination:i=!0,pageSize:n=10,selectable:T=!1,bulkActions:d=[],filters:E=[],exportable:B=!1,onExport:z,refreshable:p=!1,onRefresh:q,className:R,rowClassName:l,onRowClick:k,actions:m=[]}){const[L,y]=c.useState(""),[a,M]=c.useState(null),[s,N]=c.useState("asc"),[O,j]=c.useState(1),[F,G]=c.useState(new Set),[J,W]=c.useState(!1),[X,H]=c.useState({}),[ce,A]=c.useState(!1),u=c.useRef(null),D=c.useMemo(()=>{let P=r;return L&&(P=r.filter(V=>x.some(Z=>{const Re=V[Z.key];return String(Re).toLowerCase().includes(L.toLowerCase())}))),Object.entries(X).forEach(([V,Z])=>{Z!==""&&Z!==null&&Z!==void 0&&(P=P.filter(Re=>{const We=Re[V];return typeof Z=="string"?String(We).toLowerCase().includes(Z.toLowerCase()):We===Z}))}),a&&P.sort((V,Z)=>{const Re=V[a],We=Z[a];return Re<We?s==="asc"?-1:1:Re>We?s==="asc"?1:-1:0}),P},[r,L,a,s,X,x]),K=Math.ceil(D.length/n),_=(O-1)*n,se=_+n,b=i?D.slice(_,se):D,$=P=>{a===P?N(s==="asc"?"desc":"asc"):(M(P),N("asc"))},Q=()=>{F.size===b.length?G(new Set):G(new Set(b.map(P=>P.id)))},te=P=>{const V=new Set(F);V.has(P)?V.delete(P):V.add(P),G(V)},ae=P=>{const V=r.filter(Z=>F.has(Z.id));o==null||o(P,V),G(new Set),A(!1)},Ue=()=>{z==null||z(D)},Me=()=>{H({}),y("")};c.useEffect(()=>{j(1)},[L,X]),c.useEffect(()=>{A(F.size>0)},[F]);const $e=P=>a!==P?e.jsx(ea,{className:"h-4 w-4 text-gray-400"}):s==="asc"?e.jsx(ta,{className:"h-4 w-4 text-bright-green"}):e.jsx(Dt,{className:"h-4 w-4 text-bright-green"});return e.jsxs("div",{className:`space-y-4 ${R}`,ref:u,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[g&&e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:L,onChange:P=>y(P.target.value),placeholder:h,className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 w-full sm:w-64"})]}),E.length>0&&e.jsxs("button",{onClick:()=>W(!J),className:ne("flex items-center space-x-2 px-3 py-2 rounded-lg border transition-colors",J?"bg-bright-green text-white border-bright-green":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"}),Object.values(X).some(P=>P!==""&&P!==null&&P!==void 0)&&e.jsx("span",{className:"px-1.5 py-0.5 bg-red-500 text-white text-xs rounded-full",children:Object.values(X).filter(P=>P!==""&&P!==null&&P!==void 0).length})]}),p&&e.jsxs("button",{onClick:q,disabled:t,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[e.jsx(ue,{className:ne("h-4 w-4",t&&"animate-spin")}),e.jsx("span",{children:"Refresh"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[B&&e.jsxs("button",{onClick:Ue,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),ce&&d.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[F.size," selected"]}),d.map(P=>e.jsxs("button",{onClick:()=>ae(P.value),className:ne("flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors",P.variant==="danger"?"bg-red-600 hover:bg-red-700 text-white":"bg-bright-green hover:bg-green-600 text-white"),children:[P.icon,e.jsx("span",{children:P.label})]},P.value))]})]})]}),J&&E.length>0&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Filters"}),e.jsx("button",{onClick:Me,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Clear all"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(P=>{var V;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:P.label}),P.type==="text"&&e.jsx("input",{type:"text",value:X[P.key]||"",onChange:Z=>H({...X,[P.key]:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),P.type==="select"&&e.jsxs("select",{value:X[P.key]||"",onChange:Z=>H({...X,[P.key]:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"All"}),(V=P.options)==null?void 0:V.map(Z=>e.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),P.type==="date"&&e.jsx("input",{type:"date",value:X[P.key]||"",onChange:Z=>H({...X,[P.key]:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),P.type==="number"&&e.jsx("input",{type:"number",value:X[P.key]||"",onChange:Z=>H({...X,[P.key]:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]},P.key)})})]}),e.jsx("div",{className:"w-full overflow-hidden",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-emerald-200 dark:border-emerald-700 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20",children:[T&&e.jsx("th",{className:"px-2 py-2 text-left",children:e.jsx("button",{onClick:Q,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:F.size===b.length&&b.length>0?e.jsx(yt,{className:"h-4 w-4"}):e.jsx(bt,{className:"h-4 w-4"})})}),x.map(P=>e.jsx("th",{className:ne("px-2 py-2 text-xs font-medium text-gray-700 dark:text-gray-300",P.headerAlign==="center"&&"text-center",P.headerAlign==="right"&&"text-right",P.headerClassName),style:{width:P.width},children:P.sortable?e.jsxs("button",{onClick:()=>$(P.key),className:"flex items-center space-x-1 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx("span",{children:P.label}),$e(P.key)]}):P.label},String(P.key))),(C||v||f||m.length>0)&&e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-700 dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:t?e.jsx("tr",{children:e.jsx("td",{colSpan:x.length+(T?1:0)+(C||v||f||m.length>0?1:0),className:"px-4 py-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ue,{className:"h-5 w-5 animate-spin text-bright-green"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})})}):b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:x.length+(T?1:0)+(C||v||f||m.length>0?1:0),className:"px-4 py-8 text-center",children:e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[e.jsx(Ne,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:S})]})})}):b.map(P=>e.jsxs("tr",{className:ne("border-b border-gray-100 dark:border-gray-700 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 dark:hover:from-emerald-900/10 dark:hover:to-teal-900/10 transition-all duration-200",k&&"cursor-pointer",l==null?void 0:l(P)),onClick:()=>k==null?void 0:k(P),children:[T&&e.jsx("td",{className:"px-2 py-2",children:e.jsx("button",{onClick:V=>{V.stopPropagation(),te(P.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:F.has(P.id)?e.jsx(yt,{className:"h-4 w-4 text-bright-green"}):e.jsx(bt,{className:"h-4 w-4"})})}),x.map(V=>e.jsx("td",{className:ne("px-2 py-2 text-xs text-gray-900 dark:text-gray-100",V.align==="center"&&"text-center",V.align==="right"&&"text-right",V.className),children:V.render?V.render(P[V.key],P):String(P[V.key]||"-")},String(V.key))),(C||v||f||m.length>0)&&e.jsx("td",{className:"px-2 py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[m.map((V,Z)=>V.condition&&!V.condition(P)?null:e.jsx("button",{onClick:Re=>{Re.stopPropagation(),V.onClick(P)},className:ne("p-1 rounded-md transition-colors",V.variant==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":V.variant==="warning"?"text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20":"text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"),title:V.label,children:V.icon},Z)),f&&e.jsx("button",{onClick:V=>{V.stopPropagation(),f(P)},className:"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",title:"View",children:e.jsx(Fe,{className:"h-4 w-4"})}),C&&e.jsx("button",{onClick:V=>{V.stopPropagation(),C(P)},className:"p-1 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Edit",children:e.jsx(Mt,{className:"h-4 w-4"})}),v&&e.jsx("button",{onClick:V=>{V.stopPropagation(),v(P)},className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",title:"Delete",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]},P.id))})]})}),i&&K>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",_+1," to ",Math.min(se,D.length)," of ",D.length," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>j(Math.max(1,O-1)),disabled:O===1,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,K)},(P,V)=>{const Z=V+1;return e.jsx("button",{onClick:()=>j(Z),className:ne("px-3 py-2 rounded-lg transition-colors",O===Z?"bg-bright-green text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:Z},Z)})}),e.jsx("button",{onClick:()=>j(Math.min(K,O+1)),disabled:O===K,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})}const Qe=[{code:"AC001",name:"Embu Area",region:"Embu County",pickupStations:[{code:"ST001",name:"Embu Town Station",location:"Embu Town Center"}]},{code:"AC002",name:"Mecca Area",region:"Mecca Region",pickupStations:[{code:"ST002",name:"Mecca Station",location:"Mecca Center"}]},{code:"AC003",name:"Ena Area",region:"Ena Region",pickupStations:[{code:"ST003",name:"Ena Station",location:"Ena Center"}]},{code:"AC004",name:"Ugweri Area",region:"Ugweri Region",pickupStations:[{code:"ST004",name:"Ugweri Station",location:"Ugweri Center"}]}],Da=Qe.flatMap(r=>r.pickupStations.map(x=>({value:x.code,label:`${x.code} - ${x.name}`,areaCode:r.code,areaName:r.name}))),Ma={AC001:["Embu Town Center","Embu Market","Embu Industrial Area"],AC002:["Mecca Center","Mecca Market","Mecca Business District"],AC003:["Ena Center","Ena Market","Ena Commercial Area"],AC004:["Ugweri Center","Ugweri Market","Ugweri Business Hub"]},Nt={date:new Date().toISOString().split("T")[0],pickupStationCode:"ST001",areaCode:"AC001",quantitySold:0,itemPrice:0,driverName:"",driverId:"",driverPhone:"",vehicleReg:"",vehicleMake:"",packaging:{basins:0,sacks:0,boxes:0},packagingCosts:{basinCost:0,sackCost:0,boxCost:0},dropOffPoint:"",estimatedDeliveryTime:"",assignedBy:"",status:"loaded",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Ra=()=>{var se;const{sourceRecords:r,setSourceRecords:x,user:C}=le(),{showSuccessNotification:v,showErrorNotification:f}=De(),[o,g]=c.useState(!1),[h,S]=c.useState(null),[t,i]=c.useState(Nt),[n,T]=c.useState({}),[d,E]=c.useState(""),[B,z]=c.useState("all"),[p,q]=c.useState("all"),[R,l]=c.useState({start:"",end:""}),[k,m]=c.useState("date"),[L,y]=c.useState("desc"),[a,M]=c.useState("table"),[s,N]=c.useState(!1),[O,j]=c.useState([]),F=()=>{i(Nt),T({}),S(null)},G=b=>{if(b){S(b);const{id:$,totalCost:Q,...te}=b;i(te)}else F();g(!0)},J=()=>{g(!1),F()},W=()=>{var $,Q,te,ae,Ue,Me,$e;const b={};return t.date||(b.date="Date is required"),t.pickupStationCode||(b.pickupStationCode="Pickup station is required"),t.areaCode||(b.areaCode="Area code is required"),(!t.quantitySold||t.quantitySold<=0)&&(b.quantitySold="Valid quantity is required"),(!t.itemPrice||t.itemPrice<=0)&&(b.itemPrice="Valid price is required"),($=t.driverName)!=null&&$.trim()||(b.driverName="Driver name is required"),(Q=t.driverId)!=null&&Q.trim()||(b.driverId="Driver ID is required"),(te=t.driverPhone)!=null&&te.trim()||(b.driverPhone="Driver phone is required"),(ae=t.vehicleReg)!=null&&ae.trim()||(b.vehicleReg="Vehicle registration is required"),(Ue=t.dropOffPoint)!=null&&Ue.trim()||(b.dropOffPoint="Drop-off point is required"),(Me=t.estimatedDeliveryTime)!=null&&Me.trim()||(b.estimatedDeliveryTime="Estimated delivery time is required"),($e=t.assignedBy)!=null&&$e.trim()||(b.assignedBy="Data entry person is required"),T(b),Object.keys(b).length===0},X=b=>{if(b.preventDefault(),!W())return;const $=t.quantitySold*t.itemPrice,Q=t.packaging.basins*t.packagingCosts.basinCost+t.packaging.sacks*t.packagingCosts.sackCost+t.packaging.boxes*t.packagingCosts.boxCost,te={...t,totalCost:$,totalPackagingCost:Q,assignedBy:t.assignedBy||(C==null?void 0:C.name)||"Unknown"};if(h)x(r.map(ae=>ae.id===h.id?{...te,id:h.id}:ae)),v("Success","Record updated successfully");else{const ae=`SRC-${Date.now()}`;x([...r,{...te,id:ae}]),v("Success","Record added successfully")}J()},H=b=>{window.confirm("Are you sure you want to delete this record?")&&(x(r.filter($=>$.id!==b.id)),v("Success","Record deleted successfully"))},ce=async()=>{N(!0);try{await new Promise(b=>setTimeout(b,1e3)),v("Success","Data refreshed successfully")}catch{f("Error","Failed to refresh data")}finally{N(!1)}},A=()=>{if(O.length===0){f("Error","No records selected");return}window.confirm(`Are you sure you want to delete ${O.length} records?`)&&(x(r.filter(b=>!O.includes(b.id))),j([]),v("Success",`${O.length} records deleted successfully`))},u=b=>{if(O.length===0){f("Error","No records selected");return}x(r.map($=>O.includes($.id)?{...$,status:b}:$)),j([]),v("Success",`${O.length} records updated to ${b}`)},D=c.useMemo(()=>{let b=r;return d&&(b=b.filter($=>$.driverName.toLowerCase().includes(d.toLowerCase())||$.vehicleReg.toLowerCase().includes(d.toLowerCase())||$.pickupStationCode.toLowerCase().includes(d.toLowerCase())||$.dropOffPoint.toLowerCase().includes(d.toLowerCase()))),B!=="all"&&(b=b.filter($=>$.status===B)),p!=="all"&&(b=b.filter($=>$.areaCode===p)),R.start&&R.end&&(b=b.filter($=>{const Q=new Date($.date),te=new Date(R.start),ae=new Date(R.end);return Q>=te&&Q<=ae})),b.sort(($,Q)=>{let te=$[k],ae=Q[k];return k==="date"&&(te=new Date(te),ae=new Date(ae)),L==="asc"?te>ae?1:-1:te<ae?1:-1}),b},[r,d,B,p,R,k,L]),K=c.useMemo(()=>{const b=r.length,$=r.reduce((P,V)=>P+V.quantitySold,0),Q=r.reduce((P,V)=>P+V.totalCost,0),te=r.reduce((P,V)=>P+V.totalPackagingCost,0),ae=r.reduce((P,V)=>(P[V.status]=(P[V.status]||0)+1,P),{}),Ue=r.reduce((P,V)=>(P[V.areaCode]=(P[V.areaCode]||0)+1,P),{}),Me=new Date;Me.setDate(Me.getDate()-7);const $e=r.filter(P=>new Date(P.date)>=Me);return{totalRecords:b,totalGoodsIn:$,totalCostValue:Q,totalPackagingCost:te,statusBreakdown:ae,areaBreakdown:Ue,recentRecords:$e.length,avgCostPerKg:$>0?Q/$:0,avgPackagingPerRecord:b>0?te/b:0}},[r]),_=[{key:"date",label:"Date",render:b=>ve(b),sortable:!0,width:"100px"},{key:"pickupStationCode",label:"Station",sortable:!0,width:"80px"},{key:"areaCode",label:"Area",sortable:!0,width:"80px"},{key:"driverName",label:"Driver",sortable:!0,width:"120px"},{key:"dropOffPoint",label:"Drop-off",sortable:!0,width:"120px"},{key:"status",label:"Status",render:b=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b==="delivered"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":b==="in-transit"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200"}`,children:b}),sortable:!0,width:"100px"},{key:"packaging",label:"Packaging",render:b=>{const{basins:$,sacks:Q,boxes:te}=b,ae=[];return $>0&&ae.push(`${$}B`),Q>0&&ae.push(`${Q}S`),te>0&&ae.push(`${te}BG`),ae.join(", ")||"None"},width:"100px"},{key:"quantitySold",label:"Qty (kg)",render:b=>`${b} kg`,width:"80px"},{key:"totalCost",label:"Total Cost",render:b=>Y(b),sortable:!0,width:"100px"},{key:"assignedBy",label:"Entered By",sortable:!0,width:"100px"}];return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gradient-emerald",children:"Source Records"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm sm:text-base",children:"Track miraa goods received from pickup points with enhanced analytics"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[D.length," of ",r.length," records"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("button",{onClick:ce,disabled:s,className:"bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx(ue,{className:`h-4 w-4 ${s?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs("button",{onClick:()=>G(),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Record"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsx(w,{variant:"emerald",className:"p-4 sm:p-6 bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-emerald-200 dark:border-emerald-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 shadow-lg",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-gradient-emerald",children:K.totalRecords}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",K.recentRecords," this week"]})]})]})}),e.jsx(w,{variant:"teal",className:"p-4 sm:p-6 bg-gradient-to-br from-teal-50 to-teal-100 dark:from-teal-900/20 dark:to-teal-800/20 border-teal-200 dark:border-teal-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-teal-500 to-teal-600 shadow-lg",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Goods In"}),e.jsxs("p",{className:"text-2xl font-bold text-gradient-teal",children:[K.totalGoodsIn," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg: ",K.avgCostPerKg.toFixed(0),"/kg"]})]})]})}),e.jsx(w,{variant:"purple",className:"p-4 sm:p-6 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 shadow-lg",children:e.jsx(ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Cost"}),e.jsx("p",{className:"text-2xl font-bold text-gradient-purple",children:Y(K.totalCostValue)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Investment"})]})]})}),e.jsx(w,{variant:"red",className:"p-4 sm:p-6 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-red-500 to-red-600 shadow-lg",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Packaging Cost"}),e.jsx("p",{className:"text-2xl font-bold text-gradient-red",children:Y(K.totalPackagingCost)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg: ",Y(K.avgPackagingPerRecord)]})]})]})})]}),e.jsxs(w,{variant:"blue",className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters & Controls"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>M(a==="table"?"cards":"table"),className:"btn-blue flex items-center gap-2",children:[a==="table"?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ye,{className:"h-4 w-4"}),a==="table"?"Card View":"Table View"]}),e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>j([]),className:"btn-purple flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(I,{label:"Search",type:"text",value:d,onChange:b=>E(b),placeholder:"Search drivers, vehicles, stations..."}),e.jsx(U,{label:"Status Filter",value:B,onChange:b=>z(b),options:[{value:"all",label:"All Status"},{value:"loaded",label:"Loaded"},{value:"in-transit",label:"In Transit"},{value:"delivered",label:"Delivered"}]}),e.jsx(U,{label:"Area Filter",value:p,onChange:b=>q(b),options:[{value:"all",label:"All Areas"},...Qe.map(b=>({value:b.code,label:`${b.code} - ${b.name}`}))]}),e.jsx(U,{label:"Sort By",value:k,onChange:b=>m(b),options:[{value:"date",label:"Date"},{value:"driverName",label:"Driver"},{value:"quantitySold",label:"Quantity"},{value:"totalCost",label:"Total Cost"},{value:"status",label:"Status"}]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4 text-gray-500"}),e.jsx(I,{label:"Start Date",type:"date",value:R.start,onChange:b=>l({...R,start:b})}),e.jsx(I,{label:"End Date",type:"date",value:R.end,onChange:b=>l({...R,end:b})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>y(L==="asc"?"desc":"asc"),className:"btn-lime flex items-center gap-2",children:[L==="asc"?e.jsx(pe,{className:"h-4 w-4"}):e.jsx(Be,{className:"h-4 w-4"}),L==="asc"?"Ascending":"Descending"]})})]}),O.length>0&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:[O.length," record(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u("loaded"),className:"btn-emerald text-xs",children:"Mark as Loaded"}),e.jsx("button",{onClick:()=>u("in-transit"),className:"btn-teal text-xs",children:"Mark as In Transit"}),e.jsx("button",{onClick:()=>u("delivered"),className:"btn-lime text-xs",children:"Mark as Delivered"}),e.jsx("button",{onClick:A,className:"btn-red text-xs",children:"Delete Selected"})]})]})})]}),e.jsx(w,{variant:"green",className:"p-4 sm:p-6",children:e.jsx(ze,{data:D,columns:_,onEdit:G,onDelete:H,emptyMessage:"No source records found. Try adjusting your filters or click 'Add Record' to get started."})}),e.jsx(ke,{isOpen:o,onClose:J,title:h?"Edit Source Record":"Add Source Record",size:"xl",type:"success",icon:e.jsx(de,{className:"h-6 w-6"}),children:e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Date",type:"date",value:t.date,onChange:b=>i({...t,date:b}),error:n.date,required:!0}),e.jsx(U,{label:"Area Code",value:t.areaCode,onChange:b=>{var Q;const $=Qe.find(te=>te.code===b);i({...t,areaCode:b,pickupStationCode:((Q=$==null?void 0:$.pickupStations[0])==null?void 0:Q.code)||""})},options:Qe.map(b=>({value:b.code,label:`${b.code} - ${b.name} (${b.region})`})),error:n.areaCode,required:!0}),e.jsx(U,{label:"Pickup Station",value:t.pickupStationCode,onChange:b=>i({...t,pickupStationCode:b}),options:Da.filter(b=>b.areaCode===t.areaCode),error:n.pickupStationCode,required:!0}),e.jsx(U,{label:"Drop-off Point",value:t.dropOffPoint,onChange:b=>i({...t,dropOffPoint:b}),options:t.areaCode?((se=Ma[t.areaCode])==null?void 0:se.map(b=>({value:b,label:b})))||[]:[],error:n.dropOffPoint,required:!0}),e.jsx(I,{label:"Estimated Delivery Time",type:"datetime-local",value:t.estimatedDeliveryTime,onChange:b=>i({...t,estimatedDeliveryTime:b}),error:n.estimatedDeliveryTime,required:!0}),e.jsx(I,{label:"Quantity (kg)",type:"number",value:t.quantitySold,onChange:b=>i({...t,quantitySold:b}),error:n.quantitySold,required:!0,placeholder:"Weight in kilograms"}),e.jsx(I,{label:"Price per kg",type:"number",value:t.itemPrice,onChange:b=>i({...t,itemPrice:b}),error:n.itemPrice,required:!0,placeholder:"Price per kilogram"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Driver & Vehicle Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Driver Name",type:"text",value:t.driverName,onChange:b=>i({...t,driverName:b}),error:n.driverName,required:!0,placeholder:"Driver full name"}),e.jsx(I,{label:"Driver ID",type:"text",value:t.driverId,onChange:b=>i({...t,driverId:b}),error:n.driverId,required:!0,placeholder:"Driver identification"}),e.jsx(I,{label:"Driver Phone",type:"tel",value:t.driverPhone,onChange:b=>i({...t,driverPhone:b}),placeholder:"Driver phone number"}),e.jsx(I,{label:"Vehicle Registration",type:"text",value:t.vehicleReg,onChange:b=>i({...t,vehicleReg:b}),error:n.vehicleReg,required:!0,placeholder:"e.g., KAA 123A"}),e.jsx(I,{label:"Vehicle Make",type:"text",value:t.vehicleMake||"",onChange:b=>i({...t,vehicleMake:b}),placeholder:"e.g., Toyota Hiace",className:"md:col-span-1"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Packaging Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(I,{label:"Basins",type:"number",value:t.packaging.basins,onChange:b=>i({...t,packaging:{...t.packaging,basins:b}}),placeholder:"Number of basins"}),e.jsx(I,{label:"Sacks",type:"number",value:t.packaging.sacks,onChange:b=>i({...t,packaging:{...t.packaging,sacks:b}}),placeholder:"Number of sacks"}),e.jsx(I,{label:"Boxes",type:"number",value:t.packaging.boxes,onChange:b=>i({...t,packaging:{...t.packaging,boxes:b}}),placeholder:"Number of boxes"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(I,{label:"Basin Cost (each)",type:"number",value:t.packagingCosts.basinCost,onChange:b=>i({...t,packagingCosts:{...t.packagingCosts,basinCost:b}}),placeholder:"Cost per basin"}),e.jsx(I,{label:"Sack Cost (each)",type:"number",value:t.packagingCosts.sackCost,onChange:b=>i({...t,packagingCosts:{...t.packagingCosts,sackCost:b}}),placeholder:"Cost per sack"}),e.jsx(I,{label:"Box Cost (each)",type:"number",value:t.packagingCosts.boxCost,onChange:b=>i({...t,packagingCosts:{...t.packagingCosts,boxCost:b}}),placeholder:"Cost per box"})]})]}),e.jsx("div",{children:e.jsx(I,{label:"Entered By",type:"text",value:t.assignedBy||(C==null?void 0:C.name)||"",onChange:b=>i({...t,assignedBy:b}),error:n.assignedBy,required:!0,placeholder:"Person entering this data"})}),t.quantitySold>0&&t.itemPrice>0||t.packaging.basins>0||t.packaging.sacks>0||t.packaging.boxes>0?e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg space-y-2",children:[t.quantitySold>0&&t.itemPrice>0&&e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("strong",{children:"Goods Cost:"})," ",Y(t.quantitySold*t.itemPrice)]}),e.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("strong",{children:"Packaging Cost:"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[t.packaging.basins>0&&e.jsxs("div",{children:["Basins: ",t.packaging.basins," Ã— ",Y(t.packagingCosts.basinCost)," = ",Y(t.packaging.basins*t.packagingCosts.basinCost)]}),t.packaging.sacks>0&&e.jsxs("div",{children:["Sacks: ",t.packaging.sacks," Ã— ",Y(t.packagingCosts.sackCost)," = ",Y(t.packaging.sacks*t.packagingCosts.sackCost)]}),t.packaging.boxes>0&&e.jsxs("div",{children:["Boxes: ",t.packaging.boxes," Ã— ",Y(t.packagingCosts.boxCost)," = ",Y(t.packaging.boxes*t.packagingCosts.boxCost)]}),e.jsxs("div",{className:"font-bold border-t pt-1 mt-1",children:["Total Packaging: ",Y(t.packaging.basins*t.packagingCosts.basinCost+t.packaging.sacks*t.packagingCosts.sackCost+t.packaging.boxes*t.packagingCosts.boxCost)]})]})]}),e.jsxs("div",{className:"text-sm font-bold text-green-800 dark:text-green-200 border-t pt-2",children:[e.jsx("strong",{children:"Grand Total:"})," ",Y(t.quantitySold*t.itemPrice+t.packaging.basins*t.packagingCosts.basinCost+t.packaging.sacks*t.packagingCosts.sackCost+t.packaging.boxes*t.packagingCosts.boxCost)]})]}):null,e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:J,className:"btn-blue",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-emerald",children:h?"Update Record":"Add Record"})]})]})})]})},Ia=()=>{const{user:r}=le(),[x,C]=c.useState("all"),[v,f]=c.useState(!1),[o,g]=c.useState({tripId:"",date:new Date().toISOString().split("T")[0],driver:"",driverPhone:"",vehicleReg:"",vehicleMake:"",pickupPoint:"",destination:"",goodsQuantity:0,goodsValue:0,packagingDetails:"",status:"loading",estimatedArrival:""}),[h,S]=c.useState([{id:"1",tripId:"TRIP-001",date:"2024-01-15",driver:"John Kimani",driverPhone:"+254 712 345678",vehicleReg:"KAA 123A",vehicleMake:"Toyota Hiace",pickupPoint:"Point A",destination:"Nairobi CBD",goodsQuantity:50,goodsValue:25e3,packagingDetails:"2 Basins, 1 Sack",status:"in-transit",estimatedArrival:"2024-01-15 15:30"},{id:"2",tripId:"TRIP-002",date:"2024-01-15",driver:"Peter Wanjiku",driverPhone:"+254 723 456789",vehicleReg:"KBC 567B",vehicleMake:"Mitsubishi Canter",pickupPoint:"Point B",destination:"Mombasa",goodsQuantity:75,goodsValue:37500,packagingDetails:"3 Basins, 2 Boxes",status:"loading"},{id:"3",tripId:"TRIP-003",date:"2024-01-14",driver:"Mary Njoki",driverPhone:"+254 734 567890",vehicleReg:"KAB 789C",vehicleMake:"Isuzu NKR",pickupPoint:"Point C",destination:"Garissa",goodsQuantity:30,goodsValue:15e3,packagingDetails:"1 Sack, 1 Box",status:"dropped-off"}]),t=x==="all"?h:h.filter(p=>p.status===x),i=(p,q)=>{S(R=>R.map(l=>l.id===p?{...l,status:q}:l))},n=()=>{g({tripId:`TRIP-${Date.now()}`,date:new Date().toISOString().split("T")[0],driver:"",driverPhone:"",vehicleReg:"",vehicleMake:"",pickupPoint:"",destination:"",goodsQuantity:0,goodsValue:0,packagingDetails:"",status:"loading",estimatedArrival:""}),f(!0)},T=()=>{f(!1)},d=p=>{p.preventDefault();const q={id:Date.now().toString(),...o};S([...h,q]),T()},E=p=>{switch(p){case"loading":return e.jsx(Se,{className:"h-4 w-4 text-yellow-500"});case"in-transit":return e.jsx(fe,{className:"h-4 w-4 text-blue-500"});case"dropped-off":return e.jsx(ee,{className:"h-4 w-4 text-green-500"});default:return e.jsx(Ne,{className:"h-4 w-4 text-gray-500"})}},B=p=>{switch(p){case"loading":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200";case"in-transit":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200";case"dropped-off":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}},z=p=>{switch(p){case"loading":return"Loading";case"in-transit":return"In Transit";case"dropped-off":return"Delivered";default:return"Unknown"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Transport Log"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track vehicles, drivers, and goods in transit"})]}),(r==null?void 0:r.role)==="user"&&e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"New Trip"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["all","loading","in-transit","dropped-off"].map(p=>e.jsx("button",{onClick:()=>C(p),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${x===p?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:p.split("-").map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" ")},p))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(p=>e.jsxs(w,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[E(p.status),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${B(p.status)}`,children:z(p.status)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:p.tripId}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:ve(p.date)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Driver"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:p.driver}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.driverPhone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Vehicle"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:p.vehicleReg}),p.vehicleMake&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.vehicleMake})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Route"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:p.pickupPoint}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(be,{className:"h-3 w-3"}),e.jsx("span",{children:p.destination})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Goods"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[p.goodsQuantity," kg"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Y(p.goodsValue)})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:"Packaging"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:p.packagingDetails}),p.estimatedArrival&&p.status==="in-transit"&&e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["ETA: ",p.estimatedArrival]})]})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.status==="loading"&&e.jsx("button",{onClick:()=>i(p.id,"in-transit"),className:"flex-1 text-xs px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Start Trip"}),p.status==="in-transit"&&e.jsx("button",{onClick:()=>i(p.id,"dropped-off"),className:"flex-1 text-xs px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"Mark Delivered"}),e.jsx("button",{className:"text-xs px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Edit"})]})]},p.id))}),t.length===0&&e.jsxs(w,{className:"p-12 text-center",children:[e.jsx(fe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No transport entries found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No entries match the current filter criteria."})]}),e.jsx(ke,{isOpen:v,onClose:T,title:"Add New Trip",size:"lg",children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Trip ID",type:"text",value:o.tripId,onChange:p=>g({...o,tripId:p}),required:!0}),e.jsx(I,{label:"Date",type:"date",value:o.date,onChange:p=>g({...o,date:p}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Driver Name",type:"text",value:o.driver,onChange:p=>g({...o,driver:p}),required:!0}),e.jsx(I,{label:"Driver Phone",type:"tel",value:o.driverPhone,onChange:p=>g({...o,driverPhone:p}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Vehicle Registration",type:"text",value:o.vehicleReg,onChange:p=>g({...o,vehicleReg:p}),required:!0}),e.jsx(I,{label:"Vehicle Make",type:"text",value:o.vehicleMake||"",onChange:p=>g({...o,vehicleMake:p})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Pickup Point",value:o.pickupPoint,onChange:p=>g({...o,pickupPoint:p}),options:[{value:"Point A",label:"Point A"},{value:"Point B",label:"Point B"},{value:"Point C",label:"Point C"},{value:"Point D",label:"Point D"}],required:!0}),e.jsx(U,{label:"Destination",value:o.destination,onChange:p=>g({...o,destination:p}),options:[{value:"Nairobi CBD",label:"Nairobi CBD"},{value:"Mombasa",label:"Mombasa"},{value:"Garissa",label:"Garissa"},{value:"Meru",label:"Meru"}],required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Goods Quantity (kg)",type:"number",value:o.goodsQuantity,onChange:p=>g({...o,goodsQuantity:p}),required:!0}),e.jsx(I,{label:"Goods Value",type:"number",value:o.goodsValue,onChange:p=>g({...o,goodsValue:p}),required:!0})]}),e.jsx(I,{label:"Packaging Details",type:"text",value:o.packagingDetails,onChange:p=>g({...o,packagingDetails:p}),placeholder:"e.g., 2 Basins, 1 Sack",required:!0}),e.jsx(I,{label:"Estimated Arrival",type:"datetime-local",value:o.estimatedArrival||"",onChange:p=>g({...o,estimatedArrival:p})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:"Add Trip"})]})]})})]})},Pa=({monthlyData:r})=>e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Profit Trends"}),e.jsx(ye,{className:"h-4 w-4 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:r.map(x=>{const C=Math.max(...r.map(f=>f.profit)),v=x.profit/C*100;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x.month}),e.jsxs("div",{className:"flex items-center space-x-2",children:[x.trend==="up"&&e.jsx(pe,{className:"h-3 w-3 text-green-500"}),x.trend==="down"&&e.jsx(Be,{className:"h-3 w-3 text-red-500"}),x.trend==="stable"&&e.jsx(ge,{className:"h-3 w-3 text-gray-500"}),e.jsxs("span",{className:`text-sm font-medium ${x.profit>5e4?"text-green-600":x.profit>45e3?"text-yellow-600":"text-red-600"}`,children:[(x.profit/1e3).toFixed(0),"K"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${x.trend==="up"?"bg-gradient-to-r from-green-400 to-green-500":x.trend==="down"?"bg-gradient-to-r from-red-400 to-red-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,style:{width:`${v}%`}})})]},x.month)})})]}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Performance Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Best Month"}),e.jsxs("span",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:[(Math.max(...r.map(x=>x.profit))/1e3).toFixed(0),"K"]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Average Profit"}),e.jsxs("span",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:[(r.reduce((x,C)=>x+C.profit,0)/r.length/1e3).toFixed(0),"K"]})]})}),e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800 dark:text-purple-200",children:"Trend Status"}),e.jsx("span",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:r.slice(-2).every(x=>x.trend==="up")?"Growing â†—":"Mixed ðŸ“Š"})]})})]})]})]}),et=(r,x)=>r===0?0:(x-r)/x*100,La=()=>{const{sourceRecords:r,user:x,destinationRecords:C}=le(),{showSuccessNotification:v,showErrorNotification:f}=De(),[o,g]=c.useState("month"),[h,S]=c.useState("overview"),[t,i]=c.useState({start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[n,T]=c.useState(!0),[d,E]=c.useState(!1),[B,z]=c.useState(!1),[p,q]=c.useState(!1),R=c.useMemo(()=>C||[{id:"1",trackingNo:"TRIP-001",destination:"Nairobi",buyer:"John Doe",quantitySold:50,itemPrice:800,totalRevenue:4e4,date:"2024-01-15"},{id:"2",trackingNo:"TRIP-002",destination:"Mombasa",buyer:"Jane Smith",quantitySold:75,itemPrice:700,totalRevenue:52500,date:"2024-01-14"},{id:"3",trackingNo:"TRIP-003",destination:"Garissa",buyer:"Bob Johnson",quantitySold:30,itemPrice:650,totalRevenue:19500,date:"2024-01-13"},{id:"4",trackingNo:"TRIP-004",destination:"Meru",buyer:"Alice Brown",quantitySold:40,itemPrice:750,totalRevenue:3e4,date:"2024-01-12"},{id:"5",trackingNo:"TRIP-005",destination:"Nairobi",buyer:"Charlie Wilson",quantitySold:60,itemPrice:850,totalRevenue:51e3,date:"2024-01-11"}],[C]),l=c.useMemo(()=>{const j=r.reduce((H,ce)=>H+ce.totalCost,0),F=R.reduce((H,ce)=>H+ce.totalRevenue,0),G=F-j,J=r.length,W=r.length>0?r.filter(H=>H.areaCode&&H.totalCost>0).length/r.length*100:0,X=W>=95?"excellent":W>=85?"good":W>=70?"fair":"poor";return{totalRevenue:F,totalCost:j,totalProfit:G,profitMargin:et(j,F),avgProfitPerTrip:J>0?G/J:0,totalTrips:J,avgRevenuePerTrip:J>0?F/J:0,avgCostPerTrip:J>0?j/J:0,efficiency:j>0?F/j*100:0,growthRate:15.2,lastUpdated:new Date().toISOString(),dataQuality:X,realTimeSync:n}},[r,R,n]),k=c.useMemo(()=>{const j=[];return["AC001","AC002","AC003","AC004","AC005"].forEach(F=>{const G=r.filter($=>$.areaCode===F),J=new Date().toISOString();if(G.length===0){j.push({pickupPoint:`Area ${F}`,areaCode:F,totalRecords:0,totalCost:0,totalRevenue:0,profit:0,margin:0,avgCostPerKg:0,avgRevenuePerKg:0,efficiency:0,growth:0,lastUpdated:J,status:"inactive",trends:{profit:"stable",revenue:"stable",cost:"stable"},kpis:{roi:0,costEfficiency:0,revenueGrowth:0,marketShare:0}});return}const W=G.reduce(($,Q)=>$+Q.totalCost,0),X=G.length,H=G.reduce(($,Q)=>$+Q.quantitySold,0),A=R.filter($=>G.some(Q=>Q.tripCode===$.trackingNo)).reduce(($,Q)=>$+Q.totalRevenue,0),u=W>0?(A-W)/X:0,D=W>0?(A-W)/W*100:0,K=et(W,A),_=K>=30?"active":K>=20?"warning":K>0?"critical":"inactive",se={profit:u>1e3?"up":u>500?"stable":"down",revenue:A>W*1.3?"up":A>W*1.1?"stable":"down",cost:(W>0,"stable")},b=15+Math.random()*30;j.push({pickupPoint:`Area ${F}`,areaCode:F,totalRecords:X,totalCost:W,totalRevenue:A,profit:A-W,margin:K,avgCostPerKg:H>0?W/H:0,avgRevenuePerKg:H>0?A/H:0,efficiency:u,growth:b,lastUpdated:J,status:_,trends:se,kpis:{roi:D,costEfficiency:W>0?A/W*100:0,revenueGrowth:b,marketShare:X/r.length*100}})}),j.sort((F,G)=>G.profit-F.profit)},[r,R]),m=[{month:"Aug",profit:45e3,cost:18e3,revenue:63e3,trend:"up"},{month:"Sep",profit:52e3,cost:22e3,revenue:74e3,trend:"up"},{month:"Oct",profit:48e3,cost:2e4,revenue:68e3,trend:"down"},{month:"Nov",profit:55e3,cost:21e3,revenue:76e3,trend:"up"},{month:"Dec",profit:62e3,cost:23e3,revenue:85e3,trend:"up"},{month:"Jan",profit:58e3,cost:25e3,revenue:83e3,trend:"down"}],L=async()=>{z(!0);try{await new Promise(j=>setTimeout(j,1e3)),v("Success","Data refreshed successfully")}catch{f("Error","Failed to refresh data")}finally{z(!1)}},y=async j=>{E(!0);try{await new Promise(F=>setTimeout(F,2e3)),v("Success",`${j.toUpperCase()} report exported successfully`)}catch{f("Error",`Failed to export ${j.toUpperCase()} report`)}finally{E(!1)}},a=(j,F)=>{i({start:j,end:F})};c.useEffect(()=>{if(p){const j=setInterval(()=>{L()},3e4);return()=>clearInterval(j)}},[p]);const M=()=>{T(!n),v("Success",`Real-time sync ${n?"disabled":"enabled"}`)},s=k[0],N=k[k.length-1],O=[...N&&N.margin<20?[`Low profit margin at ${N.pickupPoint} (${N.margin.toFixed(1)}%)`]:[],...k.filter(j=>j.totalRecords<3).map(j=>`Low activity at ${j.pickupPoint} (${j.totalRecords} trips)`),...l.profitMargin<30?["Overall profit margin below target (30%+)"]:[],...m[m.length-1].trend==="down"?["Recent downward trend in profits"]:[]];return(x==null?void 0:x.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs(w,{className:"p-8 text-center",children:[e.jsx(Te,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Profit reports are only available to administrators."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-purple",children:"Performance Reports"}),e.jsxs("div",{className:"flex items-center gap-2",children:[n?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(rt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Live"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(ft,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Offline"})]}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.dataQuality==="excellent"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":l.dataQuality==="good"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":l.dataQuality==="fair"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200"}`,children:[l.dataQuality.toUpperCase()," DATA"]})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive analysis of miraa transport profitability with real-time insights"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Last updated: ",ve(l.lastUpdated)]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4 text-gray-500"}),e.jsx("input",{type:"date",value:t.start,onChange:j=>a(j.target.value,t.end),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"date",value:t.end,onChange:j=>a(t.start,j.target.value),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700"})]}),e.jsxs("select",{value:o,onChange:j=>g(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm focus-ring",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs("select",{value:h,onChange:j=>S(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm focus-ring",children:[e.jsx("option",{value:"overview",children:"Overview"}),e.jsx("option",{value:"pickup-analysis",children:"Pickup Analysis"}),e.jsx("option",{value:"monthly-trends",children:"Monthly Trends"}),e.jsx("option",{value:"driver-performance",children:"Driver Performance"}),e.jsx("option",{value:"vehicle-performance",children:"Vehicle Performance"}),e.jsx("option",{value:"destination-analysis",children:"Destination Analysis"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:L,disabled:B,className:"btn-glass flex items-center gap-2",children:[e.jsx(ue,{className:`h-4 w-4 ${B?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>E(!d),className:"btn-gradient-primary flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]}),d&&e.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10",children:e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:()=>y("csv"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Export CSV"}),e.jsx("button",{onClick:()=>y("excel"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Export Excel"}),e.jsx("button",{onClick:()=>y("pdf"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Export PDF"})]})})]}),e.jsxs("button",{onClick:M,className:`btn-glass flex items-center gap-2 ${n?"text-green-600":"text-gray-500"}`,children:[n?e.jsx(rt,{className:"h-4 w-4"}):e.jsx(ft,{className:"h-4 w-4"}),"Sync"]}),e.jsxs("button",{onClick:()=>q(!p),className:`btn-glass flex items-center gap-2 ${p?"text-blue-600":"text-gray-500"}`,children:[e.jsx(Se,{className:"h-4 w-4"}),"Auto"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-primary flex-shrink-0",children:e.jsx(Ke,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-bold text-gradient-primary truncate",children:Y(l.totalRevenue)})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),"+",l.growthRate.toFixed(1),"%"]}),e.jsxs("div",{className:"text-gray-500",children:[l.totalTrips," trips"]})]})]}),e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-warm flex-shrink-0",children:e.jsx(de,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Costs"}),e.jsx("p",{className:"text-lg font-bold text-gradient-warm truncate",children:Y(l.totalCost)})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-orange-600",children:[e.jsx(Be,{className:"h-3 w-3 mr-1"}),"-5.2%"]}),e.jsxs("div",{className:"text-gray-500",children:["Avg: ",Y(l.avgCostPerTrip)]})]})]}),e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-secondary flex-shrink-0",children:e.jsx(Te,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Net Profit"}),e.jsx("p",{className:"text-lg font-bold text-gradient-secondary truncate",children:Y(l.totalProfit)})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(ge,{className:"h-3 w-3 mr-1"}),l.profitMargin.toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-500",children:"Margin"})]})]}),e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-accent flex-shrink-0",children:e.jsx(ye,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Efficiency"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-accent truncate",children:[l.efficiency.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-purple-600",children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),"ROI"]}),e.jsxs("div",{className:"text-gray-500",children:[l.dataQuality," data"]})]})]})]}),h==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[e.jsxs(w,{className:"lg:col-span-1 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(pe,{className:"h-4 w-4 text-green-600 mr-2"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:"Best Performer"})]}),e.jsx("p",{className:"font-semibold text-green-900 dark:text-green-100",children:s.pickupPoint}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Profit: ",Y(s.profit)," (",s.margin.toFixed(1),"%)"]})]}),N&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Be,{className:"h-4 w-4 text-red-600 mr-2"}),e.jsx("span",{className:"font-medium text-red-800 dark:text-red-200",children:"Needs Improvement"})]}),e.jsx("p",{className:"font-semibold text-red-900 dark:text-red-100",children:N.pickupPoint}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Profit: ",Y(N.profit)," (",N.margin.toFixed(1),"%)"]})]})]})]}),e.jsxs(w,{className:"lg:col-span-2 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Issues & Recommendations"}),e.jsx("div",{className:"space-y-3",children:O.length>0?O.map((j,F)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsx(re,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Issue"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:j})]})]},F)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Te,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:"Excellent Performance!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No critical issues identified"})]})})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Destination Performance"}),e.jsx("div",{className:"space-y-3",children:R.map(j=>{const F=j.quantitySold*450,G=j.totalRevenue-F,J=et(F,j.totalRevenue);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover-lift",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(be,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.destination}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.buyer})]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Quantity"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[j.quantitySold,"kg"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Revenue"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:Y(j.totalRevenue)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Profit"}),e.jsxs("p",{className:`font-medium ${G>0?"text-green-600":"text-red-600"}`,children:[Y(G)," (",J.toFixed(1),"%)"]})]})]})]},j.id)})})]})]}),h==="pickup-analysis"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Performance Analysis"}),e.jsx(oe,{className:"h-4 w-4 text-gray-400 cursor-pointer"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[e.jsx("th",{className:"text-left py-2 text-gray-500 dark:text-gray-400",children:"Point"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Trips"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Revenue"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Profit"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Margin"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Growth"})]})}),e.jsx("tbody",{children:k.map(j=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[e.jsx("td",{className:"py-2 font-medium text-gray-900 dark:text-gray-100",children:j.pickupPoint}),e.jsx("td",{className:"py-2 text-right text-gray-900 dark:text-gray-100",children:j.totalRecords}),e.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-gray-100",children:[(j.totalRevenue/1e3).toFixed(1),"K"]}),e.jsxs("td",{className:`py-2 text-right font-medium ${j.profit>0?"text-green-600":j.profit===0?"text-gray-600":"text-red-600"}`,children:[j.profit>0?"+":"",(j.profit/1e3).toFixed(1),"K"]}),e.jsx("td",{className:"py-2 text-right",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.margin>=30?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":j.margin>=20?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":j.margin>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-gray-100 text-gray-600 dark:bg-gray-900/20 dark:text-gray-400"}`,children:[j.margin.toFixed(1),"%"]})}),e.jsx("td",{className:"py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[j.growth>0?e.jsx(pe,{className:"h-3 w-3 text-green-500"}):e.jsx(Be,{className:"h-3 w-3 text-red-500"}),e.jsxs("span",{className:j.growth>0?"text-green-600":"text-red-600",children:["+",j.growth.toFixed(1),"%"]})]})})]},j.pickupPoint))})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Efficiency Metrics"}),e.jsx("div",{className:"space-y-3",children:k.filter(j=>j.totalRecords>0).map(j=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.pickupPoint}),e.jsxs("span",{className:"text-xs text-gray-500",children:[j.totalRecords," trips"]})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Cost/kg:"}),e.jsx("span",{className:"font-medium",children:Y(j.avgCostPerKg)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Revenue/kg:"}),e.jsx("span",{className:"font-medium",children:Y(j.avgRevenuePerKg)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Profit/trip:"}),e.jsx("span",{className:"font-medium text-green-600",children:Y(j.efficiency)})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1.5 mt-2",children:e.jsx("div",{className:"bg-gradient-to-r from-red-400 via-yellow-400 to-green-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,j.margin))}%`}})})]})]},j.pickupPoint))})]})]})}),h==="monthly-trends"&&e.jsx(Pa,{monthlyData:m})]})},kt={AC001:[{location:"Embu Town Market",type:"market"},{location:"Embu Wholesale Center",type:"wholesale"},{location:"Embu Retail Hub",type:"retail"},{location:"Embu Export Center",type:"export"},{location:"Embu Warehouse",type:"warehouse"}],AC002:[{location:"Mecca Central Market",type:"market"},{location:"Mecca Wholesale",type:"wholesale"},{location:"Mecca Retail",type:"retail"},{location:"Mecca Export",type:"export"},{location:"Mecca Warehouse",type:"warehouse"}],AC003:[{location:"Ena CBD Market",type:"market"},{location:"Ena Wholesale",type:"wholesale"},{location:"Ena Retail",type:"retail"},{location:"Ena Export",type:"export"},{location:"Ena Warehouse",type:"warehouse"}],AC004:[{location:"Ugweri Central Market",type:"market"},{location:"Ugweri Wholesale",type:"wholesale"},{location:"Ugweri Retail",type:"retail"},{location:"Ugweri Export",type:"export"},{location:"Ugweri Warehouse",type:"warehouse"}]},tt=[{code:"AC001",name:"Embu Area",region:"Embu County"},{code:"AC002",name:"Mecca Area",region:"Mecca Region"},{code:"AC003",name:"Ena Area",region:"Ena Region"},{code:"AC004",name:"Ugweri Area",region:"Ugweri Region"}],wt={date:new Date().toISOString().split("T")[0],transportCode:"",sourceAreaCode:"",sourceStationCode:"",destinationAreaCode:"",destinationLocation:"",destinationType:"market",buyerName:"",buyerId:"",buyerPhone:"",buyerType:"individual",quantityExpected:0,quantityReceived:0,condition:"good",itemPrice:0,deliveryTime:"",deliveryStatus:"pending",driverName:"",driverId:"",vehicleReg:"",verifiedBy:"",verificationDate:"",hasDiscrepancy:!1,discrepancyResolved:!1,lastModifiedBy:"",lastModifiedDate:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Ba=()=>{var ce,A;const{user:r}=le(),{showSuccessNotification:x,showErrorNotification:C}=De(),[v,f]=c.useState([]),[o,g]=c.useState(!1),[h,S]=c.useState(!1),[t,i]=c.useState(null),[n,T]=c.useState(null),[d,E]=c.useState(wt),[B,z]=c.useState({}),[p,q]=c.useState({areaCode:"all",location:"all",status:"all",hasDiscrepancy:"all",dateRange:{start:"",end:""}}),[R,l]=c.useState(!1),[k,m]=c.useState("table"),L=()=>{E(wt),z({}),i(null)},y=u=>{if(u){i(u);const{id:D,totalRevenue:K,quantityDifference:_,...se}=u;E(se)}else L();g(!0)},a=()=>{g(!1),L()},M=u=>{T(u),S(!0)},s=()=>{const u={};return d.date||(u.date="Date is required"),d.transportCode||(u.transportCode="Transport code is required"),d.sourceAreaCode||(u.sourceAreaCode="Source area code is required"),d.destinationAreaCode||(u.destinationAreaCode="Destination area code is required"),d.destinationLocation||(u.destinationLocation="Destination location is required"),d.buyerName||(u.buyerName="Buyer name is required"),d.buyerPhone||(u.buyerPhone="Buyer phone is required"),(!d.quantityExpected||d.quantityExpected<=0)&&(u.quantityExpected="Valid expected quantity is required"),(!d.quantityReceived||d.quantityReceived<=0)&&(u.quantityReceived="Valid received quantity is required"),(!d.itemPrice||d.itemPrice<=0)&&(u.itemPrice="Valid price is required"),d.driverName||(u.driverName="Driver name is required"),d.deliveryTime||(u.deliveryTime="Delivery time is required"),z(u),Object.keys(u).length===0},N=u=>{if(u.preventDefault(),!s())return;const D=d.quantityReceived-d.quantityExpected,K=d.quantityReceived*d.itemPrice,_=Math.abs(D)>.1,se={...d,quantityDifference:D,totalRevenue:K,hasDiscrepancy:_,discrepancyType:_?(D>0,"quantity"):void 0,discrepancyDescription:_?`Quantity difference: ${D>0?"+":""}${D.toFixed(2)}kg`:void 0,verifiedBy:(r==null?void 0:r.name)||"Unknown",verificationDate:new Date().toISOString(),lastModifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedDate:new Date().toISOString()};if(t)f(v.map(b=>b.id===t.id?{...se,id:t.id}:b));else{const b=`DST-${Date.now()}`;f([...v,{...se,id:b}])}a()},O=u=>{window.confirm("Are you sure you want to delete this destination record?")&&(f(v.filter(D=>D.id!==u.id)),x("Success","Destination record deleted successfully"))},j=async()=>{l(!0);try{await new Promise(u=>setTimeout(u,1e3)),x("Success","Data refreshed successfully")}catch{C("Error","Failed to refresh data")}finally{l(!1)}},F=async u=>{try{await new Promise(D=>setTimeout(D,2e3)),x("Success",`${u.toUpperCase()} export completed`)}catch{C("Error",`Failed to export ${u.toUpperCase()}`)}},G=u=>{const D={...u,deliveryStatus:"delivered",verificationDate:new Date().toISOString(),verifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedDate:new Date().toISOString()};f(v.map(K=>K.id===u.id?D:K)),S(!1)},J=u=>{const D={...u,discrepancyResolved:!0,lastModifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedDate:new Date().toISOString()};f(v.map(K=>K.id===u.id?D:K))},W=c.useMemo(()=>v.filter(u=>!(p.areaCode!=="all"&&u.destinationAreaCode!==p.areaCode||p.location!=="all"&&u.destinationLocation!==p.location||p.status!=="all"&&u.deliveryStatus!==p.status||p.hasDiscrepancy!=="all"&&(p.hasDiscrepancy==="yes"&&!u.hasDiscrepancy||p.hasDiscrepancy==="no"&&u.hasDiscrepancy)||p.dateRange.start&&u.date<p.dateRange.start||p.dateRange.end&&u.date>p.dateRange.end)),[v,p]),X=[{key:"date",label:"Date",render:u=>ve(u),sortable:!0},{key:"transportCode",label:"Transport Code",sortable:!0},{key:"sourceAreaCode",label:"Source Area",sortable:!0},{key:"destinationLocation",label:"Destination",render:(u,D)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:u}),e.jsx("p",{className:"text-xs text-gray-500",children:D.destinationAreaCode})]}),sortable:!0},{key:"buyerName",label:"Buyer",render:(u,D)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:u}),e.jsx("p",{className:"text-xs text-gray-500",children:D.buyerPhone})]}),sortable:!0},{key:"quantityReceived",label:"Quantity",render:(u,D)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[u,"kg"]}),e.jsxs("p",{className:`text-xs ${D.quantityDifference>0?"text-green-600":D.quantityDifference<0?"text-red-600":"text-gray-500"}`,children:[D.quantityDifference>0?"+":"",D.quantityDifference.toFixed(1),"kg"]})]}),sortable:!0},{key:"deliveryStatus",label:"Status",render:(u,D)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u==="delivered"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":u==="in-transit"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":u==="failed"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":u==="disputed"?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:u}),D.hasDiscrepancy&&!D.discrepancyResolved&&e.jsx(re,{className:"h-4 w-4 text-red-500"})]}),sortable:!0},{key:"totalRevenue",label:"Revenue",render:u=>Y(u),sortable:!0},{key:"actions",label:"Actions",render:(u,D)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[D.deliveryStatus!=="delivered"&&e.jsx("button",{onClick:()=>M(D),className:"p-1 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20 rounded",title:"Verify Delivery",children:e.jsx(ee,{className:"h-4 w-4"})}),D.hasDiscrepancy&&!D.discrepancyResolved&&e.jsx("button",{onClick:()=>J(D),className:"p-1 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded",title:"Resolve Discrepancy",children:e.jsx(re,{className:"h-4 w-4"})})]})}],H=c.useMemo(()=>{const u=W.length,D=W.reduce(($,Q)=>$+Q.quantityReceived,0),K=W.reduce(($,Q)=>$+Q.totalRevenue,0),_=W.filter($=>$.hasDiscrepancy&&!$.discrepancyResolved).length,se=W.filter($=>$.deliveryStatus==="delivered").length,b=u>0?se/u*100:0;return{totalDeliveries:u,totalQuantity:D,totalRevenue:K,deliveriesWithDiscrepancy:_,deliveryRate:b}},[W]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-purple",children:"Destination Records"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track deliveries and verify goods received at destination points with enhanced analytics"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[W.length," of ",v.length," records"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:j,disabled:R,className:"btn-teal flex items-center gap-2",children:[e.jsx(ue,{className:`h-4 w-4 ${R?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:()=>F("csv"),className:"btn-blue flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]}),e.jsxs("button",{onClick:()=>y(),className:"btn-emerald flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Record"})]})]})]}),e.jsxs(w,{variant:"blue",className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters & Controls"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>m(k==="table"?"cards":"table"),className:"btn-purple flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),k==="table"?"Card View":"Table View"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(U,{label:"Area Code",value:p.areaCode,onChange:u=>q({...p,areaCode:u}),options:[{value:"all",label:"All Areas"},...tt.map(u=>({value:u.code,label:`${u.code} - ${u.name}`}))]}),e.jsx(U,{label:"Location",value:p.location,onChange:u=>q({...p,location:u}),options:[{value:"all",label:"All Locations"},...p.areaCode!=="all"?((ce=kt[p.areaCode])==null?void 0:ce.map(u=>({value:u.location,label:u.location})))||[]:[]]}),e.jsx(U,{label:"Status",value:p.status,onChange:u=>q({...p,status:u}),options:[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"in-transit",label:"In Transit"},{value:"delivered",label:"Delivered"},{value:"failed",label:"Failed"},{value:"disputed",label:"Disputed"}]}),e.jsx(U,{label:"Discrepancy",value:p.hasDiscrepancy,onChange:u=>q({...p,hasDiscrepancy:u}),options:[{value:"all",label:"All Records"},{value:"yes",label:"With Discrepancy"},{value:"no",label:"No Discrepancy"}]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{label:"Start Date",type:"date",value:p.dateRange.start,onChange:u=>q({...p,dateRange:{...p.dateRange,start:u}})}),e.jsx(I,{label:"End Date",type:"date",value:p.dateRange.end,onChange:u=>q({...p,dateRange:{...p.dateRange,end:u}})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(w,{variant:"blue",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-blue",children:e.jsx(de,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Deliveries"}),e.jsx("p",{className:"text-lg font-bold text-gradient-blue",children:H.totalDeliveries})]})]})}),e.jsx(w,{variant:"emerald",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-emerald",children:e.jsx(de,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Quantity"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-emerald",children:[(H.totalQuantity/1e3).toFixed(1),"K kg"]})]})]})}),e.jsx(w,{variant:"purple",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-purple",children:e.jsx(ye,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-purple",children:[(H.totalRevenue/1e3).toFixed(0),"K"]})]})]})}),e.jsx(w,{variant:"red",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-red",children:e.jsx(re,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Discrepancies"}),e.jsx("p",{className:"text-lg font-bold text-gradient-red",children:H.deliveriesWithDiscrepancy})]})]})}),e.jsx(w,{variant:"lime",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-lime",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Delivery Rate"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-lime",children:[H.deliveryRate.toFixed(1),"%"]})]})]})})]}),e.jsx(w,{variant:"green",className:"p-6",children:e.jsx(ze,{data:W,columns:X,onEdit:y,onDelete:O,emptyMessage:"No destination records found. Try adjusting your filters or click 'Add Record' to get started."})}),e.jsx(ke,{isOpen:o,onClose:a,title:t?"Edit Destination Record":"Add Destination Record",size:"xl",type:"info",icon:e.jsx(be,{className:"h-6 w-6"}),children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Date",type:"date",value:d.date,onChange:u=>E({...d,date:u}),error:B.date,required:!0}),e.jsx(I,{label:"Transport Code",type:"text",value:d.transportCode,onChange:u=>E({...d,transportCode:u}),error:B.transportCode,required:!0,placeholder:"e.g., TRIP-001"}),e.jsx(U,{label:"Source Area Code",value:d.sourceAreaCode,onChange:u=>E({...d,sourceAreaCode:u}),options:tt.map(u=>({value:u.code,label:`${u.code} - ${u.name}`})),error:B.sourceAreaCode,required:!0}),e.jsx(U,{label:"Destination Area Code",value:d.destinationAreaCode,onChange:u=>E({...d,destinationAreaCode:u}),options:tt.map(u=>({value:u.code,label:`${u.code} - ${u.name}`})),error:B.destinationAreaCode,required:!0}),e.jsx(U,{label:"Destination Location",value:d.destinationLocation,onChange:u=>E({...d,destinationLocation:u}),options:d.destinationAreaCode?((A=kt[d.destinationAreaCode])==null?void 0:A.map(u=>({value:u.location,label:u.location})))||[]:[],error:B.destinationLocation,required:!0}),e.jsx(U,{label:"Destination Type",value:d.destinationType,onChange:u=>E({...d,destinationType:u}),options:[{value:"market",label:"Market"},{value:"warehouse",label:"Warehouse"},{value:"retail",label:"Retail"},{value:"wholesale",label:"Wholesale"},{value:"export",label:"Export"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Buyer Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Buyer Name",type:"text",value:d.buyerName,onChange:u=>E({...d,buyerName:u}),error:B.buyerName,required:!0}),e.jsx(I,{label:"Buyer ID",type:"text",value:d.buyerId,onChange:u=>E({...d,buyerId:u}),placeholder:"Buyer identification"}),e.jsx(I,{label:"Buyer Phone",type:"tel",value:d.buyerPhone,onChange:u=>E({...d,buyerPhone:u}),error:B.buyerPhone,required:!0}),e.jsx(U,{label:"Buyer Type",value:d.buyerType,onChange:u=>E({...d,buyerType:u}),options:[{value:"individual",label:"Individual"},{value:"company",label:"Company"},{value:"cooperative",label:"Cooperative"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Goods Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(I,{label:"Expected Quantity (kg)",type:"number",value:d.quantityExpected,onChange:u=>E({...d,quantityExpected:u}),error:B.quantityExpected,required:!0}),e.jsx(I,{label:"Received Quantity (kg)",type:"number",value:d.quantityReceived,onChange:u=>E({...d,quantityReceived:u}),error:B.quantityReceived,required:!0}),e.jsx(U,{label:"Condition",value:d.condition,onChange:u=>E({...d,condition:u}),options:[{value:"excellent",label:"Excellent"},{value:"good",label:"Good"},{value:"fair",label:"Fair"},{value:"poor",label:"Poor"},{value:"damaged",label:"Damaged"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Price per kg",type:"number",value:d.itemPrice,onChange:u=>E({...d,itemPrice:u}),error:B.itemPrice,required:!0}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:Y(d.quantityReceived*d.itemPrice)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Delivery Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Driver Name",type:"text",value:d.driverName,onChange:u=>E({...d,driverName:u}),error:B.driverName,required:!0}),e.jsx(I,{label:"Driver ID",type:"text",value:d.driverId,onChange:u=>E({...d,driverId:u}),placeholder:"Driver identification"}),e.jsx(I,{label:"Vehicle Registration",type:"text",value:d.vehicleReg,onChange:u=>E({...d,vehicleReg:u}),required:!0}),e.jsx(I,{label:"Delivery Time",type:"datetime-local",value:d.deliveryTime||"",onChange:u=>E({...d,deliveryTime:u||""}),error:B.deliveryTime,required:!0}),e.jsx(U,{label:"Delivery Status",value:d.deliveryStatus,onChange:u=>E({...d,deliveryStatus:u}),options:[{value:"pending",label:"Pending"},{value:"in-transit",label:"In Transit"},{value:"delivered",label:"Delivered"},{value:"failed",label:"Failed"},{value:"disputed",label:"Disputed"}],required:!0})]})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Admin Notes"}),e.jsx("textarea",{value:d.adminNotes||"",onChange:u=>E({...d,adminNotes:u.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Admin notes and observations..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-blue",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-emerald",children:t?"Update Record":"Add Record"})]})]})}),e.jsx(ke,{isOpen:h,onClose:()=>S(!1),title:"Verify Delivery",size:"md",type:"warning",icon:e.jsx(ee,{className:"h-6 w-6"}),children:n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Delivery Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Transport Code:"})," ",n.transportCode]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Destination:"})," ",n.destinationLocation]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Buyer:"})," ",n.buyerName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Quantity Expected:"})," ",n.quantityExpected,"kg"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Quantity Received:"})," ",n.quantityReceived,"kg"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Condition:"})," ",n.condition]})]})]}),n.hasDiscrepancy&&e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(re,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Discrepancy Detected"})]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:n.discrepancyDescription})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>S(!1),className:"btn-blue",children:"Cancel"}),e.jsx("button",{onClick:()=>G(n),className:"btn-emerald",children:"Verify Delivery"})]})]})})]})},Oa=()=>{const{sourceRecords:r,user:x}=le(),[C,v]=c.useState("all"),[f,o]=c.useState("month"),g=[{code:"AC001",name:"Embu Area",region:"Embu County"},{code:"AC002",name:"Mecca Area",region:"Mecca Region"},{code:"AC003",name:"Ena Area",region:"Ena Region"},{code:"AC004",name:"Ugweri Area",region:"Ugweri Region"}],h=c.useMemo(()=>{const i=[];return g.forEach(n=>{const T=r.filter(k=>k.areaCode===n.code);if(T.length===0){i.push({areaCode:n.code,areaName:n.name,region:n.region,totalTrips:0,totalQuantity:0,totalRevenue:0,avgDeliveryTime:0,successRate:0,topStations:[],topDropOffs:[]});return}const d=T.reduce((k,m)=>k+m.quantitySold,0),E=T.reduce((k,m)=>k+m.totalCost,0),B=2.5+Math.random()*2,z=85+Math.random()*15,p=T.reduce((k,m)=>{const L=m.pickupStationCode;return k[L]||(k[L]={trips:0,revenue:0,name:L}),k[L].trips+=1,k[L].revenue+=m.totalCost,k},{}),q=Object.entries(p).map(([k,m])=>({stationCode:k,stationName:k,trips:m.trips,revenue:m.revenue})).sort((k,m)=>m.trips-k.trips).slice(0,3),R=T.reduce((k,m)=>{const L=m.dropOffPoint;return k[L]||(k[L]={trips:0,revenue:0}),k[L].trips+=1,k[L].revenue+=m.totalCost,k},{}),l=Object.entries(R).map(([k,m])=>({dropOff:k,trips:m.trips,revenue:m.revenue})).sort((k,m)=>m.trips-k.trips).slice(0,5);i.push({areaCode:n.code,areaName:n.name,region:n.region,totalTrips:T.length,totalQuantity:d,totalRevenue:E,avgDeliveryTime:B,successRate:z,topStations:q,topDropOffs:l})}),i.sort((n,T)=>T.totalTrips-n.totalTrips)},[r]),S=C==="all"?h:h.filter(i=>i.areaCode===C),t=c.useMemo(()=>{const i=h.reduce((E,B)=>E+B.totalTrips,0),n=h.reduce((E,B)=>E+B.totalQuantity,0),T=h.reduce((E,B)=>E+B.totalRevenue,0),d=h.length>0?h.reduce((E,B)=>E+B.successRate,0)/h.length:0;return{totalTrips:i,totalQuantity:n,totalRevenue:T,avgSuccessRate:d}},[h]);return(x==null?void 0:x.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs(w,{className:"p-8 text-center",children:[e.jsx(Te,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Area performance analysis is only available to administrators."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Area Performance Analysis"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive analysis of pickup station performance by area codes"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:f,onChange:i=>o(i.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"})]}),e.jsxs("select",{value:C,onChange:i=>v(i.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Areas"}),g.map(i=>e.jsxs("option",{value:i.code,children:[i.code," - ",i.name]},i.code))]}),e.jsx("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:e.jsx(oe,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(ye,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Trips"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.totalTrips})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(de,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Quantity"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(t.totalQuantity/1e3).toFixed(1),"K kg"]})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500",children:e.jsx(pe,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(t.totalRevenue/1e3).toFixed(0),"K"]})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500",children:e.jsx(Te,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Avg Success Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[t.avgSuccessRate.toFixed(1),"%"]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:S.map(i=>e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i.areaCode}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.areaName," - ",i.region]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Live Data"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trips"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i.totalTrips})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Quantity"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(i.totalQuantity/1e3).toFixed(1),"K kg"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(i.totalRevenue/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Success Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[i.successRate.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Top Performing Stations"}),e.jsx("div",{className:"space-y-2",children:i.topStations.map((n,T)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-500",children:["#",T+1]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:n.stationCode})]}),e.jsxs("div",{className:"text-right text-xs",children:[e.jsxs("p",{className:"text-gray-500",children:[n.trips," trips"]}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(n.revenue/1e3).toFixed(1),"K"]})]})]},n.stationCode))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Top Drop-off Points"}),e.jsx("div",{className:"space-y-2",children:i.topDropOffs.map((n,T)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:n.dropOff})]}),e.jsxs("div",{className:"text-right text-xs",children:[e.jsxs("p",{className:"text-gray-500",children:[n.trips," trips"]}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(n.revenue/1e3).toFixed(1),"K"]})]})]},n.dropOff))})]})]},i.areaCode))})]})},Ct={employeeId:"",firstName:"",lastName:"",email:"",phone:"",role:"driver",department:"transport",status:"active",hireDate:new Date().toISOString().split("T")[0],salary:0,licenseNumber:"",licenseExpiry:"",assignedRoutes:[],assignedVehicles:[],performance:{rating:5,tripsCompleted:0,onTimeDelivery:100,customerSatisfaction:100,safetyScore:5},emergencyContact:{name:"",phone:"",relationship:""},address:"",notes:""},qa=()=>{const{user:r}=le(),[x,C]=c.useState([{id:"1",employeeId:"EMP001",firstName:"John",lastName:"Kimani",email:"john.kimani@mwalimu.com",phone:"+254 712 345678",role:"driver",department:"transport",status:"active",hireDate:"2023-01-15",salary:45e3,licenseNumber:"DL123456",licenseExpiry:"2025-12-31",assignedRoutes:["Nairobi-Mombasa","Nairobi-Garissa"],assignedVehicles:["KAA 123A","KBB 456B"],performance:{rating:4.5,tripsCompleted:156,onTimeDelivery:92,customerSatisfaction:88,safetyScore:4.8},emergencyContact:{name:"Mary Kimani",phone:"+254 723 456789",relationship:"Spouse"},address:"Nairobi, Kenya",notes:"Excellent driver with clean record",lastLogin:"2024-01-15T08:30:00Z",createdAt:"2023-01-15T00:00:00Z",updatedAt:"2024-01-15T08:30:00Z"},{id:"2",employeeId:"EMP002",firstName:"Sarah",lastName:"Mwangi",email:"sarah.mwangi@mwalimu.com",phone:"+254 734 567890",role:"supervisor",department:"operations",status:"active",hireDate:"2022-06-01",salary:65e3,assignedRoutes:["All Routes"],assignedVehicles:[],performance:{rating:4.8,tripsCompleted:0,onTimeDelivery:95,customerSatisfaction:92,safetyScore:5},emergencyContact:{name:"Peter Mwangi",phone:"+254 745 678901",relationship:"Brother"},address:"Meru, Kenya",notes:"Team supervisor with excellent leadership skills",lastLogin:"2024-01-15T09:15:00Z",createdAt:"2022-06-01T00:00:00Z",updatedAt:"2024-01-15T09:15:00Z"}]),[v,f]=c.useState(!1),[o,g]=c.useState(null),[h,S]=c.useState(Ct),[t,i]=c.useState({}),[n,T]=c.useState({search:"",role:"all",department:"all",status:"all",performance:"all"}),d=()=>{S(Ct),i({}),g(null)},E=m=>{if(m){g(m);const{id:L,createdAt:y,updatedAt:a,...M}=m;S(M)}else d();f(!0)},B=()=>{f(!1),d()},z=()=>{const m={};return h.employeeId||(m.employeeId="Employee ID is required"),h.firstName||(m.firstName="First name is required"),h.lastName||(m.lastName="Last name is required"),h.email||(m.email="Email is required"),h.phone||(m.phone="Phone number is required"),h.hireDate||(m.hireDate="Hire date is required"),(!h.salary||h.salary<=0)&&(m.salary="Valid salary is required"),i(m),Object.keys(m).length===0},p=m=>{if(m.preventDefault(),!z())return;const L=new Date().toISOString(),y={...h,updatedAt:L};if(o)C(x.map(a=>a.id===o.id?{...y,id:o.id,createdAt:o.createdAt}:a));else{const a=Date.now().toString();C([...x,{...y,id:a,createdAt:L}])}B()},q=m=>{window.confirm(`Are you sure you want to delete ${m.firstName} ${m.lastName}?`)&&C(x.filter(L=>L.id!==m.id))},R=c.useMemo(()=>x.filter(m=>{const L=n.search===""||`${m.firstName} ${m.lastName}`.toLowerCase().includes(n.search.toLowerCase())||m.employeeId.toLowerCase().includes(n.search.toLowerCase())||m.email.toLowerCase().includes(n.search.toLowerCase()),y=n.role==="all"||m.role===n.role,a=n.department==="all"||m.department===n.department,M=n.status==="all"||m.status===n.status;let s=!0;if(n.performance!=="all"){const N=m.performance.rating;switch(n.performance){case"excellent":s=N>=4.5;break;case"good":s=N>=3.5&&N<4.5;break;case"average":s=N>=2.5&&N<3.5;break;case"poor":s=N<2.5;break}}return L&&y&&a&&M&&s}),[x,n]),l=[{key:"employeeId",label:"Employee ID",sortable:!0},{key:"firstName",label:"Name",render:(m,L)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[L.firstName," ",L.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:L.email})]}),sortable:!0},{key:"role",label:"Role",render:m=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200":m==="manager"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":m==="supervisor"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":m==="coordinator"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:m.charAt(0).toUpperCase()+m.slice(1)}),sortable:!0},{key:"department",label:"Department",sortable:!0},{key:"status",label:"Status",render:m=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":m==="inactive"?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":m==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:m.charAt(0).toUpperCase()+m.slice(1)}),sortable:!0},{key:"performance",label:"Performance",render:m=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((L,y)=>e.jsx(jt,{className:`h-3 w-3 ${y<Math.floor(m.rating)?"text-yellow-400":"text-gray-300"}`},y))}),e.jsx("span",{className:"text-sm font-medium",children:m.rating.toFixed(1)})]})},{key:"hireDate",label:"Hire Date",render:m=>ve(m),sortable:!0}],k=c.useMemo(()=>{const m=x.length,L=x.filter(s=>s.status==="active").length,y=x.filter(s=>s.role==="driver").length,a=x.reduce((s,N)=>s+N.performance.rating,0)/m,M=x.reduce((s,N)=>s+N.performance.tripsCompleted,0);return{totalStaff:m,activeStaff:L,drivers:y,avgPerformance:a||0,totalTrips:M}},[x]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage staff members, roles, and performance"})]}),e.jsxs("button",{onClick:()=>E(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Staff"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(lt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Staff"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.totalStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(lt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Active Staff"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.activeStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500",children:e.jsx(fe,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Drivers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.drivers})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500",children:e.jsx(jt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Avg Performance"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.avgPerformance.toFixed(1)})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500",children:e.jsx(be,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Trips"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.totalTrips})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff...",value:n.search,onChange:m=>T({...n,search:m.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Role",value:n.role,onChange:m=>T({...n,role:m}),options:[{value:"all",label:"All Roles"},{value:"driver",label:"Driver"},{value:"supervisor",label:"Supervisor"},{value:"coordinator",label:"Coordinator"},{value:"manager",label:"Manager"},{value:"admin",label:"Admin"}]}),e.jsx(U,{label:"Department",value:n.department,onChange:m=>T({...n,department:m}),options:[{value:"all",label:"All Departments"},{value:"transport",label:"Transport"},{value:"operations",label:"Operations"},{value:"logistics",label:"Logistics"},{value:"management",label:"Management"}]}),e.jsx(U,{label:"Status",value:n.status,onChange:m=>T({...n,status:m}),options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"on-leave",label:"On Leave"}]}),e.jsx(U,{label:"Performance",value:n.performance,onChange:m=>T({...n,performance:m}),options:[{value:"all",label:"All Performance"},{value:"excellent",label:"Excellent (4.5+)"},{value:"good",label:"Good (3.5-4.4)"},{value:"average",label:"Average (2.5-3.4)"},{value:"poor",label:"Poor (<2.5)"}]})]})]}),e.jsx(w,{className:"p-6",children:e.jsx(ze,{data:R,columns:l,onEdit:E,onDelete:q,emptyMessage:"No staff members found. Click 'Add Staff' to get started."})}),e.jsx(ke,{isOpen:v,onClose:B,title:o?"Edit Staff Member":"Add Staff Member",size:"lg",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Employee ID",type:"text",value:h.employeeId,onChange:m=>S({...h,employeeId:m}),error:t.employeeId,required:!0}),e.jsx(I,{label:"Hire Date",type:"date",value:h.hireDate,onChange:m=>S({...h,hireDate:m}),error:t.hireDate,required:!0}),e.jsx(I,{label:"First Name",type:"text",value:h.firstName,onChange:m=>S({...h,firstName:m}),error:t.firstName,required:!0}),e.jsx(I,{label:"Last Name",type:"text",value:h.lastName,onChange:m=>S({...h,lastName:m}),error:t.lastName,required:!0}),e.jsx(I,{label:"Email",type:"email",value:h.email,onChange:m=>S({...h,email:m}),error:t.email,required:!0}),e.jsx(I,{label:"Phone",type:"tel",value:h.phone,onChange:m=>S({...h,phone:m}),error:t.phone,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Role & Department"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Role",value:h.role,onChange:m=>S({...h,role:m}),options:[{value:"driver",label:"Driver"},{value:"supervisor",label:"Supervisor"},{value:"coordinator",label:"Coordinator"},{value:"manager",label:"Manager"},{value:"admin",label:"Admin"}],required:!0}),e.jsx(U,{label:"Department",value:h.department,onChange:m=>S({...h,department:m}),options:[{value:"transport",label:"Transport"},{value:"operations",label:"Operations"},{value:"logistics",label:"Logistics"},{value:"management",label:"Management"}],required:!0}),e.jsx(U,{label:"Status",value:h.status,onChange:m=>S({...h,status:m}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"on-leave",label:"On Leave"}],required:!0}),e.jsx(I,{label:"Salary",type:"number",value:h.salary,onChange:m=>S({...h,salary:m}),error:t.salary,required:!0})]})]}),h.role==="driver"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Driver Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"License Number",type:"text",value:h.licenseNumber||"",onChange:m=>S({...h,licenseNumber:m})}),e.jsx(I,{label:"License Expiry",type:"date",value:h.licenseExpiry||"",onChange:m=>S({...h,licenseExpiry:m})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(I,{label:"Contact Name",type:"text",value:h.emergencyContact.name,onChange:m=>S({...h,emergencyContact:{...h.emergencyContact,name:m}})}),e.jsx(I,{label:"Contact Phone",type:"tel",value:h.emergencyContact.phone,onChange:m=>S({...h,emergencyContact:{...h.emergencyContact,phone:m}})}),e.jsx(I,{label:"Relationship",type:"text",value:h.emergencyContact.relationship,onChange:m=>S({...h,emergencyContact:{...h.emergencyContact,relationship:m}})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{label:"Address",type:"text",value:h.address,onChange:m=>S({...h,address:m})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:h.notes||"",onChange:m=>S({...h,notes:m.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Additional notes about the staff member..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:o?"Update Staff":"Add Staff"})]})]})})]})},Fa=()=>{const{user:r,isDark:x,setIsDark:C,sourceRecords:v,transportLogs:f}=le(),{showSuccessNotification:o,showErrorNotification:g}=De(),h=c.useRef(null),[S,t]=c.useState("profile"),[i,n]=c.useState(!1),[T,d]=c.useState(!1),[E,B]=c.useState(""),[z,p]=c.useState(""),[q,R]=c.useState(""),[l,k]=c.useState({id:(r==null?void 0:r.id)||"1",name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",phone:"+254 700 000 000",role:(r==null?void 0:r.role)||"user",department:"Transport Operations",avatar:"",bio:"Transport operations specialist with focus on miraa logistics and delivery management.",location:"Nairobi, Kenya",joinDate:"2024-01-15",lastLogin:new Date().toISOString(),isActive:!0}),[m,L]=c.useState({twoFactorEnabled:!1,passwordLastChanged:"2024-01-15",loginAttempts:0,trustedDevices:2,sessionTimeout:30}),[y,a]=c.useState({maintenanceMode:!1,autoBackup:!0,backupFrequency:"daily",dataRetention:365,maxFileSize:10,systemLogs:!0}),[M,s]=c.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,deliveryAlerts:!0,discrepancyAlerts:!0,weeklyReports:!1,systemAlerts:(r==null?void 0:r.role)==="admin",maintenanceAlerts:(r==null?void 0:r.role)==="admin",securityAlerts:!0,marketingEmails:!1,soundEffects:!1,quietHours:{enabled:!1,start:"22:00",end:"07:00"}}),[N,O]=c.useState({theme:x?"dark":"light",language:"en",timezone:"Africa/Nairobi",dateFormat:"DD/MM/YYYY",timeFormat:"24h",currency:"KES",dashboardLayout:"grid",sidebarCollapsed:!1,animations:!0,soundEffects:!1}),j={totalRecords:v.length,totalSize:"2.4 MB",lastBackup:"2024-01-20 14:30",nextBackup:"2024-01-21 14:30"},F=[{id:"profile",label:"Profile",icon:Le,description:"Manage your personal information"},{id:"security",label:"Security",icon:je,description:"Password and security settings"},{id:"notifications",label:"Notifications",icon:we,description:"Configure notification preferences"},{id:"appearance",label:"Appearance",icon:it,description:"Customize your interface"},{id:"data",label:"Data Management",icon:Pe,description:"Export, import, and backup data"},...(r==null?void 0:r.role)==="admin"?[{id:"system",label:"System",icon:he,description:"System administration"}]:[]],G=()=>{var A;(A=h.current)==null||A.click()},J=A=>{var D;const u=(D=A.target.files)==null?void 0:D[0];if(u){if(u.size>5*1024*1024){g("File Too Large","Please select an image smaller than 5MB.");return}const K=new FileReader;K.onload=_=>{var se;k({...l,avatar:(se=_.target)==null?void 0:se.result}),o("Avatar Updated","Your profile picture has been updated successfully.")},K.readAsDataURL(u)}},W=async()=>{n(!0);try{await new Promise(A=>setTimeout(A,1e3)),o("Profile Updated","Your profile information has been saved successfully.")}catch{g("Update Failed","Failed to update profile. Please try again.")}finally{n(!1)}},X=async()=>{if(z!==q){g("Password Mismatch","New password and confirmation do not match.");return}if(z.length<8){g("Weak Password","Password must be at least 8 characters long.");return}n(!0);try{await new Promise(A=>setTimeout(A,1e3)),L({...m,passwordLastChanged:new Date().toISOString()}),B(""),p(""),R(""),o("Password Changed","Your password has been updated successfully.")}catch{g("Password Change Failed","Failed to change password. Please try again.")}finally{n(!1)}},H=async()=>{n(!0);try{const A={profile:l,settings:{notifications:M,appearance:N},data:{sourceRecords:v,transportLogs:f},exportDate:new Date().toISOString(),version:"1.0"},u=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),D=URL.createObjectURL(u),K=document.createElement("a");K.href=D,K.download=`mwalimu-transporters-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(D),o("Data Exported","Your data has been exported successfully.")}catch{g("Export Failed","Failed to export data. Please try again.")}finally{n(!1)}},ce=async()=>{n(!0);try{await new Promise(A=>setTimeout(A,1e3)),a({...y,maintenanceMode:!y.maintenanceMode}),o(y.maintenanceMode?"Maintenance Mode Disabled":"Maintenance Mode Enabled",y.maintenanceMode?"System is now accessible to users.":"System is now in maintenance mode. Users will see a maintenance page.")}catch{g("Operation Failed","Failed to toggle maintenance mode.")}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"page-header -mx-6 px-6 py-8 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title text-gradient-primary",children:"Settings"}),e.jsx("p",{className:"page-subtitle",children:"Manage your account preferences, security settings, and system configurations"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l.isActive?"bg-green-500":"bg-red-500"} animate-pulse`}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:l.isActive?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Last login: ",new Date(l.lastLogin).toLocaleDateString()]})]})})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-80",children:e.jsxs(w,{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Settings Menu"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure your account and system preferences"})]}),e.jsx("nav",{className:"space-y-2",children:F.map(A=>e.jsxs("button",{onClick:()=>t(A.id),className:`flex items-start space-x-3 w-full px-4 py-3 rounded-xl text-left transition-all duration-200 hover-lift ${S===A.id?"bg-gradient-to-r from-bright-green to-green-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(A.icon,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"font-medium block",children:A.label}),e.jsx("span",{className:`text-xs mt-1 ${S===A.id?"text-green-100":"text-gray-500 dark:text-gray-400"}`,children:A.description})]})]},A.id))}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Records"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.totalRecords})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Data Size"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.totalSize})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Backup"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(j.lastBackup).toLocaleDateString()})]})]})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs(w,{className:"card-enhanced p-8",children:[S==="profile"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(Le,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Profile Settings"})]}),e.jsxs("div",{className:"flex items-center space-x-6 p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-bright-green to-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:l.avatar?e.jsx("img",{src:l.avatar,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):l.name.charAt(0).toUpperCase()}),e.jsx("button",{onClick:G,className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white hover:bg-blue-600 transition-colors",children:e.jsx(aa,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:l.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.email}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[l.role==="admin"?"Administrator":"User"," â€¢ ",l.department]})]}),e.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:J,className:"hidden"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(I,{label:"Full Name",type:"text",value:l.name,onChange:A=>k({...l,name:A}),required:!0}),e.jsx(I,{label:"Email Address",type:"email",value:l.email,onChange:A=>k({...l,email:A}),required:!0}),e.jsx(I,{label:"Phone Number",type:"tel",value:l.phone,onChange:A=>k({...l,phone:A})}),e.jsx(I,{label:"Department",type:"text",value:l.department,onChange:A=>k({...l,department:A})}),e.jsx(I,{label:"Location",type:"text",value:l.location,onChange:A=>k({...l,location:A})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),e.jsx("textarea",{value:l.bio,onChange:A=>k({...l,bio:A.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Tell us about yourself..."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(ee,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Account Status"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Active â€¢ Joined ",new Date(l.joinDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Role"}),e.jsx("p",{className:"font-semibold text-bright-green",children:l.role==="admin"?"Administrator":"User"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:W,disabled:i,className:"btn-primary flex items-center space-x-2",children:[i?e.jsx(ue,{className:"h-4 w-4 animate-spin"}):e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:i?"Saving...":"Save Profile"})]})})]}),S==="security"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(je,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Security Settings"})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Change Password"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Current Password",type:T?"text":"password",value:E,onChange:A=>B(A),required:!0}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>d(!T),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:T?e.jsx(Et,{className:"h-4 w-4"}):e.jsx(Fe,{className:"h-4 w-4"})})}),e.jsx(I,{label:"New Password",type:T?"text":"password",value:z,onChange:A=>p(A),required:!0}),e.jsx(I,{label:"Confirm New Password",type:T?"text":"password",value:q,onChange:A=>R(A),required:!0})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:X,disabled:i||!E||!z||!q,className:"btn-primary flex items-center space-x-2",children:[i?e.jsx(ue,{className:"h-4 w-4 animate-spin"}):e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:i?"Changing...":"Change Password"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(nt,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Two-Factor Authentication"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Add an extra layer of security to your account"}),e.jsx("button",{className:"btn-outline w-full",children:m.twoFactorEnabled?"Disable 2FA":"Enable 2FA"})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(ge,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Login Activity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Password Change"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(m.passwordLastChanged).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Trusted Devices"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:m.trustedDevices})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Session Timeout"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[m.sessionTimeout," min"]})]})]})]})]})]}),S==="notifications"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:e.jsx(we,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Notification Preferences"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customize how and when you receive notifications"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${M.emailNotifications?"bg-green-500":"bg-gray-400"} animate-pulse`}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:M.emailNotifications?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center space-x-2",children:[e.jsx(ra,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Notification Channels"})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl border border-blue-200 dark:border-blue-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(At,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive notifications via email"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Primary notification method"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.emailNotifications,onChange:A=>s({...M,emailNotifications:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-500/20 dark:peer-focus:ring-blue-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl border border-green-200 dark:border-green-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(la,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive notifications via SMS"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Requires phone number verification"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.smsNotifications,onChange:A=>s({...M,smsNotifications:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-500/20 dark:peer-focus:ring-green-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl border border-purple-200 dark:border-purple-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(we,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Browser and mobile push notifications"}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"Real-time alerts"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.pushNotifications,onChange:A=>s({...M,pushNotifications:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-500/20 dark:peer-focus:ring-purple-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-500"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center space-x-2",children:[e.jsx(He,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{children:"Notification Types"})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-xl border border-orange-200 dark:border-orange-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-orange-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(fe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Delivery Alerts"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified when deliveries are completed"}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Critical business updates"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.deliveryAlerts,onChange:A=>s({...M,deliveryAlerts:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-500/20 dark:peer-focus:ring-orange-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-orange-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-xl border border-red-200 dark:border-red-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-red-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(re,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Discrepancy Alerts"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified about quantity discrepancies"}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"High priority alerts"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.discrepancyAlerts,onChange:A=>s({...M,discrepancyAlerts:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-500/20 dark:peer-focus:ring-red-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-red-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl border border-indigo-200 dark:border-indigo-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-indigo-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Weekly Reports"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive weekly performance summaries"}),e.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-1",children:"Business insights"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.weeklyReports,onChange:A=>s({...M,weeklyReports:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-500/20 dark:peer-focus:ring-indigo-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center space-x-2",children:[e.jsx(he,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Advanced Settings"})]})}),e.jsxs("div",{className:"group p-6 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:shadow-lg transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gray-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(Se,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Quiet Hours"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Disable notifications during specific hours"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Respect your sleep schedule"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.quietHours.enabled,onChange:A=>s({...M,quietHours:{...M.quietHours,enabled:A.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-500/20 dark:peer-focus:ring-gray-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-gray-500"})]})]}),M.quietHours.enabled&&e.jsx("div",{className:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Start Time",type:"time",value:M.quietHours.start,onChange:A=>s({...M,quietHours:{...M.quietHours,start:A}}),leftIcon:e.jsx(mt,{className:"h-4 w-4"})}),e.jsx(I,{label:"End Time",type:"time",value:M.quietHours.end,onChange:A=>s({...M,quietHours:{...M.quietHours,end:A}}),leftIcon:e.jsx(St,{className:"h-4 w-4"})})]})})]}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl border border-pink-200 dark:border-pink-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-pink-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:M.soundEffects?e.jsx(Tt,{className:"h-6 w-6 text-white"}):e.jsx(ia,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Play sounds for notifications"}),e.jsx("p",{className:"text-xs text-pink-600 dark:text-pink-400 mt-1",children:"Audio feedback"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.soundEffects,onChange:A=>s({...M,soundEffects:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-pink-500/20 dark:peer-focus:ring-pink-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-pink-500"})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsxs("button",{className:"btn-outline flex items-center justify-center space-x-2",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset to Defaults"})]}),e.jsxs("button",{className:"btn-primary flex items-center justify-center space-x-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Notification Settings"})]})]})]}),S==="appearance"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(it,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Appearance Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{label:"Theme",value:N.theme,onChange:A=>{O({...N,theme:A}),A==="dark"&&!x?C(!0):A==="light"&&x&&C(!1)},options:[{value:"light",label:"Light"},{value:"dark",label:"Dark"}]}),e.jsx(U,{label:"Language",value:N.language,onChange:A=>O({...N,language:A}),options:[{value:"en",label:"English"},{value:"sw",label:"Kiswahili"}]}),e.jsx(U,{label:"Timezone",value:N.timezone,onChange:A=>O({...N,timezone:A}),options:[{value:"Africa/Nairobi",label:"Nairobi (EAT)"},{value:"Africa/Dar_es_Salaam",label:"Dar es Salaam (EAT)"},{value:"UTC",label:"UTC"}]}),e.jsx(U,{label:"Date Format",value:N.dateFormat,onChange:A=>O({...N,dateFormat:A}),options:[{value:"DD/MM/YYYY",label:"DD/MM/YYYY"},{value:"MM/DD/YYYY",label:"MM/DD/YYYY"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD"}]}),e.jsx(U,{label:"Time Format",value:N.timeFormat,onChange:A=>O({...N,timeFormat:A}),options:[{value:"12h",label:"12 Hour (AM/PM)"},{value:"24h",label:"24 Hour"}]}),e.jsx(U,{label:"Currency",value:N.currency,onChange:A=>O({...N,currency:A}),options:[{value:"KES",label:"Kenyan Shilling (KES)"},{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"}]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Animations"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable smooth transitions and animations"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.animations,onChange:A=>O({...N,animations:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Play sounds for notifications and actions"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.soundEffects,onChange:A=>O({...N,soundEffects:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Appearance Settings"})]})})]}),S==="data"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(Pe,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Data Management"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Total Records"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j.totalRecords}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Source & Transport records"})]}),e.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(gt,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Data Size"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.totalSize}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total storage used"})]}),e.jsxs("div",{className:"p-6 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Ge,{className:"h-5 w-5 text-purple-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Last Backup"})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:new Date(j.lastBackup).toLocaleDateString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatic backup"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(oe,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Export Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Download all your data including records, reports, and settings as a JSON file."}),e.jsxs("button",{onClick:H,disabled:i,className:"btn-secondary w-full flex items-center justify-center space-x-2",children:[i?e.jsx(ue,{className:"h-4 w-4 animate-spin"}):e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:i?"Exporting...":"Export Data"})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(dt,{className:"h-6 w-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Import Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Import data from CSV or Excel files. Supported formats: CSV, XLSX, JSON."}),e.jsxs("button",{className:"btn-primary w-full flex items-center justify-center space-x-2",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:"Import Data"})]})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Backup Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Backup Frequency",value:y.backupFrequency,onChange:A=>a({...y,backupFrequency:A}),options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}]}),e.jsx(I,{label:"Data Retention (days)",type:"number",value:y.dataRetention.toString(),onChange:A=>a({...y,dataRetention:parseInt(A)})})]})]}),e.jsxs("div",{className:"p-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(je,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:"Data Security"})]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Your data is encrypted and stored securely. Only you and authorized administrators can access your information. All exports are encrypted and require authentication to open."})]})]}),S==="system"&&(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(he,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"System Administration"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"System Status"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:"Operational"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All systems running normally"})]}),e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Active Users"})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:"12"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currently online"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(re,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.maintenanceMode?"System is in maintenance mode":"Enable maintenance mode for system updates"})]})]}),e.jsx("button",{onClick:ce,disabled:i,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y.maintenanceMode?"bg-green-600 hover:bg-green-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:i?"Processing...":y.maintenanceMode?"Disable":"Enable"})]})}),e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(na,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Auto Backup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatic daily backups to cloud storage"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.autoBackup,onChange:A=>a({...y,autoBackup:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})}),e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ye,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"System Logs"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable detailed system activity logging"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.systemLogs,onChange:A=>a({...y,systemLogs:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Version"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Update"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"2024-01-20"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Database Size"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"2.4 MB"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Uptime"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"99.9%"})]})]})]})]})]})})]})]})},Ua=()=>{var R,l,k,m,L,y;const{user:r}=le(),[x,C]=c.useState(!1),[v,f]=c.useState(null),[o,g]=c.useState({search:"",type:"all",status:"all",areaCode:"all",paymentTerms:"all"}),[h,S]=c.useState([{id:"1",buyerId:"BYR-001",firstName:"Ahmed",lastName:"Hassan",email:"ahmed.hassan@email.com",phone:"+254 712 345678",company:"Hassan Enterprises",buyerType:"company",location:"Nairobi CBD",areaCode:"AC005",preferredDeliveryTime:"09:00-12:00",creditLimit:5e5,currentBalance:125e3,paymentTerms:"net30",status:"active",registrationDate:new Date(Date.now()-90*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-2*24*60*60*1e3).toISOString(),totalPurchases:45,totalValue:225e4,averageOrderValue:5e4,loyaltyPoints:2250,rating:4.8,notes:"Reliable buyer, always pays on time",emergencyContact:{name:"Fatima Hassan",phone:"+254 723 456789",relationship:"Wife"},documents:{idCopy:!0,businessLicense:!0,taxCertificate:!0}},{id:"2",buyerId:"BYR-002",firstName:"Mary",lastName:"Wanjiku",email:"mary.wanjiku@email.com",phone:"+254 734 567890",buyerType:"individual",location:"Mombasa",areaCode:"AC003",preferredDeliveryTime:"14:00-17:00",creditLimit:1e5,currentBalance:0,paymentTerms:"cash",status:"active",registrationDate:new Date(Date.now()-60*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-5*24*60*60*1e3).toISOString(),totalPurchases:12,totalValue:48e4,averageOrderValue:4e4,loyaltyPoints:480,rating:4.5,notes:"Prefers morning deliveries"},{id:"3",buyerId:"BYR-003",firstName:"Cooperative",lastName:"Farmers Union",email:"info@farmersunion.co.ke",phone:"+254 745 678901",company:"Meru Farmers Cooperative",buyerType:"cooperative",location:"Meru Town",areaCode:"AC001",preferredDeliveryTime:"08:00-10:00",creditLimit:1e6,currentBalance:25e4,paymentTerms:"net60",status:"active",registrationDate:new Date(Date.now()-120*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-1*24*60*60*1e3).toISOString(),totalPurchases:78,totalValue:39e5,averageOrderValue:5e4,loyaltyPoints:3900,rating:4.9,notes:"Large volume buyer, seasonal patterns",emergencyContact:{name:"John Mwangi",phone:"+254 756 789012",relationship:"Secretary"},documents:{idCopy:!0,businessLicense:!0,taxCertificate:!0}},{id:"4",buyerId:"BYR-004",firstName:"Omar",lastName:"Ali",email:"omar.ali@email.com",phone:"+254 767 890123",buyerType:"individual",location:"Garissa",areaCode:"AC004",preferredDeliveryTime:"10:00-14:00",creditLimit:75e3,currentBalance:45e3,paymentTerms:"credit",status:"suspended",registrationDate:new Date(Date.now()-30*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-15*24*60*60*1e3).toISOString(),totalPurchases:8,totalValue:24e4,averageOrderValue:3e4,loyaltyPoints:240,rating:3.2,notes:"Payment issues, account suspended"}]),[t,i]=c.useState({firstName:"",lastName:"",email:"",phone:"",company:"",buyerType:"individual",location:"",areaCode:"",preferredDeliveryTime:"",creditLimit:0,currentBalance:0,paymentTerms:"cash",status:"pending",lastPurchaseDate:"",notes:"",emergencyContact:{name:"",phone:"",relationship:""},documents:{idCopy:!1,businessLicense:!1,taxCertificate:!1}}),n=()=>{i({firstName:"",lastName:"",email:"",phone:"",company:"",buyerType:"individual",location:"",areaCode:"",preferredDeliveryTime:"",creditLimit:0,currentBalance:0,paymentTerms:"cash",status:"pending",lastPurchaseDate:"",notes:"",emergencyContact:{name:"",phone:"",relationship:""},documents:{idCopy:!1,businessLicense:!1,taxCertificate:!1}}),f(null)},T=a=>{if(a){f(a);const{id:M,buyerId:s,registrationDate:N,totalPurchases:O,totalValue:j,averageOrderValue:F,loyaltyPoints:G,rating:J,...W}=a;i(W)}else n();C(!0)},d=()=>{C(!1),n()},E=a=>{a.preventDefault();const M=new Date().toISOString(),s={...t,registrationDate:M,totalPurchases:0,totalValue:0,averageOrderValue:0,loyaltyPoints:0,rating:0};if(v)S(h.map(N=>N.id===v.id?{...s,id:v.id,buyerId:v.buyerId}:N));else{const N=Date.now().toString(),O=`BYR-${String(h.length+1).padStart(3,"0")}`;S([...h,{...s,id:N,buyerId:O}])}d()},B=a=>{window.confirm(`Are you sure you want to delete buyer ${a.firstName} ${a.lastName}?`)&&S(h.filter(M=>M.id!==a.id))},z=c.useMemo(()=>h.filter(a=>{var F;const M=o.search===""||a.firstName.toLowerCase().includes(o.search.toLowerCase())||a.lastName.toLowerCase().includes(o.search.toLowerCase())||a.email.toLowerCase().includes(o.search.toLowerCase())||((F=a.company)==null?void 0:F.toLowerCase().includes(o.search.toLowerCase()))||a.buyerId.toLowerCase().includes(o.search.toLowerCase()),s=o.type==="all"||a.buyerType===o.type,N=o.status==="all"||a.status===o.status,O=o.areaCode==="all"||a.areaCode===o.areaCode,j=o.paymentTerms==="all"||a.paymentTerms===o.paymentTerms;return M&&s&&N&&O&&j}),[h,o]),p=[{key:"buyerId",label:"Buyer ID",sortable:!0},{key:"firstName",label:"Name",render:(a,M)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[a," ",M.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:M.company||"Individual"})]}),sortable:!0},{key:"buyerType",label:"Type",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="company"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":a==="cooperative"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"location",label:"Location",render:(a,M)=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a}),e.jsx("p",{className:"text-xs text-gray-500",children:M.areaCode})]}),sortable:!0},{key:"status",label:"Status",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":a==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":a==="inactive"?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"totalValue",label:"Total Value",render:a=>Y(a),sortable:!0},{key:"currentBalance",label:"Balance",render:a=>e.jsx("span",{className:a>0?"text-red-600":"text-green-600",children:Y(a)}),sortable:!0},{key:"rating",label:"Rating",render:a=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(st,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm font-medium",children:a.toFixed(1)})]}),sortable:!0}],q=c.useMemo(()=>{const a=h.length,M=h.filter(j=>j.status==="active").length,s=h.reduce((j,F)=>j+F.totalValue,0),N=h.reduce((j,F)=>j+F.currentBalance,0),O=h.length>0?h.reduce((j,F)=>j+F.rating,0)/h.length:0;return{totalBuyers:a,activeBuyers:M,totalValue:s,totalBalance:N,averageRating:O}},[h]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Buyers Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive buyer database and relationship management"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>T(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Buyer"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500 flex-shrink-0",children:e.jsx(Ve,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Buyers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:q.totalBuyers})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500 flex-shrink-0",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:q.activeBuyers})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500 flex-shrink-0",children:e.jsx(Ke,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Value"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:Y(q.totalValue)})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500 flex-shrink-0",children:e.jsx(da,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Outstanding"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:Y(q.totalBalance)})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500 flex-shrink-0",children:e.jsx(st,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Avg Rating"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:q.averageRating.toFixed(1)})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search buyers...",value:o.search,onChange:a=>g({...o,search:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Type",value:o.type,onChange:a=>g({...o,type:a}),options:[{value:"all",label:"All Types"},{value:"individual",label:"Individual"},{value:"company",label:"Company"},{value:"cooperative",label:"Cooperative"}]}),e.jsx(U,{label:"Status",value:o.status,onChange:a=>g({...o,status:a}),options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}]}),e.jsx(U,{label:"Area Code",value:o.areaCode,onChange:a=>g({...o,areaCode:a}),options:[{value:"all",label:"All Areas"},{value:"AC001",label:"AC001 - Embu Area"},{value:"AC002",label:"AC002 - Mecca Area"},{value:"AC003",label:"AC003 - Ena Area"},{value:"AC004",label:"AC004 - Ugweri Area"}]}),e.jsx(U,{label:"Payment Terms",value:o.paymentTerms,onChange:a=>g({...o,paymentTerms:a}),options:[{value:"all",label:"All Terms"},{value:"cash",label:"Cash"},{value:"credit",label:"Credit"},{value:"net30",label:"Net 30"},{value:"net60",label:"Net 60"}]})]})]}),e.jsx(w,{className:"p-6 overflow-x-auto",children:e.jsx(ze,{data:z,columns:p,onEdit:T,onDelete:B,emptyMessage:"No buyers found matching the current filters."})}),e.jsx(ke,{isOpen:x,onClose:d,title:v?"Edit Buyer":"Add New Buyer",size:"xl",children:e.jsx("div",{className:"max-h-[80vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(I,{label:"First Name",type:"text",value:t.firstName,onChange:a=>i({...t,firstName:a}),required:!0}),e.jsx(I,{label:"Last Name",type:"text",value:t.lastName,onChange:a=>i({...t,lastName:a}),required:!0}),e.jsx(I,{label:"Email",type:"email",value:t.email,onChange:a=>i({...t,email:a}),required:!0}),e.jsx(I,{label:"Phone",type:"tel",value:t.phone,onChange:a=>i({...t,phone:a}),required:!0}),e.jsx(I,{label:"Company (Optional)",type:"text",value:t.company||"",onChange:a=>i({...t,company:a})}),e.jsx(U,{label:"Buyer Type",value:t.buyerType,onChange:a=>i({...t,buyerType:a}),options:[{value:"individual",label:"Individual"},{value:"company",label:"Company"},{value:"cooperative",label:"Cooperative"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Location & Delivery"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Location",type:"text",value:t.location,onChange:a=>i({...t,location:a}),required:!0}),e.jsx(U,{label:"Area Code",value:t.areaCode,onChange:a=>i({...t,areaCode:a}),options:[{value:"AC001",label:"AC001 - Embu Area"},{value:"AC002",label:"AC002 - Mecca Area"},{value:"AC003",label:"AC003 - Ena Area"},{value:"AC004",label:"AC004 - Ugweri Area"}],required:!0}),e.jsx(I,{label:"Preferred Delivery Time",type:"text",value:t.preferredDeliveryTime,onChange:a=>i({...t,preferredDeliveryTime:a}),placeholder:"e.g., 09:00-12:00"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Credit Limit",type:"number",value:t.creditLimit,onChange:a=>i({...t,creditLimit:Number(a)}),required:!0}),e.jsx(I,{label:"Current Balance",type:"number",value:t.currentBalance,onChange:a=>i({...t,currentBalance:Number(a)}),required:!0}),e.jsx(U,{label:"Payment Terms",value:t.paymentTerms,onChange:a=>i({...t,paymentTerms:a}),options:[{value:"cash",label:"Cash"},{value:"credit",label:"Credit"},{value:"net30",label:"Net 30"},{value:"net60",label:"Net 60"}],required:!0}),e.jsx(U,{label:"Status",value:t.status,onChange:a=>i({...t,status:a}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(I,{label:"Contact Name",type:"text",value:((R=t.emergencyContact)==null?void 0:R.name)||"",onChange:a=>i({...t,emergencyContact:{...t.emergencyContact,name:a}})}),e.jsx(I,{label:"Contact Phone",type:"tel",value:((l=t.emergencyContact)==null?void 0:l.phone)||"",onChange:a=>i({...t,emergencyContact:{...t.emergencyContact,phone:a}})}),e.jsx(I,{label:"Relationship",type:"text",value:((k=t.emergencyContact)==null?void 0:k.relationship)||"",onChange:a=>i({...t,emergencyContact:{...t.emergencyContact,relationship:a}})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Document Verification"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((m=t.documents)==null?void 0:m.idCopy)||!1,onChange:a=>i({...t,documents:{...t.documents,idCopy:a.target.checked}}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"ID Copy"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((L=t.documents)==null?void 0:L.businessLicense)||!1,onChange:a=>i({...t,documents:{...t.documents,businessLicense:a.target.checked}}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Business License"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((y=t.documents)==null?void 0:y.taxCertificate)||!1,onChange:a=>i({...t,documents:{...t.documents,taxCertificate:a.target.checked}}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Tax Certificate"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:t.notes||"",onChange:a=>i({...t,notes:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Additional notes about this buyer..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:v?"Update Buyer":"Create Buyer"})]})]})})})]})},$a=()=>{var S;const{sourceRecords:r,user:x}=le(),[C,v]=c.useState("30d"),[f,o]=c.useState("revenue");if((x==null?void 0:x.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})});const g=c.useMemo(()=>{const t=r.length,i=r.reduce((R,l)=>R+l.quantitySold,0),n=r.reduce((R,l)=>R+l.totalCost,0),T=r.reduce((R,l)=>R+(l.totalPackagingCost||0),0),d=[{code:"AC001",name:"Embu Area",volume:r.filter(R=>R.areaCode==="AC001").reduce((R,l)=>R+l.quantitySold,0),revenue:r.filter(R=>R.areaCode==="AC001").reduce((R,l)=>R+l.totalCost,0)},{code:"AC002",name:"Mecca Area",volume:r.filter(R=>R.areaCode==="AC002").reduce((R,l)=>R+l.quantitySold,0),revenue:r.filter(R=>R.areaCode==="AC002").reduce((R,l)=>R+l.totalCost,0)},{code:"AC003",name:"Ena Area",volume:r.filter(R=>R.areaCode==="AC003").reduce((R,l)=>R+l.quantitySold,0),revenue:r.filter(R=>R.areaCode==="AC003").reduce((R,l)=>R+l.totalCost,0)},{code:"AC004",name:"Ugweri Area",volume:r.filter(R=>R.areaCode==="AC004").reduce((R,l)=>R+l.quantitySold,0),revenue:r.filter(R=>R.areaCode==="AC004").reduce((R,l)=>R+l.totalCost,0)}],E=[{month:"Jan",volume:1250,revenue:625e3,trips:45},{month:"Feb",volume:1380,revenue:69e4,trips:52},{month:"Mar",volume:1520,revenue:76e4,trips:58},{month:"Apr",volume:1680,revenue:84e4,trips:64},{month:"May",volume:1450,revenue:725e3,trips:55},{month:"Jun",volume:1620,revenue:81e4,trips:62}],B=t>0?i/t:0,z=t>0?n/t:0,p=n>0?(n-T)/n*100:0,q=d.sort((R,l)=>l.revenue-R.revenue).slice(0,3);return{totalRecords:t,totalVolume:i,totalRevenue:n,totalPackagingCost:T,areaPerformance:d,monthlyTrends:E,avgVolumePerTrip:B,avgRevenuePerTrip:z,packagingEfficiency:p,topAreas:q}},[r]),h=(t,i)=>t>i?e.jsx(pe,{className:"h-4 w-4 text-green-500"}):t<i?e.jsx(Be,{className:"h-4 w-4 text-red-500"}):e.jsx(ge,{className:"h-4 w-4 text-gray-500"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive business intelligence and performance analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:C,onChange:t=>v(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green",children:[e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"}),e.jsx("option",{value:"1y",children:"Last Year"})]}),e.jsxs("select",{value:f,onChange:t=>o(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green",children:[e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"volume",children:"Volume"}),e.jsx("option",{value:"efficiency",children:"Efficiency"}),e.jsx("option",{value:"performance",children:"Performance"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:Y(g.totalRevenue)}),e.jsxs("div",{className:"flex items-center mt-2",children:[h(g.totalRevenue,g.totalRevenue*.9),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+12.5%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-900/20 flex-shrink-0",children:e.jsx(Ke,{className:"h-5 w-5 text-green-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Volume"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:[(g.totalVolume/1e3).toFixed(1),"K kg"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[h(g.totalVolume,g.totalVolume*.95),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+8.3%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900/20 flex-shrink-0",children:e.jsx(de,{className:"h-5 w-5 text-blue-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Trips"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:g.totalRecords}),e.jsxs("div",{className:"flex items-center mt-2",children:[h(g.totalRecords,g.totalRecords*.88),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+15.2%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-purple-100 dark:bg-purple-900/20 flex-shrink-0",children:e.jsx(fe,{className:"h-5 w-5 text-purple-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Efficiency"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:[g.packagingEfficiency.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[h(g.packagingEfficiency,g.packagingEfficiency*.98),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+2.1%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex-shrink-0",children:e.jsx(Te,{className:"h-5 w-5 text-yellow-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Monthly Trends"}),e.jsx(ye,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-4",children:g.monthlyTrends.map((t,i)=>{const n=Math.max(...g.monthlyTrends.map(d=>d.revenue)),T=t.revenue/n*100;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.month}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Y(t.revenue)})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-bright-green h-2 rounded-full transition-all duration-500",style:{width:`${T}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[t.volume,"kg"]}),e.jsxs("span",{children:[t.trips," trips"]})]})]},t.month)})})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Area Performance"}),e.jsx(be,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-4",children:g.areaPerformance.map((t,i)=>{const n=Math.max(...g.areaPerformance.map(d=>d.revenue)),T=n>0?t.revenue/n*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",t.code,")"]})]}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Y(t.revenue)})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${T}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[t.volume,"kg"]}),e.jsxs("span",{children:[(t.revenue/t.volume||0).toFixed(0),"/kg"]})]})]},t.code)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Average Metrics"}),e.jsx(ge,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Volume per Trip"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[g.avgVolumePerTrip.toFixed(1),"kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue per Trip"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Y(g.avgRevenuePerTrip)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Packaging Efficiency"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[g.packagingEfficiency.toFixed(1),"%"]})]})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Top Performers"}),e.jsx(pe,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-3",children:g.topAreas.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${i===0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":i===1?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200"}`,children:i+1}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.name})]}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Y(t.revenue)})]},t.code))})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Quick Insights"}),e.jsx(He,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Best performing area: ",(S=g.topAreas[0])==null?void 0:S.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue growth: +12.5% this month"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"h-4 w-4 text-purple-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Efficiency target: 95% (Current: ",g.packagingEfficiency.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monitor: AC004 performance below average"})]})]})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Real-time Activity"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"3"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Trips"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"7"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Pickups"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"12"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed Today"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"2"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alerts"})]})]})]})]})},Ka=()=>{const{sourceRecords:r,user:x}=le(),[C,v]=c.useState(30),[f,o]=c.useState(!0);if((x==null?void 0:x.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})});const g=[{id:"1",type:"warning",title:"High Memory Usage",description:"Server memory usage is at 85%. Consider optimizing or scaling.",timestamp:new Date(Date.now()-5*60*1e3).toISOString(),source:"Server Monitor",resolved:!1},{id:"2",type:"error",title:"Database Connection Timeout",description:"Failed to connect to primary database. Using backup connection.",timestamp:new Date(Date.now()-15*60*1e3).toISOString(),source:"Database Monitor",resolved:!0},{id:"3",type:"info",title:"Scheduled Maintenance",description:"System maintenance scheduled for tonight at 2:00 AM.",timestamp:new Date(Date.now()-2*60*60*1e3).toISOString(),source:"System Admin",resolved:!1},{id:"4",type:"success",title:"Backup Completed",description:"Daily backup completed successfully. 2.3GB backed up.",timestamp:new Date(Date.now()-4*60*60*1e3).toISOString(),source:"Backup Service",resolved:!0}],h=[{name:"CPU Usage",value:"45%",status:"healthy",trend:"stable",lastUpdated:new Date().toISOString()},{name:"Memory Usage",value:"78%",status:"warning",trend:"up",lastUpdated:new Date().toISOString()},{name:"Disk Space",value:"62%",status:"healthy",trend:"stable",lastUpdated:new Date().toISOString()},{name:"Database Connections",value:"23/100",status:"healthy",trend:"down",lastUpdated:new Date().toISOString()},{name:"Active Users",value:r.length>0?Math.floor(r.length*.3):0,status:"healthy",trend:"up",lastUpdated:new Date().toISOString()},{name:"API Response Time",value:"120ms",status:"healthy",trend:"stable",lastUpdated:new Date().toISOString()}],S=c.useMemo(()=>{const d=r.length,E=r.filter(q=>{const R=new Date(q.date),l=new Date;return R.toDateString()===l.toDateString()}).length,B=r.filter(q=>q.status==="in-transit").length,z=r.filter(q=>q.status==="loaded").length,p=r.filter(q=>q.status==="delivered").length;return{totalRecords:d,todayRecords:E,activeTrips:B,pendingPickups:z,completedToday:p}},[r]),t=d=>{switch(d){case"error":return e.jsx(re,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(re,{className:"h-4 w-4 text-yellow-500"});case"info":return e.jsx(ge,{className:"h-4 w-4 text-blue-500"});case"success":return e.jsx(ee,{className:"h-4 w-4 text-green-500"})}},i=d=>{switch(d){case"error":return"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20";case"warning":return"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-900/20";case"info":return"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20";case"success":return"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20"}},n=d=>{switch(d){case"healthy":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"warning":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";case"critical":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/20"}},T=d=>{switch(d){case"up":return e.jsx(pe,{className:"h-3 w-3 text-green-500"});case"down":return e.jsx(Be,{className:"h-3 w-3 text-red-500"});case"stable":return e.jsx(ge,{className:"h-3 w-3 text-gray-500"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"System Monitoring"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time system health monitoring and alerts"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500 animate-pulse":"bg-gray-400"}`}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Auto-refresh: ",f?"ON":"OFF"]})]}),e.jsxs("select",{value:C,onChange:d=>v(Number(d.target.value)),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm",children:[e.jsx("option",{value:10,children:"10s"}),e.jsx("option",{value:30,children:"30s"}),e.jsx("option",{value:60,children:"1m"}),e.jsx("option",{value:300,children:"5m"})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-2 px-3 py-1 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Status"}),e.jsx("p",{className:"text-xl font-bold text-green-600 truncate",children:"Healthy"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"All systems operational"})]}),e.jsx("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-900/20 flex-shrink-0",children:e.jsx(ee,{className:"h-5 w-5 text-green-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Alerts"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600 truncate",children:g.filter(d=>!d.resolved).length}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"Requires attention"})]}),e.jsx("div",{className:"p-2 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex-shrink-0",children:e.jsx(re,{className:"h-5 w-5 text-yellow-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Uptime"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:"99.9%"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"Last 30 days"})]}),e.jsx("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900/20 flex-shrink-0",children:e.jsx(Rt,{className:"h-5 w-5 text-blue-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Response Time"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:"120ms"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"Average"})]}),e.jsx("div",{className:"p-2 rounded-full bg-purple-100 dark:bg-purple-900/20 flex-shrink-0",children:e.jsx(He,{className:"h-5 w-5 text-purple-600"})})]})})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Metrics"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((d,E)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:d.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[T(d.trend),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n(d.status)}`,children:d.status})]})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:d.value}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated: ",ve(d.lastUpdated)]})]},E))})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Operational Metrics"}),e.jsx(ge,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(de,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.totalRecords}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Records"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(Se,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.todayRecords}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Records"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(fe,{className:"h-8 w-8 text-yellow-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.activeTrips}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Trips"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(be,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.pendingPickups}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Pickups"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(ee,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.completedToday}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed Today"})]})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Alerts"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.filter(d=>!d.resolved).length," unresolved"]}),e.jsx(je,{className:"h-5 w-5 text-gray-500"})]})]}),e.jsx("div",{className:"space-y-4",children:g.map(d=>e.jsx("div",{className:`p-4 border rounded-lg ${i(d.type)} ${d.resolved?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[t(d.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:d.title}),d.resolved&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200 rounded-full text-xs font-medium",children:"Resolved"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Source: ",d.source]}),e.jsxs("span",{children:["Time: ",ve(d.timestamp)]})]})]})]}),!d.resolved&&e.jsx("button",{className:"px-3 py-1 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:"Resolve"})]})},d.id))})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Performance Trends"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last 24 hours"})]})]}),e.jsx("div",{className:"h-64 bg-gray-50 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Performance chart would be displayed here"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Integration with monitoring tools like Grafana or custom charts"})]})})]})]})},Va=()=>{const{user:r}=le(),[x,C]=c.useState(!1),[v,f]=c.useState(null),[o,g]=c.useState(null),[h,S]=c.useState(!1),[t,i]=c.useState({search:"",type:"all",severity:"all",status:"all",dateRange:{start:"",end:""}}),[n,T]=c.useState([{id:"1",transportCode:"TRIP-001",sourceAreaCode:"AC001",destinationAreaCode:"AC005",driverName:"John Kimani",driverPhone:"+254 712 345678",vehicleReg:"KAA 123A",discrepancyType:"quantity",description:"Quantity mismatch between pickup and delivery",expectedValue:50,actualValue:47,discrepancyAmount:-3,severity:"medium",status:"investigating",reportedBy:"Sarah Mwangi",reportedAt:new Date(Date.now()-2*60*60*1e3).toISOString(),assignedTo:"Admin User",investigationNotes:"Driver claims no knowledge of missing goods. Checking CCTV footage."},{id:"2",transportCode:"TRIP-002",sourceAreaCode:"AC002",destinationAreaCode:"AC003",driverName:"Peter Wanjiku",driverPhone:"+254 723 456789",vehicleReg:"KBC 567B",discrepancyType:"condition",description:"Goods arrived in poor condition",expectedValue:"Good",actualValue:"Damaged",discrepancyAmount:0,severity:"high",status:"resolved",reportedBy:"Buyer Representative",reportedAt:new Date(Date.now()-6*60*60*1e3).toISOString(),assignedTo:"Admin User",investigationNotes:"Driver reported rough road conditions.",resolutionNotes:"Compensation provided to buyer. Driver warned about handling.",resolvedAt:new Date(Date.now()-1*60*60*1e3).toISOString(),resolvedBy:"Admin User"},{id:"3",transportCode:"TRIP-003",sourceAreaCode:"AC003",destinationAreaCode:"AC001",driverName:"Mary Njoki",driverPhone:"+254 734 567890",vehicleReg:"KAB 789C",discrepancyType:"time",description:"Delivery delayed by 3 hours",expectedValue:"14:00",actualValue:"17:00",discrepancyAmount:180,severity:"low",status:"pending",reportedBy:"Destination Manager",reportedAt:new Date(Date.now()-30*60*1e3).toISOString()}]),[d,E]=c.useState({transportCode:"",sourceAreaCode:"",destinationAreaCode:"",driverName:"",driverPhone:"",vehicleReg:"",discrepancyType:"quantity",description:"",expectedValue:"",actualValue:"",discrepancyAmount:0,severity:"medium",status:"pending",reportedBy:(r==null?void 0:r.name)||"",assignedTo:"",investigationNotes:"",resolutionNotes:"",resolvedAt:"",resolvedBy:""}),B=()=>{E({transportCode:"",sourceAreaCode:"",destinationAreaCode:"",driverName:"",driverPhone:"",vehicleReg:"",discrepancyType:"quantity",description:"",expectedValue:"",actualValue:"",discrepancyAmount:0,severity:"medium",status:"pending",reportedBy:(r==null?void 0:r.name)||"",assignedTo:"",investigationNotes:"",resolutionNotes:"",resolvedAt:"",resolvedBy:""}),f(null)},z=a=>{if(a){f(a);const{id:M,reportedAt:s,...N}=a;E(N)}else B();C(!0)},p=()=>{C(!1),B()},q=a=>{g(a),S(!0)},R=a=>{a.preventDefault();const M=new Date().toISOString(),s={...d,reportedAt:M};if(v)T(n.map(N=>N.id===v.id?{...s,id:v.id}:N));else{const N=Date.now().toString();T([...n,{...s,id:N}])}p()},l=a=>{window.confirm("Are you sure you want to delete this discrepancy report?")&&T(n.filter(M=>M.id!==a.id))},k=a=>{const M=new Date().toISOString();T(n.map(s=>s.id===a?{...s,status:"resolved",resolvedAt:M,resolvedBy:(r==null?void 0:r.name)||"Unknown"}:s))},m=c.useMemo(()=>n.filter(a=>{const M=t.search===""||a.transportCode.toLowerCase().includes(t.search.toLowerCase())||a.driverName.toLowerCase().includes(t.search.toLowerCase())||a.description.toLowerCase().includes(t.search.toLowerCase()),s=t.type==="all"||a.discrepancyType===t.type,N=t.severity==="all"||a.severity===t.severity,O=t.status==="all"||a.status===t.status,j=(t.dateRange.start===""||a.reportedAt>=t.dateRange.start)&&(t.dateRange.end===""||a.reportedAt<=t.dateRange.end);return M&&s&&N&&O&&j}),[n,t]),L=[{key:"transportCode",label:"Transport Code",sortable:!0},{key:"driverName",label:"Driver",render:(a,M)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a}),e.jsx("p",{className:"text-xs text-gray-500",children:M.vehicleReg})]}),sortable:!0},{key:"discrepancyType",label:"Type",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="quantity"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":a==="condition"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":a==="time"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200":a==="location"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"severity",label:"Severity",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":a==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200":a==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"status",label:"Status",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="resolved"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":a==="investigating"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":a==="pending"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"reportedAt",label:"Reported",render:a=>ve(a),sortable:!0}],y=c.useMemo(()=>{const a=n.length,M=n.filter(j=>j.status==="pending").length,s=n.filter(j=>j.status==="investigating").length,N=n.filter(j=>j.status==="resolved").length,O=n.filter(j=>j.severity==="critical").length;return{totalReports:a,pendingReports:M,investigatingReports:s,resolvedReports:N,criticalReports:O}},[n]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Discrepancy Reports"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track and manage discrepancies between pickup and delivery"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>z(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Report Discrepancy"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(Ie,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Reports"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:y.totalReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500",children:e.jsx(Se,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:y.pendingReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500",children:e.jsx(ge,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Investigating"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:y.investigatingReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:y.resolvedReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500",children:e.jsx(re,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Critical"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:y.criticalReports})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search reports...",value:t.search,onChange:a=>i({...t,search:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Type",value:t.type,onChange:a=>i({...t,type:a}),options:[{value:"all",label:"All Types"},{value:"quantity",label:"Quantity"},{value:"condition",label:"Condition"},{value:"time",label:"Time"},{value:"location",label:"Location"},{value:"other",label:"Other"}]}),e.jsx(U,{label:"Severity",value:t.severity,onChange:a=>i({...t,severity:a}),options:[{value:"all",label:"All Severity"},{value:"critical",label:"Critical"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]}),e.jsx(U,{label:"Status",value:t.status,onChange:a=>i({...t,status:a}),options:[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"investigating",label:"Investigating"},{value:"resolved",label:"Resolved"},{value:"dismissed",label:"Dismissed"}]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{label:"Start Date",type:"date",value:t.dateRange.start,onChange:a=>i({...t,dateRange:{...t.dateRange,start:a}})}),e.jsx(I,{label:"End Date",type:"date",value:t.dateRange.end,onChange:a=>i({...t,dateRange:{...t.dateRange,end:a}})})]})]})]}),e.jsx(w,{className:"p-6",children:e.jsx(ze,{data:m,columns:L,onEdit:z,onDelete:l,emptyMessage:"No discrepancy reports found.",actions:[{label:"View",icon:e.jsx(Fe,{className:"h-4 w-4"}),onClick:q},{label:"Resolve",icon:e.jsx(ee,{className:"h-4 w-4"}),onClick:a=>k(a.id),condition:a=>a.status!=="resolved"}]})}),e.jsx(ke,{isOpen:x,onClose:p,title:v?"Edit Discrepancy Report":"Report Discrepancy",size:"lg",children:e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Transport Code",type:"text",value:d.transportCode,onChange:a=>E({...d,transportCode:a}),required:!0}),e.jsx(U,{label:"Discrepancy Type",value:d.discrepancyType,onChange:a=>E({...d,discrepancyType:a}),options:[{value:"quantity",label:"Quantity Mismatch"},{value:"condition",label:"Condition Issue"},{value:"time",label:"Time Delay"},{value:"location",label:"Location Error"},{value:"other",label:"Other"}],required:!0}),e.jsx(I,{label:"Driver Name",type:"text",value:d.driverName,onChange:a=>E({...d,driverName:a}),required:!0}),e.jsx(I,{label:"Vehicle Registration",type:"text",value:d.vehicleReg,onChange:a=>E({...d,vehicleReg:a}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Discrepancy Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Expected Value",type:"text",value:d.expectedValue,onChange:a=>E({...d,expectedValue:a}),required:!0}),e.jsx(I,{label:"Actual Value",type:"text",value:d.actualValue,onChange:a=>E({...d,actualValue:a}),required:!0}),e.jsx(U,{label:"Severity",value:d.severity,onChange:a=>E({...d,severity:a}),options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],required:!0}),e.jsx(U,{label:"Status",value:d.status,onChange:a=>E({...d,status:a}),options:[{value:"pending",label:"Pending"},{value:"investigating",label:"Investigating"},{value:"resolved",label:"Resolved"},{value:"dismissed",label:"Dismissed"}],required:!0})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:a=>E({...d,description:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Describe the discrepancy in detail...",required:!0})]})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Investigation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{label:"Assigned To",type:"text",value:d.assignedTo||"",onChange:a=>E({...d,assignedTo:a})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Investigation Notes"}),e.jsx("textarea",{value:d.investigationNotes||"",onChange:a=>E({...d,investigationNotes:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Investigation findings and notes..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Resolution Notes"}),e.jsx("textarea",{value:d.resolutionNotes||"",onChange:a=>E({...d,resolutionNotes:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Resolution details and actions taken..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:v?"Update Report":"Create Report"})]})]})}),e.jsx(ke,{isOpen:h,onClose:()=>S(!1),title:"Discrepancy Report Details",size:"lg",children:o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Transport Code"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:o.transportCode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Driver"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:o.driverName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:o.vehicleReg})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 capitalize",children:o.discrepancyType})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:o.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:o.expectedValue})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Actual"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:o.actualValue})]})]}),o.investigationNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Investigation Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:o.investigationNotes})]}),o.resolutionNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Resolution Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:o.resolutionNotes})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Timeline"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reported"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:ve(o.reportedAt)})]}),o.resolvedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resolved"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:ve(o.resolvedAt)})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Close"}),o.status!=="resolved"&&e.jsx("button",{onClick:()=>{k(o.id),S(!1)},className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:"Mark Resolved"})]})]})})]})},za=()=>{var M;const{user:r,sourceRecords:x,transportLogs:C}=le(),{showSuccessNotification:v,showErrorNotification:f,showWarningNotification:o}=De(),[g,h]=c.useState("overview"),[S,t]=c.useState(!1),[i,n]=c.useState(!1),[T,d]=c.useState("config"),[E,B]=c.useState({maintenanceMode:!1,autoBackup:!0,backupFrequency:"daily",dataRetention:365,maxFileSize:10,systemLogs:!0,emailNotifications:!0,smsNotifications:!1,twoFactorAuth:!1,sessionTimeout:30}),[z,p]=c.useState([{id:"1",name:"Full Backup - 2024-01-20",size:"2.4 MB",createdAt:"2024-01-20 14:30:00",type:"full",status:"completed"},{id:"2",name:"Incremental Backup - 2024-01-19",size:"156 KB",createdAt:"2024-01-19 14:30:00",type:"incremental",status:"completed"},{id:"3",name:"Manual Backup - 2024-01-18",size:"1.8 MB",createdAt:"2024-01-18 10:15:00",type:"manual",status:"completed"}]),[q,R]=c.useState([{id:"1",userId:"admin",userName:"Admin User",role:"admin",loginTime:"2024-01-20 09:00:00",lastActivity:"2024-01-20 15:30:00",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",isActive:!0},{id:"2",userId:"user1",userName:"John Kimani",role:"user",loginTime:"2024-01-20 08:30:00",lastActivity:"2024-01-20 14:45:00",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Android 10; Mobile)",isActive:!0}]),l={totalUsers:12,activeUsers:q.filter(s=>s.isActive).length,totalRecords:x.length,systemUptime:"99.9%",storageUsed:"2.4 MB",lastBackup:((M=z[0])==null?void 0:M.createdAt)||"Never",systemLoad:"Low",memoryUsage:"45%",cpuUsage:"23%"};if((r==null?void 0:r.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs(w,{variant:"enhanced",className:"text-center p-8",children:[e.jsx(re,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This page is only accessible to administrators."})]})});const k=async(s,N)=>{t(!0);try{await new Promise(O=>setTimeout(O,1e3)),B(O=>({...O,[s]:N})),s==="maintenanceMode"?o(N?"Maintenance Mode Enabled":"Maintenance Mode Disabled",N?"System is now in maintenance mode. Users will see a maintenance page.":"System is now accessible to all users."):v("Configuration Updated","System configuration has been saved successfully.")}catch{f("Update Failed","Failed to update system configuration.")}finally{t(!1)}},m=async()=>{t(!0);try{await new Promise(N=>setTimeout(N,2e3));const s={id:Date.now().toString(),name:`Manual Backup - ${new Date().toLocaleDateString()}`,size:"1.2 MB",createdAt:new Date().toLocaleString(),type:"manual",status:"completed"};p(N=>[s,...N]),v("Backup Created","System backup has been created successfully."),n(!1)}catch{f("Backup Failed","Failed to create system backup.")}finally{t(!1)}},L=async s=>{t(!0);try{await new Promise(N=>setTimeout(N,500)),R(N=>N.filter(O=>O.id!==s)),v("Session Terminated","User session has been terminated successfully.")}catch{f("Termination Failed","Failed to terminate user session.")}finally{t(!1)}},y=async()=>{t(!0);try{const s={sourceRecords:x,transportLogs:C,systemConfig:E,backups:z,activeSessions:q,exportDate:new Date().toISOString(),version:"1.0"},N=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),O=URL.createObjectURL(N),j=document.createElement("a");j.href=O,j.download=`mwalimu-admin-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(O),v("Data Exported","System data has been exported successfully.")}catch{f("Export Failed","Failed to export system data.")}finally{t(!1)}},a=[{id:"overview",label:"Overview",icon:ye},{id:"users",label:"User Management",icon:Ve},{id:"system",label:"System Config",icon:he},{id:"backup",label:"Backup & Restore",icon:Pe},{id:"security",label:"Security",icon:je}];return e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Admin Controls"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"System administration and configuration management"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Online"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Uptime: ",l.systemUptime]})]})})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64",children:e.jsxs(w,{variant:"enhanced",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"System administration tools"})]}),e.jsx("nav",{className:"space-y-2",children:a.map(s=>e.jsxs("button",{onClick:()=>h(s.id),className:`flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-left transition-all duration-200 hover-lift ${g===s.id?"bg-gradient-to-r from-bright-green to-green-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(s.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.label})]},s.id))})]})}),e.jsxs("div",{className:"flex-1",children:[g==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.totalUsers})]}),e.jsx(Ve,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.activeUsers})]}),e.jsx(ge,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.totalRecords})]}),e.jsx(Pe,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.systemUptime})]}),e.jsx(Rt,{className:"h-8 w-8 text-orange-500"})]})})]}),e.jsxs(w,{variant:"enhanced",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"System Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"System Load"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.systemLoad})]})]})}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(gt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Memory Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.memoryUsage})]})]})}),e.jsx("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ge,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"CPU Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.cpuUsage})]})]})})]})]})]}),g==="users"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Active Sessions"}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add User"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Login Time"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Last Activity"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"IP Address"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:q.map(s=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.userName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.userId})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200"}`,children:s.role})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:s.loginTime}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:s.lastActivity}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:s.ipAddress}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>L(s.id),disabled:S,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 disabled:opacity-50",children:e.jsx(Oe,{className:"h-4 w-4"})})})]},s.id))})]})})]})}),g==="system"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"System Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable maintenance mode to restrict user access"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.maintenanceMode,onChange:s=>k("maintenanceMode",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Automatic Backup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable automatic system backups"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.autoBackup,onChange:s=>k("autoBackup",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Backup Frequency",value:E.backupFrequency,onChange:s=>k("backupFrequency",s),options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}]}),e.jsx(I,{label:"Data Retention (days)",type:"number",value:E.dataRetention.toString(),onChange:s=>k("dataRetention",parseInt(s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Session Timeout (minutes)",type:"number",value:E.sessionTimeout.toString(),onChange:s=>k("sessionTimeout",parseInt(s))}),e.jsx(I,{label:"Max File Size (MB)",type:"number",value:E.maxFileSize.toString(),onChange:s=>k("maxFileSize",parseInt(s))})]})]})]})}),g==="backup"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Backup Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{d("backup"),n(!0)},className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Backup"})]}),e.jsxs("button",{onClick:y,disabled:S,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Data"})]})]})]}),e.jsx("div",{className:"space-y-4",children:z.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="completed"?"bg-green-100 dark:bg-green-900/20":s.status==="failed"?"bg-red-100 dark:bg-red-900/20":"bg-yellow-100 dark:bg-yellow-900/20"}`,children:e.jsx(Pe,{className:`h-5 w-5 ${s.status==="completed"?"text-green-600":s.status==="failed"?"text-red-600":"text-yellow-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.size," â€¢ ",s.type," â€¢ ",s.createdAt]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":s.status==="failed"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:s.status}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(oe,{className:"h-4 w-4"})})]})]},s.id))})]})}),g==="security"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Security Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Require 2FA for all admin accounts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.twoFactorAuth,onChange:s=>k("twoFactorAuth",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"System Logging"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable detailed system activity logging"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.systemLogs,onChange:s=>k("systemLogs",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Send security alerts via email"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.emailNotifications,onChange:s=>k("emailNotifications",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})]})]})})]})]}),i&&e.jsx(ke,{isOpen:i,onClose:()=>n(!1),title:T==="backup"?"Create System Backup":"Add New User",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:T==="backup"?"Create System Backup":"Add New User"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx(Oe,{className:"h-5 w-5"})})]}),T==="backup"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This will create a complete backup of all system data including records, configurations, and user data."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"btn-outline",children:"Cancel"}),e.jsxs("button",{onClick:m,disabled:S,className:"btn-primary flex items-center space-x-2",children:[S?e.jsx(ue,{className:"h-4 w-4 animate-spin"}):e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:S?"Creating...":"Create Backup"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{label:"Username",type:"text",value:"",onChange:()=>{},required:!0}),e.jsx(I,{label:"Email",type:"email",value:"",onChange:()=>{},required:!0}),e.jsx(U,{label:"Role",value:"",onChange:()=>{},options:[{value:"user",label:"User"},{value:"admin",label:"Admin"}]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"btn-outline",children:"Cancel"}),e.jsx("button",{className:"btn-primary",children:"Add User"})]})]})]})})]})},Wa=()=>{const{user:r}=le(),[x,C]=c.useState(""),[v,f]=c.useState(""),[o,g]=c.useState(""),[h,S]=c.useState(""),[t,i]=c.useState([]),n=[{id:"1",timestamp:"2024-01-20 15:30:45",userId:"admin",userName:"Admin User",action:"CREATE",resource:"Source Record",details:"Created new pickup record for Area AC001 with 50kg miraa",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"medium"},{id:"2",timestamp:"2024-01-20 14:25:12",userId:"user1",userName:"John Kimani",action:"UPDATE",resource:"Transport Log",details:"Updated trip status from Loading to In Transit",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Android 10; Mobile)",status:"success",severity:"low"},{id:"3",timestamp:"2024-01-20 13:15:30",userId:"admin",userName:"Admin User",action:"DELETE",resource:"Destination Record",details:"Deleted destination record for Trip #TRN001",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"high"},{id:"4",timestamp:"2024-01-20 12:45:18",userId:"user2",userName:"Mary Wanjiku",action:"LOGIN",resource:"Authentication",details:"User logged in successfully",ipAddress:"192.168.1.102",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_0)",status:"success",severity:"low"},{id:"5",timestamp:"2024-01-20 11:30:55",userId:"unknown",userName:"Unknown User",action:"LOGIN",resource:"Authentication",details:"Failed login attempt with invalid credentials",ipAddress:"192.168.1.200",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"failed",severity:"critical"},{id:"6",timestamp:"2024-01-20 10:20:33",userId:"admin",userName:"Admin User",action:"CONFIG",resource:"System Settings",details:"Updated system configuration: enabled maintenance mode",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"high"},{id:"7",timestamp:"2024-01-20 09:15:42",userId:"user1",userName:"John Kimani",action:"VIEW",resource:"Profit Reports",details:"Viewed monthly profit analysis report",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Android 10; Mobile)",status:"success",severity:"low"},{id:"8",timestamp:"2024-01-20 08:45:27",userId:"admin",userName:"Admin User",action:"BACKUP",resource:"System Backup",details:"Created manual system backup",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"medium"}];if((r==null?void 0:r.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs(w,{variant:"enhanced",className:"text-center p-8",children:[e.jsx(re,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This page is only accessible to administrators."})]})});const T=c.useMemo(()=>n.filter(l=>{const k=x===""||l.userName.toLowerCase().includes(x.toLowerCase())||l.action.toLowerCase().includes(x.toLowerCase())||l.resource.toLowerCase().includes(x.toLowerCase())||l.details.toLowerCase().includes(x.toLowerCase()),m=v===""||l.status===v,L=o===""||l.severity===o,y=h===""||l.timestamp.startsWith(h);return k&&m&&L&&y}),[n,x,v,o,h]),d=c.useMemo(()=>{const l=n.length,k=n.filter(a=>a.status==="success").length,m=n.filter(a=>a.status==="failed").length,L=n.filter(a=>a.severity==="critical").length,y=n.filter(a=>a.timestamp.startsWith("2024-01-20")).length;return{totalLogs:l,successLogs:k,failedLogs:m,criticalLogs:L,todayLogs:y,successRate:l>0?Math.round(k/l*100):0}},[n]),E=l=>{switch(l){case"success":return e.jsx(ee,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(re,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(re,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(ge,{className:"h-4 w-4 text-gray-500"})}},B=l=>{switch(l){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}},z=l=>{switch(l){case"CREATE":return e.jsx(Ae,{className:"h-4 w-4 text-green-600"});case"UPDATE":return e.jsx(Mt,{className:"h-4 w-4 text-blue-600"});case"DELETE":return e.jsx(_e,{className:"h-4 w-4 text-red-600"});case"LOGIN":return e.jsx(Le,{className:"h-4 w-4 text-purple-600"});case"VIEW":return e.jsx(Fe,{className:"h-4 w-4 text-gray-600"});case"CONFIG":return e.jsx(he,{className:"h-4 w-4 text-orange-600"});case"BACKUP":return e.jsx(Pe,{className:"h-4 w-4 text-indigo-600"});default:return e.jsx(ge,{className:"h-4 w-4 text-gray-600"})}},p=l=>{i(k=>k.includes(l)?k.filter(m=>m!==l):[...k,l])},q=()=>{t.length===T.length?i([]):i(T.map(l=>l.id))},R=()=>{const k={auditLogs:t.length>0?T.filter(a=>t.includes(a.id)):T,exportDate:new Date().toISOString(),filters:{searchTerm:x,filterStatus:v,filterSeverity:o,filterDate:h}},m=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),L=URL.createObjectURL(m),y=document.createElement("a");y.href=L,y.download=`audit-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(L)};return e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Audit Logs"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"System activity tracking and compliance monitoring"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Logging Active"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[d.totalLogs," total entries"]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Logs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.totalLogs})]}),e.jsx(Ie,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[d.successRate,"%"]})]}),e.jsx(pe,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Failed Actions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.failedLogs})]}),e.jsx(re,{className:"h-8 w-8 text-red-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Critical Events"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.criticalLogs})]}),e.jsx(je,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Today's Activity"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.todayLogs})]}),e.jsx(Ge,{className:"h-8 w-8 text-purple-500"})]})})]}),e.jsx(w,{variant:"enhanced",className:"mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:x,onChange:l=>C(l.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 w-full"})]}),e.jsx(U,{label:"",value:v,onChange:l=>f(l),options:[{value:"",label:"All Status"},{value:"success",label:"Success"},{value:"failed",label:"Failed"},{value:"warning",label:"Warning"}],className:"w-full sm:w-40"}),e.jsx(U,{label:"",value:o,onChange:l=>g(l),options:[{value:"",label:"All Severity"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],className:"w-full sm:w-40"}),e.jsx(I,{label:"",type:"date",value:h,onChange:l=>S(l),className:"w-full sm:w-40"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:R,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:e.jsx("input",{type:"checkbox",checked:t.length===T.length&&T.length>0,onChange:q,className:"form-checkbox h-4 w-4 text-bright-green rounded"})}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Timestamp"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Action"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Resource"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Details"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Severity"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"IP Address"})]})}),e.jsx("tbody",{children:T.map(l=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",checked:t.includes(l.id),onChange:()=>p(l.id),className:"form-checkbox h-4 w-4 text-bright-green rounded"})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:l.timestamp})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.userName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.userId})]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[z(l.action),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.action})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:l.resource}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate",children:l.details}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[E(l.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="success"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":l.status==="failed"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:l.status})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B(l.severity)}`,children:l.severity})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:l.ipAddress})]},l.id))})]}),T.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ie,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No logs found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]})]})})]})},Ya=()=>{const{user:r}=le(),{showSuccessNotification:x}=De(),[C,v]=c.useState(!1),[f,o]=c.useState(null),[g,h]=c.useState({search:"",role:"all",status:"all",department:"all",accessLevel:"all"}),[S,t]=c.useState([{id:"1",staffId:"STF-001",name:"John Admin",email:"john.admin@mwalimu.com",phone:"+254 712 345678",role:"admin",department:"Management",status:"active",permissions:["all"],lastLogin:new Date(Date.now()-2*60*60*1e3).toISOString(),loginCount:156,accessLevel:"full",securityLevel:"high",twoFactorEnabled:!0,passwordExpiry:new Date(Date.now()+30*24*60*60*1e3).toISOString(),notes:"System administrator with full access"},{id:"2",staffId:"STF-002",name:"Mary Manager",email:"mary.manager@mwalimu.com",phone:"+254 723 456789",role:"manager",department:"Operations",status:"active",permissions:["read","write","approve"],lastLogin:new Date(Date.now()-1*60*60*1e3).toISOString(),loginCount:89,accessLevel:"limited",securityLevel:"medium",twoFactorEnabled:!1,passwordExpiry:new Date(Date.now()+15*24*60*60*1e3).toISOString(),notes:"Operations manager"},{id:"3",staffId:"STF-003",name:"Peter Driver",email:"peter.driver@mwalimu.com",phone:"+254 734 567890",role:"driver",department:"Transport",status:"active",permissions:["read"],lastLogin:new Date(Date.now()-30*60*1e3).toISOString(),loginCount:45,accessLevel:"readonly",securityLevel:"low",twoFactorEnabled:!1,passwordExpiry:new Date(Date.now()+7*24*60*60*1e3).toISOString(),notes:"Transport driver"},{id:"4",staffId:"STF-004",name:"Sarah Operator",email:"sarah.operator@mwalimu.com",phone:"+254 745 678901",role:"operator",department:"Data Entry",status:"suspended",permissions:["read","write"],lastLogin:new Date(Date.now()-24*60*60*1e3).toISOString(),loginCount:23,accessLevel:"limited",securityLevel:"medium",twoFactorEnabled:!0,notes:"Account suspended due to policy violation"}]),[i,n]=c.useState({name:"",email:"",phone:"",role:"operator",department:"",status:"pending",permissions:[],accessLevel:"readonly",securityLevel:"low",twoFactorEnabled:!1,notes:""}),T=()=>{n({name:"",email:"",phone:"",role:"operator",department:"",status:"pending",permissions:[],accessLevel:"readonly",securityLevel:"low",twoFactorEnabled:!1,notes:""}),o(null)},d=l=>{if(l){o(l);const{id:k,staffId:m,loginCount:L,...y}=l;n(y)}else T();v(!0)},E=()=>{v(!1),T()},B=l=>{l.preventDefault();const k={...i,loginCount:0};if(f)t(S.map(m=>m.id===f.id?{...k,id:f.id,staffId:f.staffId}:m)),x("Success","Staff member updated successfully!");else{const m=Date.now().toString(),L=`STF-${String(S.length+1).padStart(3,"0")}`;t([...S,{...k,id:m,staffId:L}]),x("Success","Staff member added successfully!")}E()},z=l=>{window.confirm(`Are you sure you want to delete staff member ${l.name}?`)&&(t(S.filter(k=>k.id!==l.id)),x("Success","Staff member deleted successfully!"))},p=c.useMemo(()=>S.filter(l=>{const k=g.search===""||l.name.toLowerCase().includes(g.search.toLowerCase())||l.email.toLowerCase().includes(g.search.toLowerCase())||l.staffId.toLowerCase().includes(g.search.toLowerCase()),m=g.role==="all"||l.role===g.role,L=g.status==="all"||l.status===g.status,y=g.department==="all"||l.department===g.department,a=g.accessLevel==="all"||l.accessLevel===g.accessLevel;return k&&m&&L&&y&&a}),[S,g]),q=[{key:"staffId",label:"Staff ID",sortable:!0},{key:"name",label:"Name",render:(l,k)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l}),e.jsx("p",{className:"text-xs text-gray-500",children:k.email})]}),sortable:!0},{key:"role",label:"Role",render:l=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l==="admin"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":l==="manager"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":l==="supervisor"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200":l==="operator"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:l.charAt(0).toUpperCase()+l.slice(1)}),sortable:!0},{key:"status",label:"Status",render:l=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":l==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":l==="inactive"?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:l.charAt(0).toUpperCase()+l.slice(1)}),sortable:!0},{key:"accessLevel",label:"Access Level",render:l=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l==="full"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":l==="limited"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200"}`,children:l.charAt(0).toUpperCase()+l.slice(1)}),sortable:!0},{key:"lastLogin",label:"Last Login",render:l=>l?new Date(l).toLocaleDateString():"Never",sortable:!0},{key:"twoFactorEnabled",label:"2FA",render:l=>e.jsx("div",{className:"flex items-center",children:l?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(ct,{className:"h-4 w-4 text-red-500"})}),sortable:!0}],R=c.useMemo(()=>{const l=S.length,k=S.filter(a=>a.status==="active").length,m=S.filter(a=>a.role==="admin").length,L=S.filter(a=>a.twoFactorEnabled).length,y=S.filter(a=>a.status==="suspended").length;return{totalStaff:l,activeStaff:k,adminStaff:m,twoFactorEnabled:L,suspendedStaff:y}},[S]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Staff Control"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive staff management and access control system"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>d(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Staff"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500 flex-shrink-0",children:e.jsx(Ve,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Staff"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:R.totalStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500 flex-shrink-0",children:e.jsx(lt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:R.activeStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500 flex-shrink-0",children:e.jsx(je,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Admins"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:R.adminStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500 flex-shrink-0",children:e.jsx(he,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"2FA Enabled"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:R.twoFactorEnabled})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500 flex-shrink-0",children:e.jsx(ca,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Suspended"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:R.suspendedStaff})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff...",value:g.search,onChange:l=>h({...g,search:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Role",value:g.role,onChange:l=>h({...g,role:l}),options:[{value:"all",label:"All Roles"},{value:"admin",label:"Admin"},{value:"manager",label:"Manager"},{value:"supervisor",label:"Supervisor"},{value:"operator",label:"Operator"},{value:"driver",label:"Driver"}]}),e.jsx(U,{label:"Status",value:g.status,onChange:l=>h({...g,status:l}),options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}]}),e.jsx(U,{label:"Department",value:g.department,onChange:l=>h({...g,department:l}),options:[{value:"all",label:"All Departments"},{value:"Management",label:"Management"},{value:"Operations",label:"Operations"},{value:"Transport",label:"Transport"},{value:"Data Entry",label:"Data Entry"}]}),e.jsx(U,{label:"Access Level",value:g.accessLevel,onChange:l=>h({...g,accessLevel:l}),options:[{value:"all",label:"All Levels"},{value:"full",label:"Full Access"},{value:"limited",label:"Limited Access"},{value:"readonly",label:"Read Only"}]})]})]}),e.jsx(w,{className:"p-6 overflow-x-auto",children:e.jsx(ze,{data:p,columns:q,onEdit:d,onDelete:z,emptyMessage:"No staff members found matching the current filters."})}),e.jsx(ke,{isOpen:C,onClose:E,title:f?"Edit Staff Member":"Add New Staff Member",size:"xl",children:e.jsx("div",{className:"max-h-[80vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(I,{label:"Full Name",type:"text",value:i.name,onChange:l=>n({...i,name:l}),required:!0}),e.jsx(I,{label:"Email",type:"email",value:i.email,onChange:l=>n({...i,email:l}),required:!0}),e.jsx(I,{label:"Phone",type:"tel",value:i.phone,onChange:l=>n({...i,phone:l}),required:!0}),e.jsx(I,{label:"Department",type:"text",value:i.department,onChange:l=>n({...i,department:l}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Role & Access Control"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Role",value:i.role,onChange:l=>n({...i,role:l}),options:[{value:"admin",label:"Administrator"},{value:"manager",label:"Manager"},{value:"supervisor",label:"Supervisor"},{value:"operator",label:"Operator"},{value:"driver",label:"Driver"}],required:!0}),e.jsx(U,{label:"Status",value:i.status,onChange:l=>n({...i,status:l}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}],required:!0}),e.jsx(U,{label:"Access Level",value:i.accessLevel,onChange:l=>n({...i,accessLevel:l}),options:[{value:"full",label:"Full Access"},{value:"limited",label:"Limited Access"},{value:"readonly",label:"Read Only"}],required:!0}),e.jsx(U,{label:"Security Level",value:i.securityLevel,onChange:l=>n({...i,securityLevel:l}),options:[{value:"high",label:"High Security"},{value:"medium",label:"Medium Security"},{value:"low",label:"Low Security"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Security Settings"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.twoFactorEnabled,onChange:l=>n({...i,twoFactorEnabled:l.target.checked}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Two-Factor Authentication"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:i.notes||"",onChange:l=>n({...i,notes:l.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Additional notes about this staff member..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:f?"Update Staff Member":"Create Staff Member"})]})]})})})]})},Ga=()=>{var L;const{user:r}=le(),{showSuccessNotification:x,showErrorNotification:C}=De(),[v,f]=c.useState(!1),[o,g]=c.useState(null),[h,S]=c.useState("general"),[t,i]=c.useState([{id:"1",category:"general",key:"app_name",label:"Application Name",description:"The name displayed in the application header",type:"string",value:"Mwalimu Transporters",required:!0,sensitive:!1,lastModified:new Date(Date.now()-7*24*60*60*1e3).toISOString(),modifiedBy:"admin"},{id:"2",category:"general",key:"timezone",label:"Default Timezone",description:"The default timezone for the application",type:"select",value:"Africa/Nairobi",options:[{value:"Africa/Nairobi",label:"Nairobi (EAT)"},{value:"Africa/Dar_es_Salaam",label:"Dar es Salaam (EAT)"},{value:"Africa/Kampala",label:"Kampala (EAT)"},{value:"UTC",label:"UTC"}],required:!0,sensitive:!1},{id:"3",category:"general",key:"language",label:"Default Language",description:"The default language for the application interface",type:"select",value:"en",options:[{value:"en",label:"English"},{value:"sw",label:"Swahili"},{value:"fr",label:"French"}],required:!0,sensitive:!1},{id:"4",category:"security",key:"password_min_length",label:"Minimum Password Length",description:"Minimum number of characters required for passwords",type:"number",value:8,required:!0,sensitive:!1},{id:"5",category:"security",key:"session_timeout",label:"Session Timeout (minutes)",description:"How long a user session remains active before requiring re-authentication",type:"number",value:30,required:!0,sensitive:!1},{id:"6",category:"security",key:"two_factor_required",label:"Require Two-Factor Authentication",description:"Force all users to enable two-factor authentication",type:"boolean",value:!1,required:!1,sensitive:!1},{id:"7",category:"security",key:"api_key",label:"API Secret Key",description:"Secret key used for API authentication",type:"password",value:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,sensitive:!0},{id:"8",category:"notifications",key:"email_notifications",label:"Email Notifications",description:"Enable email notifications for system events",type:"boolean",value:!0,required:!1,sensitive:!1},{id:"9",category:"notifications",key:"push_notifications",label:"Push Notifications",description:"Enable push notifications for mobile devices",type:"boolean",value:!0,required:!1,sensitive:!1},{id:"10",category:"notifications",key:"notification_sound",label:"Notification Sound",description:"Play sound when notifications are received",type:"boolean",value:!1,required:!1,sensitive:!1},{id:"11",category:"appearance",key:"theme",label:"Default Theme",description:"The default theme for new users",type:"select",value:"light",options:[{value:"light",label:"Light Theme"},{value:"dark",label:"Dark Theme"},{value:"auto",label:"Auto (System)"}],required:!0,sensitive:!1},{id:"12",category:"appearance",key:"primary_color",label:"Primary Color",description:"The primary color used throughout the application",type:"select",value:"green",options:[{value:"green",label:"Green"},{value:"blue",label:"Blue"},{value:"purple",label:"Purple"},{value:"red",label:"Red"}],required:!0,sensitive:!1},{id:"13",category:"system",key:"maintenance_mode",label:"Maintenance Mode",description:"Enable maintenance mode to restrict access to the system",type:"boolean",value:!1,required:!1,sensitive:!1},{id:"14",category:"system",key:"auto_backup",label:"Automatic Backup",description:"Enable automatic daily backups of system data",type:"boolean",value:!0,required:!1,sensitive:!1},{id:"15",category:"system",key:"log_level",label:"Log Level",description:"The level of detail in system logs",type:"select",value:"info",options:[{value:"debug",label:"Debug"},{value:"info",label:"Info"},{value:"warn",label:"Warning"},{value:"error",label:"Error"}],required:!0,sensitive:!1}]),[n,T]=c.useState({}),d=[{key:"general",label:"General",icon:he,color:"blue",description:"Basic application settings"},{key:"security",label:"Security",icon:je,color:"red",description:"Security and privacy settings"},{key:"notifications",label:"Notifications",icon:we,color:"emerald",description:"Notification preferences"},{key:"appearance",label:"Appearance",icon:it,color:"purple",description:"Theme and visual settings"},{key:"system",label:"System",icon:Pe,color:"lime",description:"System configuration"}],E=c.useMemo(()=>t.filter(y=>y.category===h),[t,h]),B=y=>{y?(g(y),T(y)):(g(null),T({})),f(!0)},z=()=>{f(!1),g(null),T({})},p=y=>{y.preventDefault(),o&&(i(t.map(a=>a.id===o.id?{...a,value:n.value,lastModified:new Date().toISOString(),modifiedBy:(r==null?void 0:r.name)||"admin"}:a)),x("Success","Setting updated successfully!")),z()},q=y=>{window.confirm(`Reset "${y.label}" to default value?`)&&x("Success",`"${y.label}" reset to default value`)},R=()=>{x("Success","All settings saved successfully!")},l=()=>{const y=JSON.stringify(t,null,2),a=new Blob([y],{type:"application/json"}),M=URL.createObjectURL(a),s=document.createElement("a");s.href=M,s.download="system-settings.json",s.click(),URL.revokeObjectURL(M),x("Success","Settings exported successfully!")},k=()=>{const y=document.createElement("input");y.type="file",y.accept=".json",y.onchange=a=>{var s;const M=(s=a.target.files)==null?void 0:s[0];if(M){const N=new FileReader;N.onload=O=>{var j;try{const F=JSON.parse((j=O.target)==null?void 0:j.result);i(F),x("Success","Settings imported successfully!")}catch{C("Error","Invalid settings file format")}},N.readAsText(M)}},y.click()},m=y=>{var a;switch(y.type){case"boolean":return e.jsxs("div",{className:"flex items-center",children:[y.value?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(ct,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:y.value?"Enabled":"Disabled"})]});case"password":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(nt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:y.value})]});case"select":const M=(a=y.options)==null?void 0:a.find(s=>s.value===y.value);return e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(M==null?void 0:M.label)||y.value});default:return e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.value})}};return e.jsxs("div",{className:"space-y-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-purple",children:"Settings & Configuration"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your application preferences and system configuration"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[E.length," settings in ",(L=d.find(y=>y.key===h))==null?void 0:L.label]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:k,className:"btn-blue flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Import"]}),e.jsxs("button",{onClick:l,className:"btn-emerald flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]}),e.jsxs("button",{onClick:R,className:"btn-purple flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Save All"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:d.map(y=>{const a=y.icon,M=h===y.key,s=t.filter(N=>N.category===y.key).length;return e.jsx(w,{variant:M?y.color:"default",className:`p-4 cursor-pointer transition-all duration-200 hover-lift ${M?"ring-2 ring-opacity-50":""}`,onClick:()=>S(y.key),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`p-3 rounded-xl mx-auto mb-3 ${M?`gradient-${y.color}`:"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(a,{className:`h-6 w-6 mx-auto ${M?"text-white":"text-gray-600 dark:text-gray-400"}`})}),e.jsx("h3",{className:`font-semibold mb-1 ${M?`text-gradient-${y.color}`:"text-gray-900 dark:text-gray-100"}`,children:y.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:y.description}),e.jsxs("div",{className:`text-sm font-medium ${M?`text-gradient-${y.color}`:"text-gray-600 dark:text-gray-400"}`,children:[s," settings"]})]})},y.key)})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:E.map(y=>e.jsxs(w,{variant:"glass",className:"p-6 hover-lift",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:y.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.required&&e.jsxs("span",{className:"text-xs bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200 px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),"Required"]}),y.sensitive&&e.jsxs("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(nt,{className:"h-3 w-3"}),"Sensitive"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:y.description})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:m(y)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>B(y),className:"btn-blue text-xs flex items-center gap-1",children:[e.jsx(he,{className:"h-3 w-3"}),"Edit"]}),e.jsxs("button",{onClick:()=>q(y),className:"btn-lime text-xs flex items-center gap-1",children:[e.jsx(ue,{className:"h-3 w-3"}),"Reset"]})]})]})}),y.lastModified&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"h-3 w-3"}),e.jsxs("span",{children:["Modified ",new Date(y.lastModified).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"h-3 w-3"}),e.jsxs("span",{children:["by ",y.modifiedBy]})]})]})]},y.id))}),e.jsx(ke,{isOpen:v,onClose:z,title:o?`Edit ${o.label}`:"Add New Setting",size:"lg",type:"default",icon:e.jsx(he,{className:"h-6 w-6"}),children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ce,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Setting Information"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:o.description})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Value"}),o.type==="boolean"?e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:n.value||!1,onChange:y=>T({...n,value:y.target.checked}),className:"h-5 w-5 text-emerald-600 rounded border-gray-300 focus:ring-emerald-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.value?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(ct,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n.value?"Enabled":"Disabled"})]})]}):o.type==="select"?e.jsx(U,{label:"Value",value:n.value||"",onChange:y=>T({...n,value:y}),options:o.options||[]}):o.type==="password"?e.jsx("div",{className:"relative",children:e.jsx(I,{label:"Password",type:"password",value:n.value||"",onChange:y=>T({...n,value:y}),placeholder:"Enter new password"})}):e.jsx(I,{label:"Value",type:o.type==="number"?"number":"text",value:n.value||"",onChange:y=>T({...n,value:y})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:z,className:"btn-blue",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-emerald",children:"Save Changes"})]})]})})]})};function Qa(){return e.jsx(Na,{children:e.jsx(ka,{children:e.jsx($t,{children:e.jsxs(Kt,{children:[e.jsx(ie,{path:"/login",element:e.jsx(Ta,{})}),e.jsx(ie,{path:"/dashboard",element:e.jsx(me,{children:e.jsx(xe,{title:"Dashboard",subtitle:"Overview of your transport operations",children:e.jsx(Ea,{})})})}),e.jsx(ie,{path:"/source-records",element:e.jsx(me,{children:e.jsx(xe,{title:"Source Records",subtitle:"Manage pickup records and goods received",children:e.jsx(Ra,{})})})}),e.jsx(ie,{path:"/transport-log",element:e.jsx(me,{children:e.jsx(xe,{title:"Transport Log",subtitle:"Track vehicles, drivers, and deliveries",children:e.jsx(Ia,{})})})}),e.jsx(ie,{path:"/destination-records",element:e.jsx(me,{children:e.jsx(xe,{title:"Destination Records",subtitle:"Record deliveries and buyer information",children:e.jsx(Ba,{})})})}),e.jsx(ie,{path:"/profit-reports",element:e.jsx(me,{children:e.jsx(xe,{title:"Profit Reports",subtitle:"Financial analysis and performance metrics",children:e.jsx(La,{})})})}),e.jsx(ie,{path:"/area-performance",element:e.jsx(me,{children:e.jsx(xe,{title:"Area Performance",subtitle:"Pickup point analytics and statistics",children:e.jsx(Oa,{})})})}),e.jsx(ie,{path:"/buyers",element:e.jsx(me,{children:e.jsx(xe,{title:"Buyers Management",subtitle:"Customer database and relationship management",children:e.jsx(Ua,{})})})}),e.jsx(ie,{path:"/staff",element:e.jsx(me,{children:e.jsx(xe,{title:"Staff Management",subtitle:"Driver and employee administration",children:e.jsx(qa,{})})})}),e.jsx(ie,{path:"/settings",element:e.jsx(me,{children:e.jsx(xe,{title:"Settings",subtitle:"Configure your account and preferences",children:e.jsx(Fa,{})})})}),e.jsx(ie,{path:"/analytics",element:e.jsx(me,{children:e.jsx(xe,{title:"Analytics Dashboard",subtitle:"Business intelligence and insights",children:e.jsx($a,{})})})}),e.jsx(ie,{path:"/monitoring",element:e.jsx(me,{children:e.jsx(xe,{title:"System Monitoring",subtitle:"Real-time system health and alerts",children:e.jsx(Ka,{})})})}),e.jsx(ie,{path:"/discrepancies",element:e.jsx(me,{children:e.jsx(xe,{title:"Discrepancy Reports",subtitle:"Track delivery issues and problems",children:e.jsx(Va,{})})})}),e.jsx(ie,{path:"/admin-controls",element:e.jsx(me,{children:e.jsx(xe,{title:"Admin Controls",subtitle:"System administration and configuration",children:e.jsx(za,{})})})}),e.jsx(ie,{path:"/audit-logs",element:e.jsx(me,{children:e.jsx(xe,{title:"Audit Logs",subtitle:"Activity tracking and compliance monitoring",children:e.jsx(Wa,{})})})}),e.jsx(ie,{path:"/staff-control",element:e.jsx(me,{children:e.jsx(xe,{title:"Staff Control",subtitle:"Staff management and access control system",children:e.jsx(Ya,{})})})}),e.jsx(ie,{path:"/settings-card",element:e.jsx(me,{children:e.jsx(xe,{title:"Settings Card",subtitle:"System configuration and application settings",children:e.jsx(Ga,{})})})}),e.jsx(ie,{path:"/",element:e.jsx(at,{to:"/dashboard",replace:!0})}),e.jsx(ie,{path:"*",element:e.jsx(at,{to:"/dashboard",replace:!0})})]})})})})}ot.createRoot(document.getElementById("root")).render(e.jsx(Ft.StrictMode,{children:e.jsx(Qa,{})}));
