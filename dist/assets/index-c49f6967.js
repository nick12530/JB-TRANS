import{r as x,a as Ft,b as Bt}from"./vendor-b69f2a9f.js";import{u as Ut,a as xt,N as at,B as $t,R as Vt,b as ne}from"./router-bda2d4b7.js";import{c as ie}from"./utils-75920557.js";import{T as fe,P as de,S as ue,A as zt,L as Kt,M as be,B as ye,a as pe,b as Wt,c as me,d as re,U as ze,e as ut,f as je,F as Ee,g as we,X as Oe,C as ee,h as _e,I as Ce,i as Ne,j as Ae,k as gt,l as St,m as Ie,n as Qt,D as Ve,o as De,p as Se,q as Gt,R as he,r as st,s as Yt,K as _t,H as Ht,t as oe,u as pt,v as Re,w as Fe,x as Ge,y as Ze,z as Jt,E as Be,G as At,V as Dt,J as Zt,N as mt,O as Le,W as rt,Q as Xt,Y as Xe,Z as Rt,_ as Pt,$ as yt,a0 as bt,a1 as Tt,a2 as ea,a3 as ta,a4 as qe,a5 as ft,a6 as He,a7 as lt,a8 as jt,a9 as nt,aa,ab as Qe,ac as sa,ad as it,ae as ra,af as la,ag as na,ah as dt,ai as ia,aj as da,ak as Mt,al as ca,am as ct}from"./icons-3ed7b2f4.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))N(f);new MutationObserver(f=>{for(const c of f)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&N(m)}).observe(document,{childList:!0,subtree:!0});function C(f){const c={};return f.integrity&&(c.integrity=f.integrity),f.referrerPolicy&&(c.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?c.credentials="include":f.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function N(f){if(f.ep)return;f.ep=!0;const c=C(f);fetch(f.href,c)}})();var Et={exports:{}},Je={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=x,xa=Symbol.for("react.element"),ga=Symbol.for("react.fragment"),ma=Object.prototype.hasOwnProperty,ha=oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ua={key:!0,ref:!0,__self:!0,__source:!0};function Lt(r,o,C){var N,f={},c=null,m=null;C!==void 0&&(c=""+C),o.key!==void 0&&(c=""+o.key),o.ref!==void 0&&(m=o.ref);for(N in o)ma.call(o,N)&&!ua.hasOwnProperty(N)&&(f[N]=o[N]);if(r&&r.defaultProps)for(N in o=r.defaultProps,o)f[N]===void 0&&(f[N]=o[N]);return{$$typeof:xa,type:r,key:c,ref:m,props:f,_owner:ha.current}}Je.Fragment=ga;Je.jsx=Lt;Je.jsxs=Lt;Et.exports=Je;var e=Et.exports,ot={},vt=Ft;ot.createRoot=vt.createRoot,ot.hydrateRoot=vt.hydrateRoot;const It=x.createContext(null),pa=({children:r})=>{const[o,C]=x.useState(null),[N,f]=x.useState(!1),[c,m]=x.useState(!1),[u,S]=x.useState([]),[t,n]=x.useState([]),[i,D]=x.useState([]),[d,R]=x.useState([]),[q,K]=x.useState([]),[p,F]=x.useState([]);return x.useEffect(()=>{const T=localStorage.getItem("theme");T&&m(T==="dark")},[]),x.useEffect(()=>{document.documentElement.classList.toggle("dark",c),localStorage.setItem("theme",c?"dark":"light")},[c]),e.jsx(It.Provider,{value:{user:o,setUser:C,isAuthenticated:N,setIsAuthenticated:f,isDark:c,setIsDark:m,sourceRecords:u,setSourceRecords:S,pickupRecords:t,setPickupRecords:n,deliveryRecords:i,setDeliveryRecords:D,destinationRecords:d,setDestinationRecords:R,transportLogs:q,setTransportLogs:K,profitRecords:p,setProfitRecords:F},children:r})},le=()=>{const r=x.useContext(It);if(!r)throw new Error("useApp must be used within an AppProvider");return r},qt=x.createContext(void 0),ht=()=>{const r=x.useContext(qt);if(!r)throw new Error("useNotifications must be used within a NotificationsProvider");return r},ya=({children:r})=>{const[o,C]=x.useState([]);x.useEffect(()=>{const n=localStorage.getItem("mwalimu-notifications");if(n)try{const D=JSON.parse(n).map(d=>({...d,timestamp:new Date(d.timestamp)}));C(D)}catch(i){console.error("Failed to load notifications:",i)}},[]),x.useEffect(()=>{localStorage.setItem("mwalimu-notifications",JSON.stringify(o))},[o]);const N=x.useCallback(n=>{const i={...n,id:`notification-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,read:!1};C(D=>[i,...D]),n.type!=="error"&&setTimeout(()=>{C(D=>D.filter(d=>d.id!==i.id))},1e4)},[]),f=x.useCallback(n=>{C(i=>i.map(D=>D.id===n?{...D,read:!0}:D))},[]),c=x.useCallback(()=>{C(n=>n.map(i=>({...i,read:!0})))},[]),m=x.useCallback(n=>{C(i=>i.filter(D=>D.id!==n))},[]),u=x.useCallback(()=>{C([])},[]),S=o.filter(n=>!n.read).length,t={notifications:o,unreadCount:S,addNotification:N,markAsRead:f,markAllAsRead:c,removeNotification:m,clearAllNotifications:u};return e.jsx(qt.Provider,{value:t,children:r})},Ot=({size:r="md",showText:o=!0,className:C=""})=>{const N={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"},f={sm:"text-sm",md:"text-lg",lg:"text-2xl"};return e.jsxs("div",{className:`flex items-center space-x-2 ${C}`,children:[e.jsx("div",{className:`${N[r]} bg-gradient-to-br from-bright-green to-green-600 rounded-lg flex items-center justify-center shadow-lg`,children:e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:`${r==="sm"?"h-3 w-3":r==="md"?"h-4 w-4":"h-6 w-6"} text-white`}),e.jsx(de,{className:`${r==="sm"?"h-2 w-2":r==="md"?"h-2.5 w-2.5":"h-3 w-3"} text-white absolute -top-1 -right-1`})]})}),o&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`${f[r]} font-bold text-gray-900 dark:text-gray-100`,children:"Mwalimu"}),e.jsx("span",{className:`${r==="sm"?"text-xs":r==="md"?"text-sm":"text-base"} font-medium text-bright-green`,children:"Transporters"})]})]})},ba=[{icon:Kt,label:"Dashboard",path:"/dashboard",adminOnly:!1},{icon:de,label:"Source Records",path:"/source-records",adminOnly:!1},{icon:fe,label:"Transport Log",path:"/transport-log",adminOnly:!1},{icon:be,label:"Destination Records",path:"/destination-records",adminOnly:!1},{icon:ye,label:"Analytics Dashboard",path:"/analytics",adminOnly:!0},{icon:pe,label:"Performance Reports",path:"/profit-reports",adminOnly:!0},{icon:Wt,label:"Area Performance",path:"/area-performance",adminOnly:!0},{icon:me,label:"System Monitoring",path:"/monitoring",adminOnly:!0},{icon:re,label:"Discrepancy Reports",path:"/discrepancies",adminOnly:!0},{icon:ze,label:"Buyers Management",path:"/buyers",adminOnly:!0},{icon:ut,label:"Staff Management",path:"/staff",adminOnly:!0},{icon:je,label:"Admin Controls",path:"/admin-controls",adminOnly:!0},{icon:Ee,label:"Audit Logs",path:"/audit-logs",adminOnly:!0},{icon:ut,label:"Staff Control",path:"/staff-control",adminOnly:!0,isCard:!0},{icon:ue,label:"Settings Card",path:"/settings-card",adminOnly:!1,isCard:!0}],fa=()=>{const r=Ut(),o=xt(),{user:C}=le(),N=ie("w-64 glass-sidebar px-6 py-4 fixed left-0 top-0 bottom-0 h-screen transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0","[&.mobile-closed]:transform [&.mobile-closed]:-translate-x-full lg:[&.mobile-closed]:translate-x-0",!C&&"translate-x-full lg:translate-x-0");return e.jsx("aside",{className:N,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"mb-8 flex-shrink-0",children:e.jsx(Ot,{size:"lg",className:"justify-center"})}),e.jsx("nav",{className:"flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:hover:scrollbar-thumb-gray-500",children:ba.map(({icon:f,label:c,path:m,adminOnly:u,isCard:S})=>{if(u&&(C==null?void 0:C.role)!=="admin")return null;const t=r.pathname===m;return e.jsxs("button",{onClick:()=>o(m),className:ie("flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-left transition-colors hover-lift",S?"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30":"",t?"bg-gradient-to-r from-bright-green to-green-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx(f,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:c}),S&&e.jsx("span",{className:"ml-auto text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full flex-shrink-0",children:"Card"})]},m)})}),e.jsxs("div",{className:"mt-auto space-y-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>o("/settings"),className:"flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover-lift",children:[e.jsx(ue,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Settings"})]}),C&&e.jsxs("button",{onClick:()=>o("/login"),className:"flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover-lift",children:[e.jsx(zt,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})})};function Q(r){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(r)}function ve(r){return new Date(r).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"})}const ja=({isOpen:r,onClose:o})=>{const{notifications:C,unreadCount:N,markAsRead:f,markAllAsRead:c,removeNotification:m}=ht(),u=x.useRef(null);x.useEffect(()=>{const n=i=>{u.current&&!u.current.contains(i.target)&&o()};return r&&document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[r,o]);const S=n=>{switch(n){case"success":return e.jsx(ee,{className:"h-4 w-4 text-green-600"});case"warning":return e.jsx(re,{className:"h-4 w-4 text-yellow-600"});case"error":return e.jsx(Ne,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Ce,{className:"h-4 w-4 text-blue-600"})}},t=n=>{switch(n){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}};return r?e.jsxs("div",{ref:u,className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-[9999]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Notifications"}),N>0&&e.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs rounded-full",children:N})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[N>0&&e.jsx("button",{onClick:c,className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Mark all read"}),e.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Oe,{className:"h-4 w-4 text-gray-500"})})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:C.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No notifications"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"You're all caught up!"})]}):e.jsx("div",{className:"p-2",children:C.map(n=>e.jsx("div",{className:`p-3 rounded-lg border mb-2 transition-all duration-200 hover:shadow-md ${n.read?"bg-gray-50 dark:bg-gray-700/50":t(n.type)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:S(n.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${n.read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:n.title}),e.jsx("p",{className:`text-sm mt-1 ${n.read?"text-gray-500 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:n.message}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:ve(n.timestamp.toISOString())})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!n.read&&e.jsx("button",{onClick:()=>f(n.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Mark as read",children:e.jsx(ee,{className:"h-3 w-3 text-gray-400"})}),e.jsx("button",{onClick:()=>m(n.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Remove notification",children:e.jsx(_e,{className:"h-3 w-3 text-gray-400"})})]})]}),n.action&&e.jsxs("button",{onClick:n.action.onClick,className:"mt-2 text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:[n.action.label," →"]})]})]})},n.id))})}),C.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50 rounded-b-xl",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:[C.length," notification",C.length!==1?"s":""," total"]})})]}):null},Pe=()=>{const{addNotification:r}=ht(),o=(m,u,S)=>{r({type:"success",title:m,message:u,action:S})},C=(m,u,S)=>{r({type:"error",title:m,message:u,action:S})},N=(m,u,S)=>{r({type:"warning",title:m,message:u,action:S})},f=(m,u,S)=>{r({type:"info",title:m,message:u,action:S})};return{showSuccessNotification:o,showErrorNotification:C,showWarningNotification:N,showInfoNotification:f,addSampleNotifications:()=>{o("New Record Added","Successfully added pickup record for Area AC001 with 50kg of goods.",{label:"View Record",onClick:()=>console.log("Navigate to record")}),N("Low Stock Alert","Area AC002 is running low on miraa stock. Consider restocking soon.",{label:"Check Stock",onClick:()=>console.log("Navigate to stock")}),C("Delivery Failed","Delivery to Nairobi CBD failed due to vehicle breakdown. Driver John Kimani needs assistance.",{label:"View Details",onClick:()=>console.log("Navigate to delivery details")}),f("System Update","New features have been added to the dashboard. Check out the enhanced analytics section.",{label:"Learn More",onClick:()=>console.log("Navigate to help")})}}},va=({title:r,subtitle:o,showNotifications:C=!0,showUserMenu:N=!0})=>{const{user:f,isDark:c,setIsDark:m}=le(),{unreadCount:u}=ht(),{addSampleNotifications:S}=Pe(),[t,n]=x.useState(!1),[i,D]=x.useState(!1),d=()=>{localStorage.removeItem("mwalimu-user"),localStorage.removeItem("mwalimu-auth"),window.location.href="/login"},R=()=>{S()},q=()=>{m(!c)};return e.jsx("header",{className:"glass-sidebar border-b border-white/20 dark:border-gray-700/50 shadow-sm relative z-10",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(Ot,{size:"md"}),r&&e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r}),o&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[C&&e.jsx("button",{onClick:R,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Add sample notifications (demo)",children:e.jsx(Ae,{className:"h-4 w-4"})}),C&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!t),className:"relative p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:[e.jsx(we,{className:"h-5 w-5"}),u>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full text-xs text-white flex items-center justify-center text-[10px]",children:u>9?"9+":u})]}),e.jsx(ja,{isOpen:t,onClose:()=>n(!1)})]}),e.jsx("button",{onClick:q,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:c?"Switch to light mode":"Switch to dark mode",children:c?e.jsx(gt,{className:"h-5 w-5"}):e.jsx(St,{className:"h-5 w-5"})}),N&&f&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:f.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:f.role})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>D(!i),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-bright-green to-green-600 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"h-4 w-4 text-white"})})}),i&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>{D(!1),window.location.href="/settings"},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(ue,{className:"h-4 w-4 mr-3"}),"Settings"]}),e.jsxs("button",{onClick:()=>{D(!1),console.log("Profile clicked")},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Ie,{className:"h-4 w-4 mr-3"}),"Profile"]}),e.jsx("hr",{className:"my-2 border-gray-200 dark:border-gray-700"}),e.jsxs("button",{onClick:()=>{D(!1),d()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx(Qt,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})})]})]})]})]})})})},xe=({children:r,title:o,subtitle:C})=>e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(fa,{}),e.jsxs("div",{className:"flex-1 flex flex-col ml-64 lg:ml-0",children:[e.jsx(va,{title:o,subtitle:C}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-7xl",children:e.jsx("div",{className:"space-y-6",children:r})})})]})]}),ge=({children:r})=>{const{isAuthenticated:o}=le();return o?e.jsx(e.Fragment,{children:r}):e.jsx(at,{to:"/login",replace:!0})},Na=()=>{const[r,o]=x.useState("user"),C=xt(),{setUser:N,setIsAuthenticated:f}=le(),c=m=>{m.preventDefault(),N({id:"1",name:r==="admin"?"Admin User":"Regular User",email:r==="admin"?"admin@mwalimu.com":"user@mwalimu.com",role:r}),f(!0),C("/dashboard")};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:'url("/login-bg.jpg")'},children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-bright-green to-miraa-green p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"🚛"})}),e.jsx("h1",{className:"text-2xl font-extrabold text-white mb-2",children:"Mwalimu Transporters"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Miraa Transport Management System"})]}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700"}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 text-center mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Select your role to continue"})]}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Access Role"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("label",{className:`relative flex p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ${r==="user"?"border-bright-green bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("input",{type:"radio",name:"role",value:"user",checked:r==="user",onChange:m=>o(m.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r==="user"?"border-bright-green":"border-gray-300 dark:border-gray-500"}`,children:r==="user"&&e.jsx("div",{className:"w-2 h-2 bg-bright-green rounded-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"User Portal"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record daily activities"})]})]}),e.jsx("div",{className:`ml-auto ${r==="user"?"text-bright-green":"text-gray-400"}`,children:"👤"})]}),e.jsxs("label",{className:`relative flex p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ${r==="admin"?"border-bright-green bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("input",{type:"radio",name:"role",value:"admin",checked:r==="admin",onChange:m=>o(m.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r==="admin"?"border-bright-green":"border-gray-300 dark:border-gray-500"}`,children:r==="admin"&&e.jsx("div",{className:"w-2 h-2 bg-bright-green rounded-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Admin Portal"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage all records"})]})]}),e.jsx("div",{className:`ml-auto ${r==="admin"?"text-bright-green":"text-gray-400"}`,children:"⚙️"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Ready to continue?"})})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-bright-green to-miraa-green text-white font-semibold py-3 px-6 rounded-xl hover:from-miraa-green hover:to-bright-green focus:outline-none focus:ring-2 focus:ring-bright-green focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Access Portal →"})]}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 mt-6"}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Demo Mode • Select role to access portal"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"System Online"})]})]})]})]})})})},w=({children:r,className:o,onClick:C,padding:N="md",variant:f="default"})=>{const c={none:"",sm:"p-4",md:"p-6",lg:"p-8"},m={default:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm",enhanced:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200",outlined:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",elevated:"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700",glass:"glass-card hover:bg-white/90 dark:hover:bg-gray-800/90 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",gradient:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 border border-gray-200/50 dark:border-gray-700/50 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",neon:"bg-white dark:bg-gray-800 border border-bright-green/20 dark:border-bright-green/30 rounded-xl shadow-lg hover:shadow-bright-green/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",blue:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-800 dark:to-gray-900 border border-blue-200 dark:border-blue-700 rounded-xl shadow-lg hover:shadow-blue-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",green:"bg-gradient-to-br from-green-50 to-green-100 dark:from-gray-800 dark:to-gray-900 border border-green-200 dark:border-green-700 rounded-xl shadow-lg hover:shadow-green-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",red:"bg-gradient-to-br from-red-50 to-red-100 dark:from-gray-800 dark:to-gray-900 border border-red-200 dark:border-red-700 rounded-xl shadow-lg hover:shadow-red-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",purple:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-gray-800 dark:to-gray-900 border border-purple-200 dark:border-purple-700 rounded-xl shadow-lg hover:shadow-purple-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",emerald:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-gray-800 dark:to-gray-900 border border-emerald-200 dark:border-emerald-700 rounded-xl shadow-lg hover:shadow-emerald-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",teal:"bg-gradient-to-br from-teal-50 to-teal-100 dark:from-gray-800 dark:to-gray-900 border border-teal-200 dark:border-teal-700 rounded-xl shadow-lg hover:shadow-teal-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",lime:"bg-gradient-to-br from-lime-50 to-lime-100 dark:from-gray-800 dark:to-gray-900 border border-lime-200 dark:border-lime-700 rounded-xl shadow-lg hover:shadow-lime-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",forest:"bg-gradient-to-br from-green-50 to-green-100 dark:from-gray-800 dark:to-gray-900 border border-green-200 dark:border-green-700 rounded-xl shadow-lg hover:shadow-green-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5",mint:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-900 border border-green-200 dark:border-green-700 rounded-xl shadow-lg hover:shadow-green-500/20 hover:shadow-xl transition-all duration-300 hover:-translate-y-0.5"};return e.jsx("div",{className:ie(m[f],c[N],"transition-all duration-200","overflow-hidden",C&&"cursor-pointer hover:shadow-lg hover:-translate-y-px",o),onClick:C,children:r})},ka=()=>{const{sourceRecords:r,user:o}=le(),{showSuccessNotification:C}=Pe(),N=xt(),[f,c]=x.useState("overview"),[m,u]=x.useState(!1),[S]=x.useState(!0),[t,n]=x.useState(new Date),[i,D]=x.useState({cpu:45,memory:67,storage:23,network:89}),[d,R]=x.useState([]),[q,K]=x.useState([{id:"1",type:"success",message:"New record added successfully",time:"2m ago",read:!1},{id:"2",type:"warning",message:"Low stock alert for Area AC001",time:"15m ago",read:!1},{id:"3",type:"info",message:"System backup completed",time:"1h ago",read:!0},{id:"4",type:"error",message:"Failed to sync with server",time:"2h ago",read:!0}]);x.useEffect(()=>{const s=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(s)},[]),x.useEffect(()=>{const s=setInterval(()=>{D(v=>({cpu:Math.max(20,Math.min(80,v.cpu+(Math.random()-.5)*10)),memory:Math.max(30,Math.min(90,v.memory+(Math.random()-.5)*8)),storage:Math.max(10,Math.min(50,v.storage+(Math.random()-.5)*5)),network:Math.max(70,Math.min(100,v.network+(Math.random()-.5)*6))}))},5e3);return()=>clearInterval(s)},[]);const p={totalRecords:r.length,totalGoodsIn:r.reduce((s,v)=>s+v.quantitySold,0),totalCost:r.reduce((s,v)=>s+v.totalCost,0),totalPackagingCost:r.reduce((s,v)=>s+(v.totalPackagingCost||0),0)},F=[{point:"AC001",records:r.filter(s=>s.areaCode==="AC001").length,goods:r.filter(s=>s.areaCode==="AC001").reduce((s,v)=>s+v.quantitySold,0)},{point:"AC002",records:r.filter(s=>s.areaCode==="AC002").length,goods:r.filter(s=>s.areaCode==="AC002").reduce((s,v)=>s+v.quantitySold,0)},{point:"AC003",records:r.filter(s=>s.areaCode==="AC003").length,goods:r.filter(s=>s.areaCode==="AC003").reduce((s,v)=>s+v.quantitySold,0)},{point:"AC004",records:r.filter(s=>s.areaCode==="AC004").length,goods:r.filter(s=>s.areaCode==="AC004").reduce((s,v)=>s+v.quantitySold,0)}],T=(o==null?void 0:o.role)==="admin"?[{title:"Total Records",value:p.totalRecords.toString(),icon:Ee,color:"gradient-blue",textColor:"text-gradient-blue",trend:"+12%",trendColor:"text-blue-600",description:"Records this month",bgPattern:"from-blue-400/20 to-blue-600/20"},{title:"Total Goods In",value:`${p.totalGoodsIn}kg`,icon:de,color:"gradient-emerald",textColor:"text-gradient-emerald",trend:"+8%",trendColor:"text-green-600",description:"Goods processed",bgPattern:"from-emerald-400/20 to-emerald-600/20"},{title:"Total Investment",value:Q(p.totalCost),icon:Ve,color:"gradient-purple",textColor:"text-gradient-purple",trend:"+15%",trendColor:"text-purple-600",description:"Total capital",bgPattern:"from-purple-400/20 to-purple-600/20"},{title:"Packaging Costs",value:Q(p.totalPackagingCost),icon:de,color:"gradient-red",textColor:"text-gradient-red",trend:"+5%",trendColor:"text-red-600",description:"Packaging expenses",bgPattern:"from-red-400/20 to-red-600/20"}]:[{title:"My Records",value:p.totalRecords.toString(),icon:Ee,color:"gradient-teal",textColor:"text-gradient-teal",trend:"+12%",trendColor:"text-blue-600",description:"Records this month",bgPattern:"from-teal-400/20 to-teal-600/20"},{title:"Goods Processed",value:`${p.totalGoodsIn}kg`,icon:de,color:"gradient-lime",textColor:"text-gradient-lime",trend:"+8%",trendColor:"text-green-600",description:"Goods processed",bgPattern:"from-lime-400/20 to-lime-600/20"},{title:"Total Value",value:Q(p.totalCost),icon:Ve,color:"gradient-green-purple",textColor:"text-gradient-green-purple",trend:"+15%",trendColor:"text-purple-600",description:"Total value",bgPattern:"from-green-400/20 to-purple-400/20"},{title:"Efficiency",value:"92%",icon:De,color:"gradient-mint",textColor:"text-gradient-mint",trend:"+3%",trendColor:"text-orange-600",description:"Performance score",bgPattern:"from-mint-400/20 to-mint-600/20"}],l=[{id:"1",type:"record",action:"Added new source record",time:"2 minutes ago",icon:de,color:"text-green-600",user:"John Doe",details:"AC001 - 50kg miraa"},{id:"2",type:"transport",action:"Updated transport log",time:"15 minutes ago",icon:fe,color:"text-blue-600",user:"Jane Smith",details:"Trip TR-001 completed"},{id:"3",type:"destination",action:"Recorded delivery",time:"1 hour ago",icon:be,color:"text-purple-600",user:"Bob Johnson",details:"Nairobi delivery"},{id:"4",type:"system",action:"System backup completed",time:"2 hours ago",icon:je,color:"text-gray-600",user:"System",details:"Daily backup"},{id:"5",type:"alert",action:"Low stock alert",time:"3 hours ago",icon:Ne,color:"text-yellow-600",user:"System",details:"Area AC002"}],k=[{title:"Record Goods In",description:"Add new source records",icon:de,color:"gradient-emerald",textColor:"text-gradient-emerald",action:()=>N("/source-records"),shortcut:"Ctrl+N",category:"primary",badge:"New",bgPattern:"from-emerald-400/20 to-emerald-600/20"},{title:"Track Transport",description:"Update transport logs",icon:fe,color:"gradient-blue",textColor:"text-gradient-blue",action:()=>N("/transport-log"),shortcut:"Ctrl+T",category:"primary",badge:"Active",bgPattern:"from-blue-400/20 to-blue-600/20"},{title:"Record Delivery",description:"Log destination records",icon:be,color:"gradient-purple",textColor:"text-gradient-purple",action:()=>N("/destination-records"),shortcut:"Ctrl+D",category:"primary",badge:"Hot",bgPattern:"from-purple-400/20 to-purple-600/20"},{title:"View Reports",description:"Check performance metrics",icon:ye,color:"gradient-red",textColor:"text-gradient-red",action:()=>N("/profit-reports"),shortcut:"Ctrl+R",category:"secondary",badge:null,bgPattern:"from-red-400/20 to-red-600/20"},{title:"Search Records",description:"Find specific records",icon:Re,color:"gradient-teal",textColor:"text-gradient-teal",action:()=>C("Info","Search functionality coming soon"),shortcut:"Ctrl+F",category:"secondary",badge:null,bgPattern:"from-teal-400/20 to-teal-600/20"},{title:"Export Data",description:"Download records",icon:oe,color:"gradient-lime",textColor:"text-gradient-lime",action:()=>C("Info","Export functionality coming soon"),shortcut:"Ctrl+E",category:"secondary",badge:null,bgPattern:"from-lime-400/20 to-lime-600/20"}],g=async()=>{u(!0);try{await new Promise(s=>setTimeout(s,1e3)),C("Success","Dashboard refreshed successfully")}finally{u(!1)}},I=async s=>{try{await new Promise(v=>setTimeout(v,2e3)),C("Success",`${s.toUpperCase()} export completed`)}catch{C("Error",`Failed to export ${s.toUpperCase()}`)}},b=s=>{R(v=>v.includes(s)?v.filter(O=>O!==s):[...v,s])},a=s=>{K(v=>v.map(O=>O.id===s?{...O,read:!0}:O))},E=q.filter(s=>!s.read).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-blue-50 via-green-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${S?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:S?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Se,{className:"h-4 w-4"}),t.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[E," notifications"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"85%"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gradient-blue-green",children:["Welcome back, ",(o==null?void 0:o.name)||"User","! 👋"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Here's what's happening with your miraa transport operations today"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",t.toLocaleString()]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["System Status: ",e.jsx("span",{className:"text-green-600 font-medium",children:"Healthy"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:g,disabled:m,className:"btn-glass flex items-center gap-2 hover:bg-green-50 dark:hover:bg-green-900/20",children:[e.jsx(he,{className:`h-4 w-4 ${m?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>c("overview"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="overview"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Overview"}),e.jsx("button",{onClick:()=>c("activities"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="activities"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Activities"}),e.jsx("button",{onClick:()=>c("analytics"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="analytics"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Analytics"}),e.jsx("button",{onClick:()=>c("tools"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="tools"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Tools"}),e.jsxs("button",{onClick:()=>c("notifications"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 relative ${f==="notifications"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:["Notifications",E>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:E})]}),e.jsx("button",{onClick:()=>c("settings"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${f==="settings"?"btn-emerald text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Settings"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((s,v)=>e.jsxs(w,{variant:"glass",className:"group cursor-pointer hover-lift relative overflow-hidden",children:[e.jsxs("div",{className:`absolute inset-0 bg-gradient-to-br ${s.bgPattern} opacity-30`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-white/20 to-transparent rounded-full -translate-y-10 translate-x-10"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-tr from-white/20 to-transparent rounded-full translate-y-8 -translate-x-8"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${s.color} group-hover:scale-110 transition-transform duration-200 shadow-lg`,children:e.jsx(s.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(st,{className:"h-4 w-4 text-gray-400 hover:text-yellow-500"})}),e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:s.title}),e.jsx("p",{className:`text-2xl font-bold ${s.textColor}`,children:s.value}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.description})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:`flex items-center text-sm ${s.trendColor}`,children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),s.trend]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"vs last week"})]})]})]},v))}),f==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{variant:"blue",className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Access your most used features"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"Use shortcuts for faster access"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map((s,v)=>e.jsxs("button",{onClick:s.action,className:`group p-6 rounded-xl border transition-all duration-200 hover:-translate-y-1 text-left relative overflow-hidden ${s.category==="primary"?"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-gray-200 dark:border-gray-700 hover:shadow-lg":"bg-gradient-to-br from-gray-50/50 to-gray-100/50 dark:from-gray-800/50 dark:to-gray-900/50 border-gray-200/50 dark:border-gray-700/50 hover:shadow-md"}`,children:[e.jsxs("div",{className:`absolute inset-0 bg-gradient-to-br ${s.bgPattern} opacity-20`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-white/30 to-transparent rounded-full -translate-y-8 translate-x-8"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-gradient-to-tr from-white/20 to-transparent rounded-full translate-y-6 -translate-x-6"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.color} group-hover:scale-110 transition-transform duration-200 shadow-lg`,children:e.jsx(s.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.badge&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${s.badge==="New"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":s.badge==="Active"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":s.badge==="Hot"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:s.badge}),e.jsx("div",{className:"text-xs text-gray-500 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded",children:s.shortcut}),e.jsx("button",{onClick:O=>{O.stopPropagation(),b(s.title)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(Ht,{className:`h-4 w-4 ${d.includes(s.title)?"text-red-500 fill-current":"text-gray-400"}`})})]})]}),e.jsx("h4",{className:`font-semibold ${s.textColor} mb-1`,children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.description})]})]},v))})]}),e.jsxs(w,{variant:"purple",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-bright-green hover:text-green-600 font-medium",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:e.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.time})]})]},s.id))})]})]}),f==="activities"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Activity Timeline"}),e.jsx("div",{className:"space-y-4",children:l.map((s,v)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-r ${k[v%k.length].color} flex items-center justify-center`,children:e.jsx(s.icon,{className:"h-4 w-4 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.time})]})]},s.id))})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(De,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Efficiency Rate"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall performance"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"92%"}),e.jsx("p",{className:"text-xs text-green-600",children:"+5% this week"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Se,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Avg. Processing Time"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Per record"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"4.2m"}),e.jsx("p",{className:"text-xs text-blue-600",children:"-0.3m improvement"})]})]})]})]})]}),f==="analytics"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Pickup Point Performance"}),e.jsx("div",{className:"space-y-4",children:F.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-bright-green to-green-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:s.point})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Area ",s.point]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.records," records"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[s.goods,"kg"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"total goods"})]})]},s.point))})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Data Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Records This Month"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-300",children:"+12%"})]}),e.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"75%"}})})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Goods Processed"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-300",children:"+8%"})]}),e.jsx("div",{className:"w-full bg-green-200 dark:bg-green-800 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"60%"}})})]})]})]})]}),f==="tools"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(oe,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Export Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export your records in various formats"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>I("csv"),className:"w-full btn-blue text-left flex items-center",children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),e.jsxs("button",{onClick:()=>I("excel"),className:"w-full btn-emerald text-left flex items-center",children:[e.jsx(pt,{className:"h-4 w-4 mr-2"}),"Export as Excel"]}),e.jsxs("button",{onClick:()=>I("pdf"),className:"w-full btn-purple text-left flex items-center",children:[e.jsx(pt,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(Re,{className:"h-5 w-5 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Search & Filter"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Find specific records quickly"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>N("/source-records"),className:"w-full btn-teal text-left flex items-center",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Advanced Filters"]}),e.jsxs("button",{onClick:()=>c("analytics"),className:"w-full btn-lime text-left flex items-center",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Date Range Search"]}),e.jsxs("button",{onClick:()=>N("/destination-records"),className:"w-full btn-purple text-left flex items-center",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Location Search"]})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(ue,{className:"h-5 w-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Tools"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Manage your account and preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>N("/settings-card"),className:"w-full btn-blue text-left flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Profile Settings"]}),e.jsxs("button",{onClick:()=>c("notifications"),className:"w-full btn-emerald text-left flex items-center",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Notifications"]}),e.jsxs("button",{onClick:()=>N("/settings-card"),className:"w-full btn-red text-left flex items-center",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Security"]})]})]})]}),(o==null?void 0:o.role)==="user"&&e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Your Actions"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Quick access to your daily tasks"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>N("/source-records"),className:"group p-6 border-2 border-bright-green border-dashed rounded-xl hover:bg-green-50 dark:hover:bg-green-900/20 transition-all duration-200 hover:-translate-y-1 text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-bright-green to-green-600 rounded-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Source Records"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record goods received"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-bright-green",children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Get Started"]})]}),e.jsxs("button",{onClick:()=>N("/transport-log"),className:"group p-6 border-2 border-blue-500 border-dashed rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200 hover:-translate-y-1 text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(fe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Transport Log"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track vehicles and drivers"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Track Now"]})]}),e.jsxs("button",{onClick:()=>N("/destination-records"),className:"group p-6 border-2 border-purple-500 border-dashed rounded-xl hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-200 hover:-translate-y-1 text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Destination Records"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record deliveries"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-purple-600",children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Record Delivery"]})]})]})]}),f==="notifications"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{variant:"glass",className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Stay updated with system alerts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{q.forEach(s=>a(s.id)),C("Success","All notifications marked as read")},className:"btn-blue text-sm",children:"Mark All Read"}),e.jsxs("button",{onClick:()=>c("settings"),className:"btn-emerald text-sm flex items-center gap-1",children:[e.jsx(ue,{className:"h-4 w-4"}),"Settings"]})]})]}),e.jsx("div",{className:"space-y-4",children:q.map(s=>e.jsx("div",{className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${s.read?"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${s.type==="success"?"bg-green-100 dark:bg-green-900/20":s.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/20":s.type==="error"?"bg-red-100 dark:bg-red-900/20":"bg-blue-100 dark:bg-blue-900/20"}`,children:[s.type==="success"&&e.jsx(Jt,{className:"h-4 w-4 text-green-600"}),s.type==="warning"&&e.jsx(Ne,{className:"h-4 w-4 text-yellow-600"}),s.type==="error"&&e.jsx(Oe,{className:"h-4 w-4 text-red-600"}),s.type==="info"&&e.jsx(Ce,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.read&&e.jsx("button",{onClick:()=>a(s.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(Be,{className:"h-4 w-4 text-gray-400"})}),e.jsx("button",{className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(_e,{className:"h-4 w-4 text-gray-400"})})]})]})},s.id))})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(we,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive real-time alerts"})]})]}),e.jsx("button",{onClick:()=>C("Success","Push notifications toggled"),className:"w-12 h-6 bg-emerald-500 rounded-full relative transition-colors",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(At,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Daily summaries"})]})]}),e.jsx("button",{onClick:()=>C("Success","Email notifications toggled"),className:"w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full relative transition-colors",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5 transition-transform"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Dt,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Sound Alerts"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Audio notifications"})]})]}),e.jsx("button",{onClick:()=>C("Success","Sound alerts toggled"),className:"w-12 h-6 bg-emerald-500 rounded-full relative transition-colors",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5 transition-transform"})})]})]})]})]}),f==="settings"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"System Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Zt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"CPU Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Processing power"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[i.cpu.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${i.cpu}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(mt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Memory Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"RAM utilization"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[i.memory.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${i.memory}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:e.jsx(Le,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Storage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Disk space"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[i.storage.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${i.storage}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:e.jsx(rt,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Network"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Connection speed"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[i.network.toFixed(0),"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${i.network}%`}})})]})]})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"User Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(gt,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Dark Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toggle theme"})]})]}),e.jsx("button",{className:"w-12 h-6 bg-gray-300 dark:bg-gray-600 rounded-full relative",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Xt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Language"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"English (US)"})]})]}),e.jsx(Xe,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Se,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Timezone"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"EAT (UTC+3)"})]})]}),e.jsx(Xe,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Currency"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kenyan Shilling (KES)"})]})]}),e.jsx(Xe,{className:"h-4 w-4 text-gray-400"})]})]})]})]})]})},M=({label:r,type:o="text",value:C,onChange:N,error:f,success:c,info:m,required:u=!1,placeholder:S,disabled:t=!1,className:n,min:i,max:D,step:d,pattern:R,maxLength:q,minLength:K,autoComplete:p,autoFocus:F=!1,readOnly:T=!1,showPasswordToggle:l=!1,leftIcon:k,rightIcon:g,validation:I,onBlur:b,onFocus:a,onKeyDown:E})=>{const[s,v]=x.useState(!1),[O,j]=x.useState(!1),[B,G]=x.useState(null),Z=x.useRef(null),W=V=>{const _=o==="number"?Number(V.target.value):V.target.value;if(N(_),I){const se=X(V.target.value,I);G(se)}},X=(V,_)=>_.required&&!V.trim()?"This field is required":_.min&&V.length<_.min?`Minimum length is ${_.min} characters`:_.max&&V.length>_.max?`Maximum length is ${_.max} characters`:_.pattern&&!_.pattern.test(V)?"Invalid format":_.custom?_.custom(V):null,H=()=>{j(!0),a==null||a()},ce=()=>{j(!1),b==null||b()},A=()=>o==="password"&&l?s?"text":"password":o,h=()=>f||B?e.jsx(Ne,{className:"h-4 w-4 text-red-500"}):c?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):m?e.jsx(Ce,{className:"h-4 w-4 text-blue-500"}):null,P=()=>f||B?"border-red-500 focus:ring-red-500 focus:border-red-500":c?"border-green-500 focus:ring-green-500 focus:border-green-500":O?"border-bright-green focus:ring-bright-green focus:border-bright-green":"border-gray-300 dark:border-gray-600 focus:ring-bright-green focus:border-bright-green";return e.jsxs("div",{className:`space-y-2 ${n}`,children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-1",children:[e.jsx("span",{children:r}),u&&e.jsx("span",{className:"text-red-500",children:"*"}),m&&e.jsx(Ce,{className:"h-3 w-3 text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[k&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-700 dark:text-blue-400",children:k}),e.jsx("input",{ref:Z,type:A(),value:C,onChange:W,onFocus:H,onBlur:ce,onKeyDown:E,placeholder:S,disabled:t,readOnly:T,autoFocus:F,autoComplete:p,min:i,max:D,step:d,pattern:R,maxLength:q,minLength:K,className:ie("w-full px-3 py-3 rounded-lg transition-all duration-200","bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-opacity-50",P(),k&&"pl-10",(g||l||h())&&"pr-10",t&&"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800",T&&"bg-gray-50 dark:bg-gray-800 cursor-default",f||B?"border-red-500":"border-gray-300 dark:border-gray-600")}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[h(),g&&e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:g}),l&&o==="password"&&e.jsx("button",{type:"button",onClick:()=>v(!s),className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s?e.jsx(Rt,{className:"h-4 w-4"}):e.jsx(Be,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[(f||B)&&e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center space-x-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsx("span",{children:f||B})]}),c&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center space-x-1",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:c})]}),m&&!f&&!B&&e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center space-x-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),e.jsx("span",{children:m})]})]}),q&&typeof C=="string"&&e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:ie("text-xs",C.length>q*.9?"text-red-500":"text-gray-500 dark:text-gray-400"),children:[C.length,"/",q]})})]})},U=({label:r,value:o,onChange:C,options:N,error:f,success:c,info:m,required:u=!1,placeholder:S="Select an option...",disabled:t=!1,className:n,searchable:i=!1,clearable:D=!1,multiple:d=!1,loading:R=!1,emptyMessage:q="No options available",leftIcon:K,rightIcon:p,onSearch:F,onCreate:T,validation:l})=>{const[k,g]=x.useState(!1),[I,b]=x.useState(""),[a,E]=x.useState(!1),[s,v]=x.useState(null),O=x.useRef(null),j=x.useRef(null),B=N.filter(P=>P.label.toLowerCase().includes(I.toLowerCase())||P.value.toLowerCase().includes(I.toLowerCase())),G=N.find(P=>P.value===o),Z=d?N.filter(P=>o.split(",").includes(P.value)):[G].filter(Boolean);x.useEffect(()=>{const P=V=>{O.current&&!O.current.contains(V.target)&&(g(!1),b(""))};return k&&document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[k]),x.useEffect(()=>{k&&i&&j.current&&j.current.focus()},[k,i]);const W=P=>{if(d){const V=o?o.split(","):[],_=V.includes(P)?V.filter(se=>se!==P):[...V,P];C(_.join(","))}else C(P),g(!1),b("")},X=P=>{P.stopPropagation(),C(""),v(null)},H=P=>{b(P),F==null||F(P)},ce=()=>{I&&T&&(T(I),b(""))},A=()=>f||s?e.jsx(Ne,{className:"h-4 w-4 text-red-500"}):c?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):m?e.jsx(Ce,{className:"h-4 w-4 text-blue-500"}):null,h=()=>f||s?"border-red-500 focus:ring-red-500 focus:border-red-500":c?"border-green-500 focus:ring-green-500 focus:border-green-500":a||k?"border-bright-green focus:ring-bright-green focus:border-bright-green":"border-gray-300 dark:border-gray-600 focus:ring-bright-green focus:border-bright-green";return e.jsxs("div",{className:`space-y-2 ${n}`,children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-1",children:[e.jsx("span",{children:r}),u&&e.jsx("span",{className:"text-red-500",children:"*"}),m&&e.jsx(Ce,{className:"h-3 w-3 text-gray-400"})]}),e.jsxs("div",{className:"relative",ref:O,children:[e.jsxs("button",{type:"button",onClick:()=>!t&&g(!k),onFocus:()=>E(!0),onBlur:()=>E(!1),disabled:t,className:ie("w-full px-3 py-3 rounded-lg transition-all duration-200","bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-opacity-50","flex items-center justify-between",h(),K&&"pl-10",(p||D||A())&&"pr-10",t&&"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800",f||s?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[K&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-700 dark:text-blue-400",children:K}),e.jsx("div",{className:"flex-1 text-left",children:d?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Z.map(P=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-bright-green text-white text-xs rounded-md",children:[P==null?void 0:P.label,e.jsx("button",{onClick:V=>{V.stopPropagation(),W((P==null?void 0:P.value)||"")},className:"ml-1 hover:bg-green-600 rounded-full p-0.5",children:e.jsx(Oe,{className:"h-2 w-2"})})]},P==null?void 0:P.value)),Z.length===0&&e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:S})]}):e.jsx("span",{className:G?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:G?G.label:S})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[A(),p&&e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:p}),D&&o&&e.jsx("button",{onClick:X,className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(Pt,{className:ie("h-4 w-4 text-gray-600 dark:text-gray-400 transition-transform duration-200",k&&"rotate-180")})]})]}),k&&e.jsxs("div",{className:"absolute z-[9999] w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-hidden",children:[i&&e.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{ref:j,type:"text",value:I,onChange:P=>H(P.target.value),placeholder:"Search options...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:R?e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-bright-green mx-auto"}),e.jsx("p",{className:"mt-2 text-sm",children:"Loading..."})]}):B.length>0?B.map(P=>e.jsxs("button",{onClick:()=>!P.disabled&&W(P.value),disabled:P.disabled,className:ie("w-full px-3 py-2 text-left text-sm transition-colors","hover:bg-gray-100 dark:hover:bg-gray-700","flex items-center space-x-3",P.disabled&&"opacity-50 cursor-not-allowed",d&&o.split(",").includes(P.value)&&"bg-bright-green text-white hover:bg-green-600",!d&&o===P.value&&"bg-bright-green text-white hover:bg-green-600"),children:[P.icon&&e.jsx("span",{className:"flex-shrink-0",children:P.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:P.label}),P.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:P.description})]}),!d&&o===P.value&&e.jsx(ee,{className:"h-4 w-4 flex-shrink-0"})]},P.value)):e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("p",{className:"text-sm",children:q}),I&&T&&e.jsxs("button",{onClick:ce,className:"mt-2 text-sm text-bright-green hover:text-green-600 font-medium",children:['Create "',I,'"']})]})})]})]}),e.jsxs("div",{className:"space-y-1",children:[(f||s)&&e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center space-x-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsx("span",{children:f||s})]}),c&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center space-x-1",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:c})]}),m&&!f&&!s&&e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center space-x-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),e.jsx("span",{children:m})]})]})]})},ke=({isOpen:r,onClose:o,title:C,children:N,size:f="md",type:c="default",icon:m})=>{if(!r)return null;const u={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"},S={default:{headerBg:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",borderColor:"border-gray-200 dark:border-gray-700",iconColor:"text-gray-600 dark:text-gray-400",titleColor:"text-gray-900 dark:text-gray-100"},success:{headerBg:"bg-gradient-to-r from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20",borderColor:"border-emerald-200 dark:border-emerald-700",iconColor:"text-emerald-600 dark:text-emerald-400",titleColor:"text-emerald-900 dark:text-emerald-100"},warning:{headerBg:"bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20",borderColor:"border-yellow-200 dark:border-yellow-700",iconColor:"text-yellow-600 dark:text-yellow-400",titleColor:"text-yellow-900 dark:text-yellow-100"},error:{headerBg:"bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20",borderColor:"border-red-200 dark:border-red-700",iconColor:"text-red-600 dark:text-red-400",titleColor:"text-red-900 dark:text-red-100"},info:{headerBg:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",borderColor:"border-blue-200 dark:border-blue-700",iconColor:"text-blue-600 dark:text-blue-400",titleColor:"text-blue-900 dark:text-blue-100"}},t={default:e.jsx(ue,{className:"h-6 w-6"}),success:e.jsx(ee,{className:"h-6 w-6"}),warning:e.jsx(Ne,{className:"h-6 w-6"}),error:e.jsx(Ne,{className:"h-6 w-6"}),info:e.jsx(Ce,{className:"h-6 w-6"})},n=S[c],i=m||t[c];return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:o}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:ie("relative inline-block align-bottom bg-white dark:bg-gray-800 rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full border-2",u[f],n.borderColor),children:[e.jsx("div",{className:ie("px-6 py-4 border-b",n.headerBg,n.borderColor),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${n.iconColor} bg-white/50 dark:bg-gray-800/50`,children:i}),e.jsx("h3",{className:ie("text-xl font-bold",n.titleColor),children:C})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-white/20 dark:hover:bg-gray-700/50 rounded-lg transition-colors group",children:e.jsx(Oe,{className:"h-5 w-5 text-gray-500 group-hover:text-gray-700 dark:group-hover:text-gray-300"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 px-6 py-6",children:N})]})]})})};function Ke({data:r,columns:o,onEdit:C,onDelete:N,onView:f,onBulkAction:c,searchable:m=!0,searchPlaceholder:u="Search...",emptyMessage:S="No data available",loading:t=!1,pagination:n=!0,pageSize:i=10,selectable:D=!1,bulkActions:d=[],filters:R=[],exportable:q=!1,onExport:K,refreshable:p=!1,onRefresh:F,className:T,rowClassName:l,onRowClick:k,actions:g=[]}){const[I,b]=x.useState(""),[a,E]=x.useState(null),[s,v]=x.useState("asc"),[O,j]=x.useState(1),[B,G]=x.useState(new Set),[Z,W]=x.useState(!1),[X,H]=x.useState({}),[ce,A]=x.useState(!1),h=x.useRef(null),P=x.useMemo(()=>{let L=r;return I&&(L=r.filter(z=>o.some(J=>{const Me=z[J.key];return String(Me).toLowerCase().includes(I.toLowerCase())}))),Object.entries(X).forEach(([z,J])=>{J!==""&&J!==null&&J!==void 0&&(L=L.filter(Me=>{const We=Me[z];return typeof J=="string"?String(We).toLowerCase().includes(J.toLowerCase()):We===J}))}),a&&L.sort((z,J)=>{const Me=z[a],We=J[a];return Me<We?s==="asc"?-1:1:Me>We?s==="asc"?1:-1:0}),L},[r,I,a,s,X,o]),V=Math.ceil(P.length/i),_=(O-1)*i,se=_+i,y=n?P.slice(_,se):P,$=L=>{a===L?v(s==="asc"?"desc":"asc"):(E(L),v("asc"))},Y=()=>{B.size===y.length?G(new Set):G(new Set(y.map(L=>L.id)))},te=L=>{const z=new Set(B);z.has(L)?z.delete(L):z.add(L),G(z)},ae=L=>{const z=r.filter(J=>B.has(J.id));c==null||c(L,z),G(new Set),A(!1)},Ue=()=>{K==null||K(P)},Te=()=>{H({}),b("")};x.useEffect(()=>{j(1)},[I,X]),x.useEffect(()=>{A(B.size>0)},[B]);const $e=L=>a!==L?e.jsx(ea,{className:"h-4 w-4 text-gray-400"}):s==="asc"?e.jsx(ta,{className:"h-4 w-4 text-bright-green"}):e.jsx(Pt,{className:"h-4 w-4 text-bright-green"});return e.jsxs("div",{className:`space-y-4 ${T}`,ref:h,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[m&&e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:I,onChange:L=>b(L.target.value),placeholder:u,className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 w-full sm:w-64"})]}),R.length>0&&e.jsxs("button",{onClick:()=>W(!Z),className:ie("flex items-center space-x-2 px-3 py-2 rounded-lg border transition-colors",Z?"bg-bright-green text-white border-bright-green":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"}),Object.values(X).some(L=>L!==""&&L!==null&&L!==void 0)&&e.jsx("span",{className:"px-1.5 py-0.5 bg-red-500 text-white text-xs rounded-full",children:Object.values(X).filter(L=>L!==""&&L!==null&&L!==void 0).length})]}),p&&e.jsxs("button",{onClick:F,disabled:t,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[e.jsx(he,{className:ie("h-4 w-4",t&&"animate-spin")}),e.jsx("span",{children:"Refresh"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[q&&e.jsxs("button",{onClick:Ue,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),ce&&d.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[B.size," selected"]}),d.map(L=>e.jsxs("button",{onClick:()=>ae(L.value),className:ie("flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors",L.variant==="danger"?"bg-red-600 hover:bg-red-700 text-white":"bg-bright-green hover:bg-green-600 text-white"),children:[L.icon,e.jsx("span",{children:L.label})]},L.value))]})]})]}),Z&&R.length>0&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Filters"}),e.jsx("button",{onClick:Te,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Clear all"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(L=>{var z;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:L.label}),L.type==="text"&&e.jsx("input",{type:"text",value:X[L.key]||"",onChange:J=>H({...X,[L.key]:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),L.type==="select"&&e.jsxs("select",{value:X[L.key]||"",onChange:J=>H({...X,[L.key]:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"All"}),(z=L.options)==null?void 0:z.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))]}),L.type==="date"&&e.jsx("input",{type:"date",value:X[L.key]||"",onChange:J=>H({...X,[L.key]:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),L.type==="number"&&e.jsx("input",{type:"number",value:X[L.key]||"",onChange:J=>H({...X,[L.key]:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]},L.key)})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[D&&e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:B.size===y.length&&y.length>0?e.jsx(yt,{className:"h-4 w-4"}):e.jsx(bt,{className:"h-4 w-4"})})}),o.map(L=>e.jsx("th",{className:ie("px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300",L.headerAlign==="center"&&"text-center",L.headerAlign==="right"&&"text-right",L.headerClassName),style:{width:L.width},children:L.sortable?e.jsxs("button",{onClick:()=>$(L.key),className:"flex items-center space-x-1 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx("span",{children:L.label}),$e(L.key)]}):L.label},String(L.key))),(C||N||f||g.length>0)&&e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:t?e.jsx("tr",{children:e.jsx("td",{colSpan:o.length+(D?1:0)+(C||N||f||g.length>0?1:0),className:"px-4 py-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(he,{className:"h-5 w-5 animate-spin text-bright-green"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})})}):y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:o.length+(D?1:0)+(C||N||f||g.length>0?1:0),className:"px-4 py-8 text-center",children:e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[e.jsx(Ne,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:S})]})})}):y.map(L=>e.jsxs("tr",{className:ie("border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",k&&"cursor-pointer",l==null?void 0:l(L)),onClick:()=>k==null?void 0:k(L),children:[D&&e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:z=>{z.stopPropagation(),te(L.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:B.has(L.id)?e.jsx(yt,{className:"h-4 w-4 text-bright-green"}):e.jsx(bt,{className:"h-4 w-4"})})}),o.map(z=>e.jsx("td",{className:ie("px-4 py-3 text-sm text-gray-900 dark:text-gray-100",z.align==="center"&&"text-center",z.align==="right"&&"text-right",z.className),children:z.render?z.render(L[z.key],L):String(L[z.key]||"-")},String(z.key))),(C||N||f||g.length>0)&&e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[g.map((z,J)=>z.condition&&!z.condition(L)?null:e.jsx("button",{onClick:Me=>{Me.stopPropagation(),z.onClick(L)},className:ie("p-1 rounded-md transition-colors",z.variant==="danger"?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":z.variant==="warning"?"text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20":"text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"),title:z.label,children:z.icon},J)),f&&e.jsx("button",{onClick:z=>{z.stopPropagation(),f(L)},className:"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",title:"View",children:e.jsx(Be,{className:"h-4 w-4"})}),C&&e.jsx("button",{onClick:z=>{z.stopPropagation(),C(L)},className:"p-1 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Edit",children:e.jsx(Tt,{className:"h-4 w-4"})}),N&&e.jsx("button",{onClick:z=>{z.stopPropagation(),N(L)},className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",title:"Delete",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]},L.id))})]})}),n&&V>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",_+1," to ",Math.min(se,P.length)," of ",P.length," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>j(Math.max(1,O-1)),disabled:O===1,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,V)},(L,z)=>{const J=z+1;return e.jsx("button",{onClick:()=>j(J),className:ie("px-3 py-2 rounded-lg transition-colors",O===J?"bg-bright-green text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:J},J)})}),e.jsx("button",{onClick:()=>j(Math.min(V,O+1)),disabled:O===V,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})}const Ye=[{code:"AC001",name:"Embu Area",region:"Embu County",pickupStations:[{code:"ST001",name:"Embu Town Station",location:"Embu Town Center"}]},{code:"AC002",name:"Mecca Area",region:"Mecca Region",pickupStations:[{code:"ST002",name:"Mecca Station",location:"Mecca Center"}]},{code:"AC003",name:"Ena Area",region:"Ena Region",pickupStations:[{code:"ST003",name:"Ena Station",location:"Ena Center"}]},{code:"AC004",name:"Ugweri Area",region:"Ugweri Region",pickupStations:[{code:"ST004",name:"Ugweri Station",location:"Ugweri Center"}]}],wa=Ye.flatMap(r=>r.pickupStations.map(o=>({value:o.code,label:`${o.code} - ${o.name}`,areaCode:r.code,areaName:r.name}))),Ca={AC001:["Embu Town Center","Embu Market","Embu Industrial Area"],AC002:["Mecca Center","Mecca Market","Mecca Business District"],AC003:["Ena Center","Ena Market","Ena Commercial Area"],AC004:["Ugweri Center","Ugweri Market","Ugweri Business Hub"]},Nt={date:new Date().toISOString().split("T")[0],pickupStationCode:"ST001",areaCode:"AC001",quantitySold:0,itemPrice:0,driverName:"",driverId:"",driverPhone:"",vehicleReg:"",vehicleMake:"",packaging:{basins:0,sacks:0,boxes:0},packagingCosts:{basinCost:0,sackCost:0,boxCost:0},dropOffPoint:"",estimatedDeliveryTime:"",assignedBy:"",status:"loaded"},Sa=()=>{var se;const{sourceRecords:r,setSourceRecords:o,user:C}=le(),{showSuccessNotification:N,showErrorNotification:f}=Pe(),[c,m]=x.useState(!1),[u,S]=x.useState(null),[t,n]=x.useState(Nt),[i,D]=x.useState({}),[d,R]=x.useState(""),[q,K]=x.useState("all"),[p,F]=x.useState("all"),[T,l]=x.useState({start:"",end:""}),[k,g]=x.useState("date"),[I,b]=x.useState("desc"),[a,E]=x.useState("table"),[s,v]=x.useState(!1),[O,j]=x.useState([]),B=()=>{n(Nt),D({}),S(null)},G=y=>{if(y){S(y);const{id:$,totalCost:Y,...te}=y;n(te)}else B();m(!0)},Z=()=>{m(!1),B()},W=()=>{var $,Y,te,ae,Ue,Te,$e;const y={};return t.date||(y.date="Date is required"),t.pickupStationCode||(y.pickupStationCode="Pickup station is required"),t.areaCode||(y.areaCode="Area code is required"),(!t.quantitySold||t.quantitySold<=0)&&(y.quantitySold="Valid quantity is required"),(!t.itemPrice||t.itemPrice<=0)&&(y.itemPrice="Valid price is required"),($=t.driverName)!=null&&$.trim()||(y.driverName="Driver name is required"),(Y=t.driverId)!=null&&Y.trim()||(y.driverId="Driver ID is required"),(te=t.driverPhone)!=null&&te.trim()||(y.driverPhone="Driver phone is required"),(ae=t.vehicleReg)!=null&&ae.trim()||(y.vehicleReg="Vehicle registration is required"),(Ue=t.dropOffPoint)!=null&&Ue.trim()||(y.dropOffPoint="Drop-off point is required"),(Te=t.estimatedDeliveryTime)!=null&&Te.trim()||(y.estimatedDeliveryTime="Estimated delivery time is required"),($e=t.assignedBy)!=null&&$e.trim()||(y.assignedBy="Data entry person is required"),D(y),Object.keys(y).length===0},X=y=>{if(y.preventDefault(),!W())return;const $=t.quantitySold*t.itemPrice,Y=t.packaging.basins*t.packagingCosts.basinCost+t.packaging.sacks*t.packagingCosts.sackCost+t.packaging.boxes*t.packagingCosts.boxCost,te={...t,totalCost:$,totalPackagingCost:Y,assignedBy:t.assignedBy||(C==null?void 0:C.name)||"Unknown"};if(u)o(r.map(ae=>ae.id===u.id?{...te,id:u.id}:ae));else{const ae=`SRC-${Date.now()}`;o([...r,{...te,id:ae}])}Z()},H=y=>{window.confirm("Are you sure you want to delete this record?")&&(o(r.filter($=>$.id!==y.id)),N("Success","Record deleted successfully"))},ce=async()=>{v(!0);try{await new Promise(y=>setTimeout(y,1e3)),N("Success","Data refreshed successfully")}catch{f("Error","Failed to refresh data")}finally{v(!1)}},A=()=>{if(O.length===0){f("Error","No records selected");return}window.confirm(`Are you sure you want to delete ${O.length} records?`)&&(o(r.filter(y=>!O.includes(y.id))),j([]),N("Success",`${O.length} records deleted successfully`))},h=y=>{if(O.length===0){f("Error","No records selected");return}o(r.map($=>O.includes($.id)?{...$,status:y}:$)),j([]),N("Success",`${O.length} records updated to ${y}`)},P=x.useMemo(()=>{let y=r;return d&&(y=y.filter($=>$.driverName.toLowerCase().includes(d.toLowerCase())||$.vehicleReg.toLowerCase().includes(d.toLowerCase())||$.pickupStationCode.toLowerCase().includes(d.toLowerCase())||$.dropOffPoint.toLowerCase().includes(d.toLowerCase()))),q!=="all"&&(y=y.filter($=>$.status===q)),p!=="all"&&(y=y.filter($=>$.areaCode===p)),T.start&&T.end&&(y=y.filter($=>{const Y=new Date($.date),te=new Date(T.start),ae=new Date(T.end);return Y>=te&&Y<=ae})),y.sort(($,Y)=>{let te=$[k],ae=Y[k];return k==="date"&&(te=new Date(te),ae=new Date(ae)),I==="asc"?te>ae?1:-1:te<ae?1:-1}),y},[r,d,q,p,T,k,I]),V=x.useMemo(()=>{const y=r.length,$=r.reduce((L,z)=>L+z.quantitySold,0),Y=r.reduce((L,z)=>L+z.totalCost,0),te=r.reduce((L,z)=>L+z.totalPackagingCost,0),ae=r.reduce((L,z)=>(L[z.status]=(L[z.status]||0)+1,L),{}),Ue=r.reduce((L,z)=>(L[z.areaCode]=(L[z.areaCode]||0)+1,L),{}),Te=new Date;Te.setDate(Te.getDate()-7);const $e=r.filter(L=>new Date(L.date)>=Te);return{totalRecords:y,totalGoodsIn:$,totalCostValue:Y,totalPackagingCost:te,statusBreakdown:ae,areaBreakdown:Ue,recentRecords:$e.length,avgCostPerKg:$>0?Y/$:0,avgPackagingPerRecord:y>0?te/y:0}},[r]),_=[{key:"date",label:"Date",render:y=>ve(y),sortable:!0},{key:"pickupStationCode",label:"Station Code",sortable:!0},{key:"areaCode",label:"Area Code",sortable:!0},{key:"driverName",label:"Driver",sortable:!0},{key:"dropOffPoint",label:"Drop-off Point",sortable:!0},{key:"status",label:"Status",render:y=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y==="delivered"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":y==="in-transit"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200"}`,children:y}),sortable:!0},{key:"packaging",label:"Packaging",render:y=>{const{basins:$,sacks:Y,boxes:te}=y,ae=[];return $>0&&ae.push(`${$}B`),Y>0&&ae.push(`${Y}S`),te>0&&ae.push(`${te}BG`),ae.join(", ")||"None"}},{key:"quantitySold",label:"Quantity (kg)",render:y=>`${y} kg`},{key:"totalCost",label:"Total Cost",render:y=>Q(y),sortable:!0},{key:"assignedBy",label:"Entered By",sortable:!0}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-emerald",children:"Source Records"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track miraa goods received from pickup points with enhanced analytics"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[P.length," of ",r.length," records"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:ce,disabled:s,className:"btn-teal flex items-center gap-2",children:[e.jsx(he,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:()=>G(),className:"btn-emerald flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Record"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(w,{variant:"emerald",className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-emerald",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-gradient-emerald",children:V.totalRecords}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",V.recentRecords," this week"]})]})]})}),e.jsx(w,{variant:"teal",className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-teal",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Goods In"}),e.jsxs("p",{className:"text-2xl font-bold text-gradient-teal",children:[V.totalGoodsIn," kg"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg: ",V.avgCostPerKg.toFixed(0),"/kg"]})]})]})}),e.jsx(w,{variant:"purple",className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-purple",children:e.jsx(ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Cost"}),e.jsx("p",{className:"text-2xl font-bold text-gradient-purple",children:Q(V.totalCostValue)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Investment"})]})]})}),e.jsx(w,{variant:"red",className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-red",children:e.jsx(de,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Packaging Cost"}),e.jsx("p",{className:"text-2xl font-bold text-gradient-red",children:Q(V.totalPackagingCost)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Avg: ",Q(V.avgPackagingPerRecord)]})]})]})})]}),e.jsxs(w,{variant:"blue",className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters & Controls"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>E(a==="table"?"cards":"table"),className:"btn-blue flex items-center gap-2",children:[a==="table"?e.jsx(Be,{className:"h-4 w-4"}):e.jsx(ye,{className:"h-4 w-4"}),a==="table"?"Card View":"Table View"]}),e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>j([]),className:"btn-purple flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(M,{label:"Search",type:"text",value:d,onChange:y=>R(y),placeholder:"Search drivers, vehicles, stations..."}),e.jsx(U,{label:"Status Filter",value:q,onChange:y=>K(y),options:[{value:"all",label:"All Status"},{value:"loaded",label:"Loaded"},{value:"in-transit",label:"In Transit"},{value:"delivered",label:"Delivered"}]}),e.jsx(U,{label:"Area Filter",value:p,onChange:y=>F(y),options:[{value:"all",label:"All Areas"},...Ye.map(y=>({value:y.code,label:`${y.code} - ${y.name}`}))]}),e.jsx(U,{label:"Sort By",value:k,onChange:y=>g(y),options:[{value:"date",label:"Date"},{value:"driverName",label:"Driver"},{value:"quantitySold",label:"Quantity"},{value:"totalCost",label:"Total Cost"},{value:"status",label:"Status"}]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4 text-gray-500"}),e.jsx(M,{label:"Start Date",type:"date",value:T.start,onChange:y=>l({...T,start:y})}),e.jsx(M,{label:"End Date",type:"date",value:T.end,onChange:y=>l({...T,end:y})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>b(I==="asc"?"desc":"asc"),className:"btn-lime flex items-center gap-2",children:[I==="asc"?e.jsx(pe,{className:"h-4 w-4"}):e.jsx(qe,{className:"h-4 w-4"}),I==="asc"?"Ascending":"Descending"]})})]}),O.length>0&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:[O.length," record(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h("loaded"),className:"btn-emerald text-xs",children:"Mark as Loaded"}),e.jsx("button",{onClick:()=>h("in-transit"),className:"btn-teal text-xs",children:"Mark as In Transit"}),e.jsx("button",{onClick:()=>h("delivered"),className:"btn-lime text-xs",children:"Mark as Delivered"}),e.jsx("button",{onClick:A,className:"btn-red text-xs",children:"Delete Selected"})]})]})})]}),e.jsx(w,{variant:"green",className:"p-6",children:e.jsx(Ke,{data:P,columns:_,onEdit:G,onDelete:H,emptyMessage:"No source records found. Try adjusting your filters or click 'Add Record' to get started."})}),e.jsx(ke,{isOpen:c,onClose:Z,title:u?"Edit Source Record":"Add Source Record",size:"xl",type:"success",icon:e.jsx(de,{className:"h-6 w-6"}),children:e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Date",type:"date",value:t.date,onChange:y=>n({...t,date:y}),error:i.date,required:!0}),e.jsx(U,{label:"Area Code",value:t.areaCode,onChange:y=>{var Y;const $=Ye.find(te=>te.code===y);n({...t,areaCode:y,pickupStationCode:((Y=$==null?void 0:$.pickupStations[0])==null?void 0:Y.code)||""})},options:Ye.map(y=>({value:y.code,label:`${y.code} - ${y.name} (${y.region})`})),error:i.areaCode,required:!0}),e.jsx(U,{label:"Pickup Station",value:t.pickupStationCode,onChange:y=>n({...t,pickupStationCode:y}),options:wa.filter(y=>y.areaCode===t.areaCode),error:i.pickupStationCode,required:!0}),e.jsx(U,{label:"Drop-off Point",value:t.dropOffPoint,onChange:y=>n({...t,dropOffPoint:y}),options:t.areaCode?((se=Ca[t.areaCode])==null?void 0:se.map(y=>({value:y,label:y})))||[]:[],error:i.dropOffPoint,required:!0}),e.jsx(M,{label:"Estimated Delivery Time",type:"datetime-local",value:t.estimatedDeliveryTime,onChange:y=>n({...t,estimatedDeliveryTime:y}),error:i.estimatedDeliveryTime,required:!0}),e.jsx(M,{label:"Quantity (kg)",type:"number",value:t.quantitySold,onChange:y=>n({...t,quantitySold:y}),error:i.quantitySold,required:!0,placeholder:"Weight in kilograms"}),e.jsx(M,{label:"Price per kg",type:"number",value:t.itemPrice,onChange:y=>n({...t,itemPrice:y}),error:i.itemPrice,required:!0,placeholder:"Price per kilogram"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Driver & Vehicle Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Driver Name",type:"text",value:t.driverName,onChange:y=>n({...t,driverName:y}),error:i.driverName,required:!0,placeholder:"Driver full name"}),e.jsx(M,{label:"Driver ID",type:"text",value:t.driverId,onChange:y=>n({...t,driverId:y}),error:i.driverId,required:!0,placeholder:"Driver identification"}),e.jsx(M,{label:"Driver Phone",type:"tel",value:t.driverPhone,onChange:y=>n({...t,driverPhone:y}),placeholder:"Driver phone number"}),e.jsx(M,{label:"Vehicle Registration",type:"text",value:t.vehicleReg,onChange:y=>n({...t,vehicleReg:y}),error:i.vehicleReg,required:!0,placeholder:"e.g., KAA 123A"}),e.jsx(M,{label:"Vehicle Make",type:"text",value:t.vehicleMake||"",onChange:y=>n({...t,vehicleMake:y}),placeholder:"e.g., Toyota Hiace",className:"md:col-span-1"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Packaging Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(M,{label:"Basins",type:"number",value:t.packaging.basins,onChange:y=>n({...t,packaging:{...t.packaging,basins:y}}),placeholder:"Number of basins"}),e.jsx(M,{label:"Sacks",type:"number",value:t.packaging.sacks,onChange:y=>n({...t,packaging:{...t.packaging,sacks:y}}),placeholder:"Number of sacks"}),e.jsx(M,{label:"Boxes",type:"number",value:t.packaging.boxes,onChange:y=>n({...t,packaging:{...t.packaging,boxes:y}}),placeholder:"Number of boxes"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(M,{label:"Basin Cost (each)",type:"number",value:t.packagingCosts.basinCost,onChange:y=>n({...t,packagingCosts:{...t.packagingCosts,basinCost:y}}),placeholder:"Cost per basin"}),e.jsx(M,{label:"Sack Cost (each)",type:"number",value:t.packagingCosts.sackCost,onChange:y=>n({...t,packagingCosts:{...t.packagingCosts,sackCost:y}}),placeholder:"Cost per sack"}),e.jsx(M,{label:"Box Cost (each)",type:"number",value:t.packagingCosts.boxCost,onChange:y=>n({...t,packagingCosts:{...t.packagingCosts,boxCost:y}}),placeholder:"Cost per box"})]})]}),e.jsx("div",{children:e.jsx(M,{label:"Entered By",type:"text",value:t.assignedBy||(C==null?void 0:C.name)||"",onChange:y=>n({...t,assignedBy:y}),error:i.assignedBy,required:!0,placeholder:"Person entering this data"})}),t.quantitySold>0&&t.itemPrice>0||t.packaging.basins>0||t.packaging.sacks>0||t.packaging.boxes>0?e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg space-y-2",children:[t.quantitySold>0&&t.itemPrice>0&&e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("strong",{children:"Goods Cost:"})," ",Q(t.quantitySold*t.itemPrice)]}),e.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[e.jsx("strong",{children:"Packaging Cost:"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[t.packaging.basins>0&&e.jsxs("div",{children:["Basins: ",t.packaging.basins," × ",Q(t.packagingCosts.basinCost)," = ",Q(t.packaging.basins*t.packagingCosts.basinCost)]}),t.packaging.sacks>0&&e.jsxs("div",{children:["Sacks: ",t.packaging.sacks," × ",Q(t.packagingCosts.sackCost)," = ",Q(t.packaging.sacks*t.packagingCosts.sackCost)]}),t.packaging.boxes>0&&e.jsxs("div",{children:["Boxes: ",t.packaging.boxes," × ",Q(t.packagingCosts.boxCost)," = ",Q(t.packaging.boxes*t.packagingCosts.boxCost)]}),e.jsxs("div",{className:"font-bold border-t pt-1 mt-1",children:["Total Packaging: ",Q(t.packaging.basins*t.packagingCosts.basinCost+t.packaging.sacks*t.packagingCosts.sackCost+t.packaging.boxes*t.packagingCosts.boxCost)]})]})]}),e.jsxs("div",{className:"text-sm font-bold text-green-800 dark:text-green-200 border-t pt-2",children:[e.jsx("strong",{children:"Grand Total:"})," ",Q(t.quantitySold*t.itemPrice+t.packaging.basins*t.packagingCosts.basinCost+t.packaging.sacks*t.packagingCosts.sackCost+t.packaging.boxes*t.packagingCosts.boxCost)]})]}):null,e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:Z,className:"btn-blue",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-emerald",children:u?"Update Record":"Add Record"})]})]})})]})},Aa=()=>{const{user:r}=le(),[o,C]=x.useState("all"),[N,f]=x.useState(!1),[c,m]=x.useState({tripId:"",date:new Date().toISOString().split("T")[0],driver:"",driverPhone:"",vehicleReg:"",vehicleMake:"",pickupPoint:"",destination:"",goodsQuantity:0,goodsValue:0,packagingDetails:"",status:"loading",estimatedArrival:""}),[u,S]=x.useState([{id:"1",tripId:"TRIP-001",date:"2024-01-15",driver:"John Kimani",driverPhone:"+254 712 345678",vehicleReg:"KAA 123A",vehicleMake:"Toyota Hiace",pickupPoint:"Point A",destination:"Nairobi CBD",goodsQuantity:50,goodsValue:25e3,packagingDetails:"2 Basins, 1 Sack",status:"in-transit",estimatedArrival:"2024-01-15 15:30"},{id:"2",tripId:"TRIP-002",date:"2024-01-15",driver:"Peter Wanjiku",driverPhone:"+254 723 456789",vehicleReg:"KBC 567B",vehicleMake:"Mitsubishi Canter",pickupPoint:"Point B",destination:"Mombasa",goodsQuantity:75,goodsValue:37500,packagingDetails:"3 Basins, 2 Boxes",status:"loading"},{id:"3",tripId:"TRIP-003",date:"2024-01-14",driver:"Mary Njoki",driverPhone:"+254 734 567890",vehicleReg:"KAB 789C",vehicleMake:"Isuzu NKR",pickupPoint:"Point C",destination:"Garissa",goodsQuantity:30,goodsValue:15e3,packagingDetails:"1 Sack, 1 Box",status:"dropped-off"}]),t=o==="all"?u:u.filter(p=>p.status===o),n=(p,F)=>{S(T=>T.map(l=>l.id===p?{...l,status:F}:l))},i=()=>{m({tripId:`TRIP-${Date.now()}`,date:new Date().toISOString().split("T")[0],driver:"",driverPhone:"",vehicleReg:"",vehicleMake:"",pickupPoint:"",destination:"",goodsQuantity:0,goodsValue:0,packagingDetails:"",status:"loading",estimatedArrival:""}),f(!0)},D=()=>{f(!1)},d=p=>{p.preventDefault();const F={id:Date.now().toString(),...c};S([...u,F]),D()},R=p=>{switch(p){case"loading":return e.jsx(Se,{className:"h-4 w-4 text-yellow-500"});case"in-transit":return e.jsx(fe,{className:"h-4 w-4 text-blue-500"});case"dropped-off":return e.jsx(ee,{className:"h-4 w-4 text-green-500"});default:return e.jsx(Ne,{className:"h-4 w-4 text-gray-500"})}},q=p=>{switch(p){case"loading":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200";case"in-transit":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200";case"dropped-off":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}},K=p=>{switch(p){case"loading":return"Loading";case"in-transit":return"In Transit";case"dropped-off":return"Delivered";default:return"Unknown"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Transport Log"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track vehicles, drivers, and goods in transit"})]}),(r==null?void 0:r.role)==="user"&&e.jsxs("button",{onClick:i,className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"New Trip"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["all","loading","in-transit","dropped-off"].map(p=>e.jsx("button",{onClick:()=>C(p),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${o===p?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:p.split("-").map(F=>F.charAt(0).toUpperCase()+F.slice(1)).join(" ")},p))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(p=>e.jsxs(w,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[R(p.status),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${q(p.status)}`,children:K(p.status)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:p.tripId}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:ve(p.date)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Driver"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:p.driver}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.driverPhone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Vehicle"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:p.vehicleReg}),p.vehicleMake&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.vehicleMake})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Route"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:p.pickupPoint}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(be,{className:"h-3 w-3"}),e.jsx("span",{children:p.destination})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Goods"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[p.goodsQuantity," kg"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q(p.goodsValue)})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:"Packaging"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:p.packagingDetails}),p.estimatedArrival&&p.status==="in-transit"&&e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["ETA: ",p.estimatedArrival]})]})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.status==="loading"&&e.jsx("button",{onClick:()=>n(p.id,"in-transit"),className:"flex-1 text-xs px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Start Trip"}),p.status==="in-transit"&&e.jsx("button",{onClick:()=>n(p.id,"dropped-off"),className:"flex-1 text-xs px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"Mark Delivered"}),e.jsx("button",{className:"text-xs px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Edit"})]})]},p.id))}),t.length===0&&e.jsxs(w,{className:"p-12 text-center",children:[e.jsx(fe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No transport entries found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No entries match the current filter criteria."})]}),e.jsx(ke,{isOpen:N,onClose:D,title:"Add New Trip",size:"lg",children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Trip ID",type:"text",value:c.tripId,onChange:p=>m({...c,tripId:p}),required:!0}),e.jsx(M,{label:"Date",type:"date",value:c.date,onChange:p=>m({...c,date:p}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Driver Name",type:"text",value:c.driver,onChange:p=>m({...c,driver:p}),required:!0}),e.jsx(M,{label:"Driver Phone",type:"tel",value:c.driverPhone,onChange:p=>m({...c,driverPhone:p}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Vehicle Registration",type:"text",value:c.vehicleReg,onChange:p=>m({...c,vehicleReg:p}),required:!0}),e.jsx(M,{label:"Vehicle Make",type:"text",value:c.vehicleMake||"",onChange:p=>m({...c,vehicleMake:p})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Pickup Point",value:c.pickupPoint,onChange:p=>m({...c,pickupPoint:p}),options:[{value:"Point A",label:"Point A"},{value:"Point B",label:"Point B"},{value:"Point C",label:"Point C"},{value:"Point D",label:"Point D"}],required:!0}),e.jsx(U,{label:"Destination",value:c.destination,onChange:p=>m({...c,destination:p}),options:[{value:"Nairobi CBD",label:"Nairobi CBD"},{value:"Mombasa",label:"Mombasa"},{value:"Garissa",label:"Garissa"},{value:"Meru",label:"Meru"}],required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Goods Quantity (kg)",type:"number",value:c.goodsQuantity,onChange:p=>m({...c,goodsQuantity:p}),required:!0}),e.jsx(M,{label:"Goods Value",type:"number",value:c.goodsValue,onChange:p=>m({...c,goodsValue:p}),required:!0})]}),e.jsx(M,{label:"Packaging Details",type:"text",value:c.packagingDetails,onChange:p=>m({...c,packagingDetails:p}),placeholder:"e.g., 2 Basins, 1 Sack",required:!0}),e.jsx(M,{label:"Estimated Arrival",type:"datetime-local",value:c.estimatedArrival||"",onChange:p=>m({...c,estimatedArrival:p})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:"Add Trip"})]})]})})]})},Da=({monthlyData:r})=>e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Profit Trends"}),e.jsx(ye,{className:"h-4 w-4 text-gray-400"})]}),e.jsx("div",{className:"space-y-3",children:r.map(o=>{const C=Math.max(...r.map(f=>f.profit)),N=o.profit/C*100;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:o.month}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o.trend==="up"&&e.jsx(pe,{className:"h-3 w-3 text-green-500"}),o.trend==="down"&&e.jsx(qe,{className:"h-3 w-3 text-red-500"}),o.trend==="stable"&&e.jsx(me,{className:"h-3 w-3 text-gray-500"}),e.jsxs("span",{className:`text-sm font-medium ${o.profit>5e4?"text-green-600":o.profit>45e3?"text-yellow-600":"text-red-600"}`,children:[(o.profit/1e3).toFixed(0),"K"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${o.trend==="up"?"bg-gradient-to-r from-green-400 to-green-500":o.trend==="down"?"bg-gradient-to-r from-red-400 to-red-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,style:{width:`${N}%`}})})]},o.month)})})]}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Performance Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Best Month"}),e.jsxs("span",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:[(Math.max(...r.map(o=>o.profit))/1e3).toFixed(0),"K"]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Average Profit"}),e.jsxs("span",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:[(r.reduce((o,C)=>o+C.profit,0)/r.length/1e3).toFixed(0),"K"]})]})}),e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800 dark:text-purple-200",children:"Trend Status"}),e.jsx("span",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:r.slice(-2).every(o=>o.trend==="up")?"Growing ↗":"Mixed 📊"})]})})]})]})]}),et=(r,o)=>r===0?0:(o-r)/o*100,Ra=()=>{const{sourceRecords:r,user:o,destinationRecords:C}=le(),{showSuccessNotification:N,showErrorNotification:f}=Pe(),[c,m]=x.useState("month"),[u,S]=x.useState("overview"),[t,n]=x.useState({start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[i,D]=x.useState(!0),[d,R]=x.useState(!1),[q,K]=x.useState(!1),[p,F]=x.useState(!1),T=x.useMemo(()=>C||[{id:"1",trackingNo:"TRIP-001",destination:"Nairobi",buyer:"John Doe",quantitySold:50,itemPrice:800,totalRevenue:4e4,date:"2024-01-15"},{id:"2",trackingNo:"TRIP-002",destination:"Mombasa",buyer:"Jane Smith",quantitySold:75,itemPrice:700,totalRevenue:52500,date:"2024-01-14"},{id:"3",trackingNo:"TRIP-003",destination:"Garissa",buyer:"Bob Johnson",quantitySold:30,itemPrice:650,totalRevenue:19500,date:"2024-01-13"},{id:"4",trackingNo:"TRIP-004",destination:"Meru",buyer:"Alice Brown",quantitySold:40,itemPrice:750,totalRevenue:3e4,date:"2024-01-12"},{id:"5",trackingNo:"TRIP-005",destination:"Nairobi",buyer:"Charlie Wilson",quantitySold:60,itemPrice:850,totalRevenue:51e3,date:"2024-01-11"}],[C]),l=x.useMemo(()=>{const j=r.reduce((H,ce)=>H+ce.totalCost,0),B=T.reduce((H,ce)=>H+ce.totalRevenue,0),G=B-j,Z=r.length,W=r.length>0?r.filter(H=>H.areaCode&&H.totalCost>0).length/r.length*100:0,X=W>=95?"excellent":W>=85?"good":W>=70?"fair":"poor";return{totalRevenue:B,totalCost:j,totalProfit:G,profitMargin:et(j,B),avgProfitPerTrip:Z>0?G/Z:0,totalTrips:Z,avgRevenuePerTrip:Z>0?B/Z:0,avgCostPerTrip:Z>0?j/Z:0,efficiency:j>0?B/j*100:0,growthRate:15.2,lastUpdated:new Date().toISOString(),dataQuality:X,realTimeSync:i}},[r,T,i]),k=x.useMemo(()=>{const j=[];return["AC001","AC002","AC003","AC004","AC005"].forEach(B=>{const G=r.filter($=>$.areaCode===B),Z=new Date().toISOString();if(G.length===0){j.push({pickupPoint:`Area ${B}`,areaCode:B,totalRecords:0,totalCost:0,totalRevenue:0,profit:0,margin:0,avgCostPerKg:0,avgRevenuePerKg:0,efficiency:0,growth:0,lastUpdated:Z,status:"inactive",trends:{profit:"stable",revenue:"stable",cost:"stable"},kpis:{roi:0,costEfficiency:0,revenueGrowth:0,marketShare:0}});return}const W=G.reduce(($,Y)=>$+Y.totalCost,0),X=G.length,H=G.reduce(($,Y)=>$+Y.quantitySold,0),A=T.filter($=>G.some(Y=>Y.tripCode===$.trackingNo)).reduce(($,Y)=>$+Y.totalRevenue,0),h=W>0?(A-W)/X:0,P=W>0?(A-W)/W*100:0,V=et(W,A),_=V>=30?"active":V>=20?"warning":V>0?"critical":"inactive",se={profit:h>1e3?"up":h>500?"stable":"down",revenue:A>W*1.3?"up":A>W*1.1?"stable":"down",cost:(W>0,"stable")},y=15+Math.random()*30;j.push({pickupPoint:`Area ${B}`,areaCode:B,totalRecords:X,totalCost:W,totalRevenue:A,profit:A-W,margin:V,avgCostPerKg:H>0?W/H:0,avgRevenuePerKg:H>0?A/H:0,efficiency:h,growth:y,lastUpdated:Z,status:_,trends:se,kpis:{roi:P,costEfficiency:W>0?A/W*100:0,revenueGrowth:y,marketShare:X/r.length*100}})}),j.sort((B,G)=>G.profit-B.profit)},[r,T]),g=[{month:"Aug",profit:45e3,cost:18e3,revenue:63e3,trend:"up"},{month:"Sep",profit:52e3,cost:22e3,revenue:74e3,trend:"up"},{month:"Oct",profit:48e3,cost:2e4,revenue:68e3,trend:"down"},{month:"Nov",profit:55e3,cost:21e3,revenue:76e3,trend:"up"},{month:"Dec",profit:62e3,cost:23e3,revenue:85e3,trend:"up"},{month:"Jan",profit:58e3,cost:25e3,revenue:83e3,trend:"down"}],I=async()=>{K(!0);try{await new Promise(j=>setTimeout(j,1e3)),N("Success","Data refreshed successfully")}catch{f("Error","Failed to refresh data")}finally{K(!1)}},b=async j=>{R(!0);try{await new Promise(B=>setTimeout(B,2e3)),N("Success",`${j.toUpperCase()} report exported successfully`)}catch{f("Error",`Failed to export ${j.toUpperCase()} report`)}finally{R(!1)}},a=(j,B)=>{n({start:j,end:B})};x.useEffect(()=>{if(p){const j=setInterval(()=>{I()},3e4);return()=>clearInterval(j)}},[p]);const E=()=>{D(!i),N("Success",`Real-time sync ${i?"disabled":"enabled"}`)},s=k[0],v=k[k.length-1],O=[...v&&v.margin<20?[`Low profit margin at ${v.pickupPoint} (${v.margin.toFixed(1)}%)`]:[],...k.filter(j=>j.totalRecords<3).map(j=>`Low activity at ${j.pickupPoint} (${j.totalRecords} trips)`),...l.profitMargin<30?["Overall profit margin below target (30%+)"]:[],...g[g.length-1].trend==="down"?["Recent downward trend in profits"]:[]];return(o==null?void 0:o.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs(w,{className:"p-8 text-center",children:[e.jsx(De,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Profit reports are only available to administrators."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-purple",children:"Performance Reports"}),e.jsxs("div",{className:"flex items-center gap-2",children:[i?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(rt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Live"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(ft,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Offline"})]}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.dataQuality==="excellent"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":l.dataQuality==="good"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":l.dataQuality==="fair"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200"}`,children:[l.dataQuality.toUpperCase()," DATA"]})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive analysis of miraa transport profitability with real-time insights"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Last updated: ",ve(l.lastUpdated)]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4 text-gray-500"}),e.jsx("input",{type:"date",value:t.start,onChange:j=>a(j.target.value,t.end),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"date",value:t.end,onChange:j=>a(t.start,j.target.value),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700"})]}),e.jsxs("select",{value:c,onChange:j=>m(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm focus-ring",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs("select",{value:u,onChange:j=>S(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm focus-ring",children:[e.jsx("option",{value:"overview",children:"Overview"}),e.jsx("option",{value:"pickup-analysis",children:"Pickup Analysis"}),e.jsx("option",{value:"monthly-trends",children:"Monthly Trends"}),e.jsx("option",{value:"driver-performance",children:"Driver Performance"}),e.jsx("option",{value:"vehicle-performance",children:"Vehicle Performance"}),e.jsx("option",{value:"destination-analysis",children:"Destination Analysis"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:I,disabled:q,className:"btn-glass flex items-center gap-2",children:[e.jsx(he,{className:`h-4 w-4 ${q?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>R(!d),className:"btn-gradient-primary flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]}),d&&e.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10",children:e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:()=>b("csv"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Export CSV"}),e.jsx("button",{onClick:()=>b("excel"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Export Excel"}),e.jsx("button",{onClick:()=>b("pdf"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Export PDF"})]})})]}),e.jsxs("button",{onClick:E,className:`btn-glass flex items-center gap-2 ${i?"text-green-600":"text-gray-500"}`,children:[i?e.jsx(rt,{className:"h-4 w-4"}):e.jsx(ft,{className:"h-4 w-4"}),"Sync"]}),e.jsxs("button",{onClick:()=>F(!p),className:`btn-glass flex items-center gap-2 ${p?"text-blue-600":"text-gray-500"}`,children:[e.jsx(Se,{className:"h-4 w-4"}),"Auto"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-primary flex-shrink-0",children:e.jsx(Ve,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-bold text-gradient-primary truncate",children:Q(l.totalRevenue)})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),"+",l.growthRate.toFixed(1),"%"]}),e.jsxs("div",{className:"text-gray-500",children:[l.totalTrips," trips"]})]})]}),e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-warm flex-shrink-0",children:e.jsx(de,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Costs"}),e.jsx("p",{className:"text-lg font-bold text-gradient-warm truncate",children:Q(l.totalCost)})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-orange-600",children:[e.jsx(qe,{className:"h-3 w-3 mr-1"}),"-5.2%"]}),e.jsxs("div",{className:"text-gray-500",children:["Avg: ",Q(l.avgCostPerTrip)]})]})]}),e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-secondary flex-shrink-0",children:e.jsx(De,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Net Profit"}),e.jsx("p",{className:"text-lg font-bold text-gradient-secondary truncate",children:Q(l.totalProfit)})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),l.profitMargin.toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-500",children:"Margin"})]})]}),e.jsxs(w,{variant:"glass",className:"p-4 hover-lift",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 rounded-lg gradient-accent flex-shrink-0",children:e.jsx(ye,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Efficiency"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-accent truncate",children:[l.efficiency.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center text-purple-600",children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),"ROI"]}),e.jsxs("div",{className:"text-gray-500",children:[l.dataQuality," data"]})]})]})]}),u==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[e.jsxs(w,{className:"lg:col-span-1 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(pe,{className:"h-4 w-4 text-green-600 mr-2"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:"Best Performer"})]}),e.jsx("p",{className:"font-semibold text-green-900 dark:text-green-100",children:s.pickupPoint}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Profit: ",Q(s.profit)," (",s.margin.toFixed(1),"%)"]})]}),v&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(qe,{className:"h-4 w-4 text-red-600 mr-2"}),e.jsx("span",{className:"font-medium text-red-800 dark:text-red-200",children:"Needs Improvement"})]}),e.jsx("p",{className:"font-semibold text-red-900 dark:text-red-100",children:v.pickupPoint}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Profit: ",Q(v.profit)," (",v.margin.toFixed(1),"%)"]})]})]})]}),e.jsxs(w,{className:"lg:col-span-2 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Issues & Recommendations"}),e.jsx("div",{className:"space-y-3",children:O.length>0?O.map((j,B)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsx(re,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Issue"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:j})]})]},B)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(De,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:"Excellent Performance!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No critical issues identified"})]})})]})]}),e.jsxs(w,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Destination Performance"}),e.jsx("div",{className:"space-y-3",children:T.map(j=>{const B=j.quantitySold*450,G=j.totalRevenue-B,Z=et(B,j.totalRevenue);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover-lift",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(be,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.destination}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.buyer})]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Quantity"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[j.quantitySold,"kg"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Revenue"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:Q(j.totalRevenue)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Profit"}),e.jsxs("p",{className:`font-medium ${G>0?"text-green-600":"text-red-600"}`,children:[Q(G)," (",Z.toFixed(1),"%)"]})]})]})]},j.id)})})]})]}),u==="pickup-analysis"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Performance Analysis"}),e.jsx(oe,{className:"h-4 w-4 text-gray-400 cursor-pointer"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[e.jsx("th",{className:"text-left py-2 text-gray-500 dark:text-gray-400",children:"Point"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Trips"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Revenue"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Profit"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Margin"}),e.jsx("th",{className:"text-right py-2 text-gray-500 dark:text-gray-400",children:"Growth"})]})}),e.jsx("tbody",{children:k.map(j=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[e.jsx("td",{className:"py-2 font-medium text-gray-900 dark:text-gray-100",children:j.pickupPoint}),e.jsx("td",{className:"py-2 text-right text-gray-900 dark:text-gray-100",children:j.totalRecords}),e.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-gray-100",children:[(j.totalRevenue/1e3).toFixed(1),"K"]}),e.jsxs("td",{className:`py-2 text-right font-medium ${j.profit>0?"text-green-600":j.profit===0?"text-gray-600":"text-red-600"}`,children:[j.profit>0?"+":"",(j.profit/1e3).toFixed(1),"K"]}),e.jsx("td",{className:"py-2 text-right",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.margin>=30?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":j.margin>=20?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":j.margin>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-gray-100 text-gray-600 dark:bg-gray-900/20 dark:text-gray-400"}`,children:[j.margin.toFixed(1),"%"]})}),e.jsx("td",{className:"py-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[j.growth>0?e.jsx(pe,{className:"h-3 w-3 text-green-500"}):e.jsx(qe,{className:"h-3 w-3 text-red-500"}),e.jsxs("span",{className:j.growth>0?"text-green-600":"text-red-600",children:["+",j.growth.toFixed(1),"%"]})]})})]},j.pickupPoint))})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Efficiency Metrics"}),e.jsx("div",{className:"space-y-3",children:k.filter(j=>j.totalRecords>0).map(j=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.pickupPoint}),e.jsxs("span",{className:"text-xs text-gray-500",children:[j.totalRecords," trips"]})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Cost/kg:"}),e.jsx("span",{className:"font-medium",children:Q(j.avgCostPerKg)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Revenue/kg:"}),e.jsx("span",{className:"font-medium",children:Q(j.avgRevenuePerKg)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Profit/trip:"}),e.jsx("span",{className:"font-medium text-green-600",children:Q(j.efficiency)})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1.5 mt-2",children:e.jsx("div",{className:"bg-gradient-to-r from-red-400 via-yellow-400 to-green-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,j.margin))}%`}})})]})]},j.pickupPoint))})]})]})}),u==="monthly-trends"&&e.jsx(Da,{monthlyData:g})]})},kt={AC001:[{location:"Embu Town Market",type:"market"},{location:"Embu Wholesale Center",type:"wholesale"},{location:"Embu Retail Hub",type:"retail"},{location:"Embu Export Center",type:"export"},{location:"Embu Warehouse",type:"warehouse"}],AC002:[{location:"Mecca Central Market",type:"market"},{location:"Mecca Wholesale",type:"wholesale"},{location:"Mecca Retail",type:"retail"},{location:"Mecca Export",type:"export"},{location:"Mecca Warehouse",type:"warehouse"}],AC003:[{location:"Ena CBD Market",type:"market"},{location:"Ena Wholesale",type:"wholesale"},{location:"Ena Retail",type:"retail"},{location:"Ena Export",type:"export"},{location:"Ena Warehouse",type:"warehouse"}],AC004:[{location:"Ugweri Central Market",type:"market"},{location:"Ugweri Wholesale",type:"wholesale"},{location:"Ugweri Retail",type:"retail"},{location:"Ugweri Export",type:"export"},{location:"Ugweri Warehouse",type:"warehouse"}]},tt=[{code:"AC001",name:"Embu Area",region:"Embu County"},{code:"AC002",name:"Mecca Area",region:"Mecca Region"},{code:"AC003",name:"Ena Area",region:"Ena Region"},{code:"AC004",name:"Ugweri Area",region:"Ugweri Region"}],wt={date:new Date().toISOString().split("T")[0],transportCode:"",sourceAreaCode:"",sourceStationCode:"",destinationAreaCode:"",destinationLocation:"",destinationType:"market",buyerName:"",buyerId:"",buyerPhone:"",buyerType:"individual",quantityExpected:0,quantityReceived:0,condition:"good",itemPrice:0,deliveryTime:"",deliveryStatus:"pending",driverName:"",driverId:"",vehicleReg:"",verifiedBy:"",verificationDate:"",hasDiscrepancy:!1,discrepancyResolved:!1,lastModifiedBy:"",lastModifiedDate:new Date().toISOString()},Pa=()=>{var ce,A;const{user:r}=le(),{showSuccessNotification:o,showErrorNotification:C}=Pe(),[N,f]=x.useState([]),[c,m]=x.useState(!1),[u,S]=x.useState(!1),[t,n]=x.useState(null),[i,D]=x.useState(null),[d,R]=x.useState(wt),[q,K]=x.useState({}),[p,F]=x.useState({areaCode:"all",location:"all",status:"all",hasDiscrepancy:"all",dateRange:{start:"",end:""}}),[T,l]=x.useState(!1),[k,g]=x.useState("table"),I=()=>{R(wt),K({}),n(null)},b=h=>{if(h){n(h);const{id:P,totalRevenue:V,quantityDifference:_,...se}=h;R(se)}else I();m(!0)},a=()=>{m(!1),I()},E=h=>{D(h),S(!0)},s=()=>{const h={};return d.date||(h.date="Date is required"),d.transportCode||(h.transportCode="Transport code is required"),d.sourceAreaCode||(h.sourceAreaCode="Source area code is required"),d.destinationAreaCode||(h.destinationAreaCode="Destination area code is required"),d.destinationLocation||(h.destinationLocation="Destination location is required"),d.buyerName||(h.buyerName="Buyer name is required"),d.buyerPhone||(h.buyerPhone="Buyer phone is required"),(!d.quantityExpected||d.quantityExpected<=0)&&(h.quantityExpected="Valid expected quantity is required"),(!d.quantityReceived||d.quantityReceived<=0)&&(h.quantityReceived="Valid received quantity is required"),(!d.itemPrice||d.itemPrice<=0)&&(h.itemPrice="Valid price is required"),d.driverName||(h.driverName="Driver name is required"),d.deliveryTime||(h.deliveryTime="Delivery time is required"),K(h),Object.keys(h).length===0},v=h=>{if(h.preventDefault(),!s())return;const P=d.quantityReceived-d.quantityExpected,V=d.quantityReceived*d.itemPrice,_=Math.abs(P)>.1,se={...d,quantityDifference:P,totalRevenue:V,hasDiscrepancy:_,discrepancyType:_?(P>0,"quantity"):void 0,discrepancyDescription:_?`Quantity difference: ${P>0?"+":""}${P.toFixed(2)}kg`:void 0,verifiedBy:(r==null?void 0:r.name)||"Unknown",verificationDate:new Date().toISOString(),lastModifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedDate:new Date().toISOString()};if(t)f(N.map(y=>y.id===t.id?{...se,id:t.id}:y));else{const y=`DST-${Date.now()}`;f([...N,{...se,id:y}])}a()},O=h=>{window.confirm("Are you sure you want to delete this destination record?")&&(f(N.filter(P=>P.id!==h.id)),o("Success","Destination record deleted successfully"))},j=async()=>{l(!0);try{await new Promise(h=>setTimeout(h,1e3)),o("Success","Data refreshed successfully")}catch{C("Error","Failed to refresh data")}finally{l(!1)}},B=async h=>{try{await new Promise(P=>setTimeout(P,2e3)),o("Success",`${h.toUpperCase()} export completed`)}catch{C("Error",`Failed to export ${h.toUpperCase()}`)}},G=h=>{const P={...h,deliveryStatus:"delivered",verificationDate:new Date().toISOString(),verifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedDate:new Date().toISOString()};f(N.map(V=>V.id===h.id?P:V)),S(!1)},Z=h=>{const P={...h,discrepancyResolved:!0,lastModifiedBy:(r==null?void 0:r.name)||"Unknown",lastModifiedDate:new Date().toISOString()};f(N.map(V=>V.id===h.id?P:V))},W=x.useMemo(()=>N.filter(h=>!(p.areaCode!=="all"&&h.destinationAreaCode!==p.areaCode||p.location!=="all"&&h.destinationLocation!==p.location||p.status!=="all"&&h.deliveryStatus!==p.status||p.hasDiscrepancy!=="all"&&(p.hasDiscrepancy==="yes"&&!h.hasDiscrepancy||p.hasDiscrepancy==="no"&&h.hasDiscrepancy)||p.dateRange.start&&h.date<p.dateRange.start||p.dateRange.end&&h.date>p.dateRange.end)),[N,p]),X=[{key:"date",label:"Date",render:h=>ve(h),sortable:!0},{key:"transportCode",label:"Transport Code",sortable:!0},{key:"sourceAreaCode",label:"Source Area",sortable:!0},{key:"destinationLocation",label:"Destination",render:(h,P)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:h}),e.jsx("p",{className:"text-xs text-gray-500",children:P.destinationAreaCode})]}),sortable:!0},{key:"buyerName",label:"Buyer",render:(h,P)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:h}),e.jsx("p",{className:"text-xs text-gray-500",children:P.buyerPhone})]}),sortable:!0},{key:"quantityReceived",label:"Quantity",render:(h,P)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[h,"kg"]}),e.jsxs("p",{className:`text-xs ${P.quantityDifference>0?"text-green-600":P.quantityDifference<0?"text-red-600":"text-gray-500"}`,children:[P.quantityDifference>0?"+":"",P.quantityDifference.toFixed(1),"kg"]})]}),sortable:!0},{key:"deliveryStatus",label:"Status",render:(h,P)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h==="delivered"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":h==="in-transit"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":h==="failed"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":h==="disputed"?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:h}),P.hasDiscrepancy&&!P.discrepancyResolved&&e.jsx(re,{className:"h-4 w-4 text-red-500"})]}),sortable:!0},{key:"totalRevenue",label:"Revenue",render:h=>Q(h),sortable:!0},{key:"actions",label:"Actions",render:(h,P)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[P.deliveryStatus!=="delivered"&&e.jsx("button",{onClick:()=>E(P),className:"p-1 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20 rounded",title:"Verify Delivery",children:e.jsx(ee,{className:"h-4 w-4"})}),P.hasDiscrepancy&&!P.discrepancyResolved&&e.jsx("button",{onClick:()=>Z(P),className:"p-1 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded",title:"Resolve Discrepancy",children:e.jsx(re,{className:"h-4 w-4"})})]})}],H=x.useMemo(()=>{const h=W.length,P=W.reduce(($,Y)=>$+Y.quantityReceived,0),V=W.reduce(($,Y)=>$+Y.totalRevenue,0),_=W.filter($=>$.hasDiscrepancy&&!$.discrepancyResolved).length,se=W.filter($=>$.deliveryStatus==="delivered").length,y=h>0?se/h*100:0;return{totalDeliveries:h,totalQuantity:P,totalRevenue:V,deliveriesWithDiscrepancy:_,deliveryRate:y}},[W]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-purple",children:"Destination Records"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track deliveries and verify goods received at destination points with enhanced analytics"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[W.length," of ",N.length," records"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:j,disabled:T,className:"btn-teal flex items-center gap-2",children:[e.jsx(he,{className:`h-4 w-4 ${T?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:()=>B("csv"),className:"btn-blue flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]}),e.jsxs("button",{onClick:()=>b(),className:"btn-emerald flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Record"})]})]})]}),e.jsxs(w,{variant:"blue",className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Fe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters & Controls"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>g(k==="table"?"cards":"table"),className:"btn-purple flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),k==="table"?"Card View":"Table View"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(U,{label:"Area Code",value:p.areaCode,onChange:h=>F({...p,areaCode:h}),options:[{value:"all",label:"All Areas"},...tt.map(h=>({value:h.code,label:`${h.code} - ${h.name}`}))]}),e.jsx(U,{label:"Location",value:p.location,onChange:h=>F({...p,location:h}),options:[{value:"all",label:"All Locations"},...p.areaCode!=="all"?((ce=kt[p.areaCode])==null?void 0:ce.map(h=>({value:h.location,label:h.location})))||[]:[]]}),e.jsx(U,{label:"Status",value:p.status,onChange:h=>F({...p,status:h}),options:[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"in-transit",label:"In Transit"},{value:"delivered",label:"Delivered"},{value:"failed",label:"Failed"},{value:"disputed",label:"Disputed"}]}),e.jsx(U,{label:"Discrepancy",value:p.hasDiscrepancy,onChange:h=>F({...p,hasDiscrepancy:h}),options:[{value:"all",label:"All Records"},{value:"yes",label:"With Discrepancy"},{value:"no",label:"No Discrepancy"}]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{label:"Start Date",type:"date",value:p.dateRange.start,onChange:h=>F({...p,dateRange:{...p.dateRange,start:h}})}),e.jsx(M,{label:"End Date",type:"date",value:p.dateRange.end,onChange:h=>F({...p,dateRange:{...p.dateRange,end:h}})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(w,{variant:"blue",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-blue",children:e.jsx(de,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Deliveries"}),e.jsx("p",{className:"text-lg font-bold text-gradient-blue",children:H.totalDeliveries})]})]})}),e.jsx(w,{variant:"emerald",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-emerald",children:e.jsx(de,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Quantity"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-emerald",children:[(H.totalQuantity/1e3).toFixed(1),"K kg"]})]})]})}),e.jsx(w,{variant:"purple",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-purple",children:e.jsx(ye,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-purple",children:[(H.totalRevenue/1e3).toFixed(0),"K"]})]})]})}),e.jsx(w,{variant:"red",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-red",children:e.jsx(re,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Discrepancies"}),e.jsx("p",{className:"text-lg font-bold text-gradient-red",children:H.deliveriesWithDiscrepancy})]})]})}),e.jsx(w,{variant:"lime",className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg gradient-lime",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Delivery Rate"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-lime",children:[H.deliveryRate.toFixed(1),"%"]})]})]})})]}),e.jsx(w,{variant:"green",className:"p-6",children:e.jsx(Ke,{data:W,columns:X,onEdit:b,onDelete:O,emptyMessage:"No destination records found. Try adjusting your filters or click 'Add Record' to get started."})}),e.jsx(ke,{isOpen:c,onClose:a,title:t?"Edit Destination Record":"Add Destination Record",size:"xl",type:"info",icon:e.jsx(be,{className:"h-6 w-6"}),children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Date",type:"date",value:d.date,onChange:h=>R({...d,date:h}),error:q.date,required:!0}),e.jsx(M,{label:"Transport Code",type:"text",value:d.transportCode,onChange:h=>R({...d,transportCode:h}),error:q.transportCode,required:!0,placeholder:"e.g., TRIP-001"}),e.jsx(U,{label:"Source Area Code",value:d.sourceAreaCode,onChange:h=>R({...d,sourceAreaCode:h}),options:tt.map(h=>({value:h.code,label:`${h.code} - ${h.name}`})),error:q.sourceAreaCode,required:!0}),e.jsx(U,{label:"Destination Area Code",value:d.destinationAreaCode,onChange:h=>R({...d,destinationAreaCode:h}),options:tt.map(h=>({value:h.code,label:`${h.code} - ${h.name}`})),error:q.destinationAreaCode,required:!0}),e.jsx(U,{label:"Destination Location",value:d.destinationLocation,onChange:h=>R({...d,destinationLocation:h}),options:d.destinationAreaCode?((A=kt[d.destinationAreaCode])==null?void 0:A.map(h=>({value:h.location,label:h.location})))||[]:[],error:q.destinationLocation,required:!0}),e.jsx(U,{label:"Destination Type",value:d.destinationType,onChange:h=>R({...d,destinationType:h}),options:[{value:"market",label:"Market"},{value:"warehouse",label:"Warehouse"},{value:"retail",label:"Retail"},{value:"wholesale",label:"Wholesale"},{value:"export",label:"Export"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Buyer Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Buyer Name",type:"text",value:d.buyerName,onChange:h=>R({...d,buyerName:h}),error:q.buyerName,required:!0}),e.jsx(M,{label:"Buyer ID",type:"text",value:d.buyerId,onChange:h=>R({...d,buyerId:h}),placeholder:"Buyer identification"}),e.jsx(M,{label:"Buyer Phone",type:"tel",value:d.buyerPhone,onChange:h=>R({...d,buyerPhone:h}),error:q.buyerPhone,required:!0}),e.jsx(U,{label:"Buyer Type",value:d.buyerType,onChange:h=>R({...d,buyerType:h}),options:[{value:"individual",label:"Individual"},{value:"company",label:"Company"},{value:"cooperative",label:"Cooperative"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Goods Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(M,{label:"Expected Quantity (kg)",type:"number",value:d.quantityExpected,onChange:h=>R({...d,quantityExpected:h}),error:q.quantityExpected,required:!0}),e.jsx(M,{label:"Received Quantity (kg)",type:"number",value:d.quantityReceived,onChange:h=>R({...d,quantityReceived:h}),error:q.quantityReceived,required:!0}),e.jsx(U,{label:"Condition",value:d.condition,onChange:h=>R({...d,condition:h}),options:[{value:"excellent",label:"Excellent"},{value:"good",label:"Good"},{value:"fair",label:"Fair"},{value:"poor",label:"Poor"},{value:"damaged",label:"Damaged"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Price per kg",type:"number",value:d.itemPrice,onChange:h=>R({...d,itemPrice:h}),error:q.itemPrice,required:!0}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:Q(d.quantityReceived*d.itemPrice)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Delivery Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Driver Name",type:"text",value:d.driverName,onChange:h=>R({...d,driverName:h}),error:q.driverName,required:!0}),e.jsx(M,{label:"Driver ID",type:"text",value:d.driverId,onChange:h=>R({...d,driverId:h}),placeholder:"Driver identification"}),e.jsx(M,{label:"Vehicle Registration",type:"text",value:d.vehicleReg,onChange:h=>R({...d,vehicleReg:h}),required:!0}),e.jsx(M,{label:"Delivery Time",type:"datetime-local",value:d.deliveryTime,onChange:h=>R({...d,deliveryTime:h}),error:q.deliveryTime,required:!0}),e.jsx(U,{label:"Delivery Status",value:d.deliveryStatus,onChange:h=>R({...d,deliveryStatus:h}),options:[{value:"pending",label:"Pending"},{value:"in-transit",label:"In Transit"},{value:"delivered",label:"Delivered"},{value:"failed",label:"Failed"},{value:"disputed",label:"Disputed"}],required:!0})]})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Admin Notes"}),e.jsx("textarea",{value:d.adminNotes||"",onChange:h=>R({...d,adminNotes:h.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Admin notes and observations..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-blue",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-emerald",children:t?"Update Record":"Add Record"})]})]})}),e.jsx(ke,{isOpen:u,onClose:()=>S(!1),title:"Verify Delivery",size:"md",type:"warning",icon:e.jsx(ee,{className:"h-6 w-6"}),children:i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Delivery Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Transport Code:"})," ",i.transportCode]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Destination:"})," ",i.destinationLocation]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Buyer:"})," ",i.buyerName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Quantity Expected:"})," ",i.quantityExpected,"kg"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Quantity Received:"})," ",i.quantityReceived,"kg"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Condition:"})," ",i.condition]})]})]}),i.hasDiscrepancy&&e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(re,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Discrepancy Detected"})]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:i.discrepancyDescription})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>S(!1),className:"btn-blue",children:"Cancel"}),e.jsx("button",{onClick:()=>G(i),className:"btn-emerald",children:"Verify Delivery"})]})]})})]})},Ta=()=>{const{sourceRecords:r,user:o}=le(),[C,N]=x.useState("all"),[f,c]=x.useState("month"),m=[{code:"AC001",name:"Embu Area",region:"Embu County"},{code:"AC002",name:"Mecca Area",region:"Mecca Region"},{code:"AC003",name:"Ena Area",region:"Ena Region"},{code:"AC004",name:"Ugweri Area",region:"Ugweri Region"}],u=x.useMemo(()=>{const n=[];return m.forEach(i=>{const D=r.filter(k=>k.areaCode===i.code);if(D.length===0){n.push({areaCode:i.code,areaName:i.name,region:i.region,totalTrips:0,totalQuantity:0,totalRevenue:0,avgDeliveryTime:0,successRate:0,topStations:[],topDropOffs:[]});return}const d=D.reduce((k,g)=>k+g.quantitySold,0),R=D.reduce((k,g)=>k+g.totalCost,0),q=2.5+Math.random()*2,K=85+Math.random()*15,p=D.reduce((k,g)=>{const I=g.pickupStationCode;return k[I]||(k[I]={trips:0,revenue:0,name:I}),k[I].trips+=1,k[I].revenue+=g.totalCost,k},{}),F=Object.entries(p).map(([k,g])=>({stationCode:k,stationName:k,trips:g.trips,revenue:g.revenue})).sort((k,g)=>g.trips-k.trips).slice(0,3),T=D.reduce((k,g)=>{const I=g.dropOffPoint;return k[I]||(k[I]={trips:0,revenue:0}),k[I].trips+=1,k[I].revenue+=g.totalCost,k},{}),l=Object.entries(T).map(([k,g])=>({dropOff:k,trips:g.trips,revenue:g.revenue})).sort((k,g)=>g.trips-k.trips).slice(0,5);n.push({areaCode:i.code,areaName:i.name,region:i.region,totalTrips:D.length,totalQuantity:d,totalRevenue:R,avgDeliveryTime:q,successRate:K,topStations:F,topDropOffs:l})}),n.sort((i,D)=>D.totalTrips-i.totalTrips)},[r]),S=C==="all"?u:u.filter(n=>n.areaCode===C),t=x.useMemo(()=>{const n=u.reduce((R,q)=>R+q.totalTrips,0),i=u.reduce((R,q)=>R+q.totalQuantity,0),D=u.reduce((R,q)=>R+q.totalRevenue,0),d=u.length>0?u.reduce((R,q)=>R+q.successRate,0)/u.length:0;return{totalTrips:n,totalQuantity:i,totalRevenue:D,avgSuccessRate:d}},[u]);return(o==null?void 0:o.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs(w,{className:"p-8 text-center",children:[e.jsx(De,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Area performance analysis is only available to administrators."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Area Performance Analysis"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive analysis of pickup station performance by area codes"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:f,onChange:n=>c(n.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"})]}),e.jsxs("select",{value:C,onChange:n=>N(n.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Areas"}),m.map(n=>e.jsxs("option",{value:n.code,children:[n.code," - ",n.name]},n.code))]}),e.jsx("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:e.jsx(oe,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(ye,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Trips"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.totalTrips})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(de,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Quantity"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(t.totalQuantity/1e3).toFixed(1),"K kg"]})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500",children:e.jsx(pe,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(t.totalRevenue/1e3).toFixed(0),"K"]})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500",children:e.jsx(De,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Avg Success Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[t.avgSuccessRate.toFixed(1),"%"]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:S.map(n=>e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n.areaCode}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.areaName," - ",n.region]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Live Data"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trips"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n.totalTrips})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Quantity"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(n.totalQuantity/1e3).toFixed(1),"K kg"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[(n.totalRevenue/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Success Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[n.successRate.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Top Performing Stations"}),e.jsx("div",{className:"space-y-2",children:n.topStations.map((i,D)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-500",children:["#",D+1]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:i.stationCode})]}),e.jsxs("div",{className:"text-right text-xs",children:[e.jsxs("p",{className:"text-gray-500",children:[i.trips," trips"]}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(i.revenue/1e3).toFixed(1),"K"]})]})]},i.stationCode))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Top Drop-off Points"}),e.jsx("div",{className:"space-y-2",children:n.topDropOffs.map((i,D)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:i.dropOff})]}),e.jsxs("div",{className:"text-right text-xs",children:[e.jsxs("p",{className:"text-gray-500",children:[i.trips," trips"]}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(i.revenue/1e3).toFixed(1),"K"]})]})]},i.dropOff))})]})]},n.areaCode))})]})},Ct={employeeId:"",firstName:"",lastName:"",email:"",phone:"",role:"driver",department:"transport",status:"active",hireDate:new Date().toISOString().split("T")[0],salary:0,licenseNumber:"",licenseExpiry:"",assignedRoutes:[],assignedVehicles:[],performance:{rating:5,tripsCompleted:0,onTimeDelivery:100,customerSatisfaction:100,safetyScore:5},emergencyContact:{name:"",phone:"",relationship:""},address:"",notes:""},Ma=()=>{const{user:r}=le(),[o,C]=x.useState([{id:"1",employeeId:"EMP001",firstName:"John",lastName:"Kimani",email:"john.kimani@mwalimu.com",phone:"+254 712 345678",role:"driver",department:"transport",status:"active",hireDate:"2023-01-15",salary:45e3,licenseNumber:"DL123456",licenseExpiry:"2025-12-31",assignedRoutes:["Nairobi-Mombasa","Nairobi-Garissa"],assignedVehicles:["KAA 123A","KBB 456B"],performance:{rating:4.5,tripsCompleted:156,onTimeDelivery:92,customerSatisfaction:88,safetyScore:4.8},emergencyContact:{name:"Mary Kimani",phone:"+254 723 456789",relationship:"Spouse"},address:"Nairobi, Kenya",notes:"Excellent driver with clean record",lastLogin:"2024-01-15T08:30:00Z",createdAt:"2023-01-15T00:00:00Z",updatedAt:"2024-01-15T08:30:00Z"},{id:"2",employeeId:"EMP002",firstName:"Sarah",lastName:"Mwangi",email:"sarah.mwangi@mwalimu.com",phone:"+254 734 567890",role:"supervisor",department:"operations",status:"active",hireDate:"2022-06-01",salary:65e3,assignedRoutes:["All Routes"],assignedVehicles:[],performance:{rating:4.8,tripsCompleted:0,onTimeDelivery:95,customerSatisfaction:92,safetyScore:5},emergencyContact:{name:"Peter Mwangi",phone:"+254 745 678901",relationship:"Brother"},address:"Meru, Kenya",notes:"Team supervisor with excellent leadership skills",lastLogin:"2024-01-15T09:15:00Z",createdAt:"2022-06-01T00:00:00Z",updatedAt:"2024-01-15T09:15:00Z"}]),[N,f]=x.useState(!1),[c,m]=x.useState(null),[u,S]=x.useState(Ct),[t,n]=x.useState({}),[i,D]=x.useState({search:"",role:"all",department:"all",status:"all",performance:"all"}),d=()=>{S(Ct),n({}),m(null)},R=g=>{if(g){m(g);const{id:I,createdAt:b,updatedAt:a,...E}=g;S(E)}else d();f(!0)},q=()=>{f(!1),d()},K=()=>{const g={};return u.employeeId||(g.employeeId="Employee ID is required"),u.firstName||(g.firstName="First name is required"),u.lastName||(g.lastName="Last name is required"),u.email||(g.email="Email is required"),u.phone||(g.phone="Phone number is required"),u.hireDate||(g.hireDate="Hire date is required"),(!u.salary||u.salary<=0)&&(g.salary="Valid salary is required"),n(g),Object.keys(g).length===0},p=g=>{if(g.preventDefault(),!K())return;const I=new Date().toISOString(),b={...u,updatedAt:I};if(c)C(o.map(a=>a.id===c.id?{...b,id:c.id,createdAt:c.createdAt}:a));else{const a=Date.now().toString();C([...o,{...b,id:a,createdAt:I}])}q()},F=g=>{window.confirm(`Are you sure you want to delete ${g.firstName} ${g.lastName}?`)&&C(o.filter(I=>I.id!==g.id))},T=x.useMemo(()=>o.filter(g=>{const I=i.search===""||`${g.firstName} ${g.lastName}`.toLowerCase().includes(i.search.toLowerCase())||g.employeeId.toLowerCase().includes(i.search.toLowerCase())||g.email.toLowerCase().includes(i.search.toLowerCase()),b=i.role==="all"||g.role===i.role,a=i.department==="all"||g.department===i.department,E=i.status==="all"||g.status===i.status;let s=!0;if(i.performance!=="all"){const v=g.performance.rating;switch(i.performance){case"excellent":s=v>=4.5;break;case"good":s=v>=3.5&&v<4.5;break;case"average":s=v>=2.5&&v<3.5;break;case"poor":s=v<2.5;break}}return I&&b&&a&&E&&s}),[o,i]),l=[{key:"employeeId",label:"Employee ID",sortable:!0},{key:"firstName",label:"Name",render:(g,I)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[I.firstName," ",I.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:I.email})]}),sortable:!0},{key:"role",label:"Role",render:g=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200":g==="manager"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":g==="supervisor"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":g==="coordinator"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:g.charAt(0).toUpperCase()+g.slice(1)}),sortable:!0},{key:"department",label:"Department",sortable:!0},{key:"status",label:"Status",render:g=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":g==="inactive"?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":g==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:g.charAt(0).toUpperCase()+g.slice(1)}),sortable:!0},{key:"performance",label:"Performance",render:g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((I,b)=>e.jsx(jt,{className:`h-3 w-3 ${b<Math.floor(g.rating)?"text-yellow-400":"text-gray-300"}`},b))}),e.jsx("span",{className:"text-sm font-medium",children:g.rating.toFixed(1)})]})},{key:"hireDate",label:"Hire Date",render:g=>ve(g),sortable:!0}],k=x.useMemo(()=>{const g=o.length,I=o.filter(s=>s.status==="active").length,b=o.filter(s=>s.role==="driver").length,a=o.reduce((s,v)=>s+v.performance.rating,0)/g,E=o.reduce((s,v)=>s+v.performance.tripsCompleted,0);return{totalStaff:g,activeStaff:I,drivers:b,avgPerformance:a||0,totalTrips:E}},[o]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage staff members, roles, and performance"})]}),e.jsxs("button",{onClick:()=>R(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Staff"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(lt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Staff"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.totalStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(lt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Active Staff"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.activeStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500",children:e.jsx(fe,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Drivers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.drivers})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500",children:e.jsx(jt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Avg Performance"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.avgPerformance.toFixed(1)})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500",children:e.jsx(be,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Trips"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:k.totalTrips})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(Fe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff...",value:i.search,onChange:g=>D({...i,search:g.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Role",value:i.role,onChange:g=>D({...i,role:g}),options:[{value:"all",label:"All Roles"},{value:"driver",label:"Driver"},{value:"supervisor",label:"Supervisor"},{value:"coordinator",label:"Coordinator"},{value:"manager",label:"Manager"},{value:"admin",label:"Admin"}]}),e.jsx(U,{label:"Department",value:i.department,onChange:g=>D({...i,department:g}),options:[{value:"all",label:"All Departments"},{value:"transport",label:"Transport"},{value:"operations",label:"Operations"},{value:"logistics",label:"Logistics"},{value:"management",label:"Management"}]}),e.jsx(U,{label:"Status",value:i.status,onChange:g=>D({...i,status:g}),options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"on-leave",label:"On Leave"}]}),e.jsx(U,{label:"Performance",value:i.performance,onChange:g=>D({...i,performance:g}),options:[{value:"all",label:"All Performance"},{value:"excellent",label:"Excellent (4.5+)"},{value:"good",label:"Good (3.5-4.4)"},{value:"average",label:"Average (2.5-3.4)"},{value:"poor",label:"Poor (<2.5)"}]})]})]}),e.jsx(w,{className:"p-6",children:e.jsx(Ke,{data:T,columns:l,onEdit:R,onDelete:F,emptyMessage:"No staff members found. Click 'Add Staff' to get started."})}),e.jsx(ke,{isOpen:N,onClose:q,title:c?"Edit Staff Member":"Add Staff Member",size:"lg",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Employee ID",type:"text",value:u.employeeId,onChange:g=>S({...u,employeeId:g}),error:t.employeeId,required:!0}),e.jsx(M,{label:"Hire Date",type:"date",value:u.hireDate,onChange:g=>S({...u,hireDate:g}),error:t.hireDate,required:!0}),e.jsx(M,{label:"First Name",type:"text",value:u.firstName,onChange:g=>S({...u,firstName:g}),error:t.firstName,required:!0}),e.jsx(M,{label:"Last Name",type:"text",value:u.lastName,onChange:g=>S({...u,lastName:g}),error:t.lastName,required:!0}),e.jsx(M,{label:"Email",type:"email",value:u.email,onChange:g=>S({...u,email:g}),error:t.email,required:!0}),e.jsx(M,{label:"Phone",type:"tel",value:u.phone,onChange:g=>S({...u,phone:g}),error:t.phone,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Role & Department"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Role",value:u.role,onChange:g=>S({...u,role:g}),options:[{value:"driver",label:"Driver"},{value:"supervisor",label:"Supervisor"},{value:"coordinator",label:"Coordinator"},{value:"manager",label:"Manager"},{value:"admin",label:"Admin"}],required:!0}),e.jsx(U,{label:"Department",value:u.department,onChange:g=>S({...u,department:g}),options:[{value:"transport",label:"Transport"},{value:"operations",label:"Operations"},{value:"logistics",label:"Logistics"},{value:"management",label:"Management"}],required:!0}),e.jsx(U,{label:"Status",value:u.status,onChange:g=>S({...u,status:g}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"on-leave",label:"On Leave"}],required:!0}),e.jsx(M,{label:"Salary",type:"number",value:u.salary,onChange:g=>S({...u,salary:g}),error:t.salary,required:!0})]})]}),u.role==="driver"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Driver Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"License Number",type:"text",value:u.licenseNumber||"",onChange:g=>S({...u,licenseNumber:g})}),e.jsx(M,{label:"License Expiry",type:"date",value:u.licenseExpiry||"",onChange:g=>S({...u,licenseExpiry:g})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(M,{label:"Contact Name",type:"text",value:u.emergencyContact.name,onChange:g=>S({...u,emergencyContact:{...u.emergencyContact,name:g}})}),e.jsx(M,{label:"Contact Phone",type:"tel",value:u.emergencyContact.phone,onChange:g=>S({...u,emergencyContact:{...u.emergencyContact,phone:g}})}),e.jsx(M,{label:"Relationship",type:"text",value:u.emergencyContact.relationship,onChange:g=>S({...u,emergencyContact:{...u.emergencyContact,relationship:g}})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{label:"Address",type:"text",value:u.address,onChange:g=>S({...u,address:g})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:u.notes||"",onChange:g=>S({...u,notes:g.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Additional notes about the staff member..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:c?"Update Staff":"Add Staff"})]})]})})]})},Ea=()=>{const{user:r,isDark:o,setIsDark:C,sourceRecords:N,transportLogs:f}=le(),{showSuccessNotification:c,showErrorNotification:m}=Pe(),u=x.useRef(null),[S,t]=x.useState("profile"),[n,i]=x.useState(!1),[D,d]=x.useState(!1),[R,q]=x.useState(""),[K,p]=x.useState(""),[F,T]=x.useState(""),[l,k]=x.useState({id:(r==null?void 0:r.id)||"1",name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",phone:"+254 700 000 000",role:(r==null?void 0:r.role)||"user",department:"Transport Operations",avatar:"",bio:"Transport operations specialist with focus on miraa logistics and delivery management.",location:"Nairobi, Kenya",joinDate:"2024-01-15",lastLogin:new Date().toISOString(),isActive:!0}),[g,I]=x.useState({twoFactorEnabled:!1,passwordLastChanged:"2024-01-15",loginAttempts:0,trustedDevices:2,sessionTimeout:30}),[b,a]=x.useState({maintenanceMode:!1,autoBackup:!0,backupFrequency:"daily",dataRetention:365,maxFileSize:10,systemLogs:!0}),[E,s]=x.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,deliveryAlerts:!0,discrepancyAlerts:!0,weeklyReports:!1,systemAlerts:(r==null?void 0:r.role)==="admin",maintenanceAlerts:(r==null?void 0:r.role)==="admin",securityAlerts:!0,marketingEmails:!1,soundEffects:!1,quietHours:{enabled:!1,start:"22:00",end:"07:00"}}),[v,O]=x.useState({theme:o?"dark":"light",language:"en",timezone:"Africa/Nairobi",dateFormat:"DD/MM/YYYY",timeFormat:"24h",currency:"KES",dashboardLayout:"grid",sidebarCollapsed:!1,animations:!0,soundEffects:!1}),j={totalRecords:N.length,totalSize:"2.4 MB",lastBackup:"2024-01-20 14:30",nextBackup:"2024-01-21 14:30"},B=[{id:"profile",label:"Profile",icon:Ie,description:"Manage your personal information"},{id:"security",label:"Security",icon:je,description:"Password and security settings"},{id:"notifications",label:"Notifications",icon:we,description:"Configure notification preferences"},{id:"appearance",label:"Appearance",icon:nt,description:"Customize your interface"},{id:"data",label:"Data Management",icon:Le,description:"Export, import, and backup data"},...(r==null?void 0:r.role)==="admin"?[{id:"system",label:"System",icon:ue,description:"System administration"}]:[]],G=()=>{var A;(A=u.current)==null||A.click()},Z=A=>{var P;const h=(P=A.target.files)==null?void 0:P[0];if(h){if(h.size>5*1024*1024){m("File Too Large","Please select an image smaller than 5MB.");return}const V=new FileReader;V.onload=_=>{var se;k({...l,avatar:(se=_.target)==null?void 0:se.result}),c("Avatar Updated","Your profile picture has been updated successfully.")},V.readAsDataURL(h)}},W=async()=>{i(!0);try{await new Promise(A=>setTimeout(A,1e3)),c("Profile Updated","Your profile information has been saved successfully.")}catch{m("Update Failed","Failed to update profile. Please try again.")}finally{i(!1)}},X=async()=>{if(K!==F){m("Password Mismatch","New password and confirmation do not match.");return}if(K.length<8){m("Weak Password","Password must be at least 8 characters long.");return}i(!0);try{await new Promise(A=>setTimeout(A,1e3)),I({...g,passwordLastChanged:new Date().toISOString()}),q(""),p(""),T(""),c("Password Changed","Your password has been updated successfully.")}catch{m("Password Change Failed","Failed to change password. Please try again.")}finally{i(!1)}},H=async()=>{i(!0);try{const A={profile:l,settings:{notifications:E,appearance:v},data:{sourceRecords:N,transportLogs:f},exportDate:new Date().toISOString(),version:"1.0"},h=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),P=URL.createObjectURL(h),V=document.createElement("a");V.href=P,V.download=`mwalimu-transporters-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(P),c("Data Exported","Your data has been exported successfully.")}catch{m("Export Failed","Failed to export data. Please try again.")}finally{i(!1)}},ce=async()=>{i(!0);try{await new Promise(A=>setTimeout(A,1e3)),a({...b,maintenanceMode:!b.maintenanceMode}),c(b.maintenanceMode?"Maintenance Mode Disabled":"Maintenance Mode Enabled",b.maintenanceMode?"System is now accessible to users.":"System is now in maintenance mode. Users will see a maintenance page.")}catch{m("Operation Failed","Failed to toggle maintenance mode.")}finally{i(!1)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"page-header -mx-6 px-6 py-8 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title text-gradient-primary",children:"Settings"}),e.jsx("p",{className:"page-subtitle",children:"Manage your account preferences, security settings, and system configurations"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l.isActive?"bg-green-500":"bg-red-500"} animate-pulse`}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:l.isActive?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Last login: ",new Date(l.lastLogin).toLocaleDateString()]})]})})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-80",children:e.jsxs(w,{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Settings Menu"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure your account and system preferences"})]}),e.jsx("nav",{className:"space-y-2",children:B.map(A=>e.jsxs("button",{onClick:()=>t(A.id),className:`flex items-start space-x-3 w-full px-4 py-3 rounded-xl text-left transition-all duration-200 hover-lift ${S===A.id?"bg-gradient-to-r from-bright-green to-green-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(A.icon,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"font-medium block",children:A.label}),e.jsx("span",{className:`text-xs mt-1 ${S===A.id?"text-green-100":"text-gray-500 dark:text-gray-400"}`,children:A.description})]})]},A.id))}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Records"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.totalRecords})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Data Size"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:j.totalSize})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Backup"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(j.lastBackup).toLocaleDateString()})]})]})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs(w,{className:"card-enhanced p-8",children:[S==="profile"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(Ie,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Profile Settings"})]}),e.jsxs("div",{className:"flex items-center space-x-6 p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-bright-green to-green-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:l.avatar?e.jsx("img",{src:l.avatar,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):l.name.charAt(0).toUpperCase()}),e.jsx("button",{onClick:G,className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white hover:bg-blue-600 transition-colors",children:e.jsx(aa,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:l.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.email}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[l.role==="admin"?"Administrator":"User"," • ",l.department]})]}),e.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:Z,className:"hidden"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(M,{label:"Full Name",type:"text",value:l.name,onChange:A=>k({...l,name:A}),required:!0}),e.jsx(M,{label:"Email Address",type:"email",value:l.email,onChange:A=>k({...l,email:A}),required:!0}),e.jsx(M,{label:"Phone Number",type:"tel",value:l.phone,onChange:A=>k({...l,phone:A})}),e.jsx(M,{label:"Department",type:"text",value:l.department,onChange:A=>k({...l,department:A})}),e.jsx(M,{label:"Location",type:"text",value:l.location,onChange:A=>k({...l,location:A})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),e.jsx("textarea",{value:l.bio,onChange:A=>k({...l,bio:A.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Tell us about yourself..."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:e.jsx(ee,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Account Status"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Active • Joined ",new Date(l.joinDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Role"}),e.jsx("p",{className:"font-semibold text-bright-green",children:l.role==="admin"?"Administrator":"User"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:W,disabled:n,className:"btn-primary flex items-center space-x-2",children:[n?e.jsx(he,{className:"h-4 w-4 animate-spin"}):e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:n?"Saving...":"Save Profile"})]})})]}),S==="security"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(je,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Security Settings"})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Change Password"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Current Password",type:D?"text":"password",value:R,onChange:A=>q(A),required:!0}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>d(!D),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:D?e.jsx(Rt,{className:"h-4 w-4"}):e.jsx(Be,{className:"h-4 w-4"})})}),e.jsx(M,{label:"New Password",type:D?"text":"password",value:K,onChange:A=>p(A),required:!0}),e.jsx(M,{label:"Confirm New Password",type:D?"text":"password",value:F,onChange:A=>T(A),required:!0})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:X,disabled:n||!R||!K||!F,className:"btn-primary flex items-center space-x-2",children:[n?e.jsx(he,{className:"h-4 w-4 animate-spin"}):e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:n?"Changing...":"Change Password"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(it,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Two-Factor Authentication"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Add an extra layer of security to your account"}),e.jsx("button",{className:"btn-outline w-full",children:g.twoFactorEnabled?"Disable 2FA":"Enable 2FA"})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(me,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Login Activity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Password Change"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(g.passwordLastChanged).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Trusted Devices"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:g.trustedDevices})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Session Timeout"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[g.sessionTimeout," min"]})]})]})]})]})]}),S==="notifications"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:e.jsx(we,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Notification Preferences"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customize how and when you receive notifications"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${E.emailNotifications?"bg-green-500":"bg-gray-400"} animate-pulse`}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:E.emailNotifications?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center space-x-2",children:[e.jsx(ra,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Notification Channels"})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl border border-blue-200 dark:border-blue-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(At,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive notifications via email"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Primary notification method"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.emailNotifications,onChange:A=>s({...E,emailNotifications:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-500/20 dark:peer-focus:ring-blue-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl border border-green-200 dark:border-green-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(la,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive notifications via SMS"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Requires phone number verification"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.smsNotifications,onChange:A=>s({...E,smsNotifications:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-500/20 dark:peer-focus:ring-green-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl border border-purple-200 dark:border-purple-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(we,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Browser and mobile push notifications"}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"Real-time alerts"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.pushNotifications,onChange:A=>s({...E,pushNotifications:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-500/20 dark:peer-focus:ring-purple-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-500"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center space-x-2",children:[e.jsx(He,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{children:"Notification Types"})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-xl border border-orange-200 dark:border-orange-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-orange-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(fe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Delivery Alerts"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified when deliveries are completed"}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Critical business updates"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.deliveryAlerts,onChange:A=>s({...E,deliveryAlerts:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-500/20 dark:peer-focus:ring-orange-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-orange-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-xl border border-red-200 dark:border-red-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-red-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(re,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Discrepancy Alerts"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified about quantity discrepancies"}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"High priority alerts"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.discrepancyAlerts,onChange:A=>s({...E,discrepancyAlerts:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-500/20 dark:peer-focus:ring-red-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-red-500"})]})]})}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl border border-indigo-200 dark:border-indigo-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-indigo-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Weekly Reports"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive weekly performance summaries"}),e.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-1",children:"Business insights"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.weeklyReports,onChange:A=>s({...E,weeklyReports:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-500/20 dark:peer-focus:ring-indigo-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center space-x-2",children:[e.jsx(ue,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Advanced Settings"})]})}),e.jsxs("div",{className:"group p-6 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:shadow-lg transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gray-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:e.jsx(Se,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Quiet Hours"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Disable notifications during specific hours"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Respect your sleep schedule"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.quietHours.enabled,onChange:A=>s({...E,quietHours:{...E.quietHours,enabled:A.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-500/20 dark:peer-focus:ring-gray-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-gray-500"})]})]}),E.quietHours.enabled&&e.jsx("div",{className:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Start Time",type:"time",value:E.quietHours.start,onChange:A=>s({...E,quietHours:{...E.quietHours,start:A}}),leftIcon:e.jsx(gt,{className:"h-4 w-4"})}),e.jsx(M,{label:"End Time",type:"time",value:E.quietHours.end,onChange:A=>s({...E,quietHours:{...E.quietHours,end:A}}),leftIcon:e.jsx(St,{className:"h-4 w-4"})})]})})]}),e.jsx("div",{className:"group p-6 bg-gradient-to-r from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl border border-pink-200 dark:border-pink-800 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-pink-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-200",children:E.soundEffects?e.jsx(Dt,{className:"h-6 w-6 text-white"}):e.jsx(na,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Play sounds for notifications"}),e.jsx("p",{className:"text-xs text-pink-600 dark:text-pink-400 mt-1",children:"Audio feedback"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.soundEffects,onChange:A=>s({...E,soundEffects:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-pink-500/20 dark:peer-focus:ring-pink-500/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-pink-500"})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsxs("button",{className:"btn-outline flex items-center justify-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset to Defaults"})]}),e.jsxs("button",{className:"btn-primary flex items-center justify-center space-x-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Notification Settings"})]})]})]}),S==="appearance"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(nt,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Appearance Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{label:"Theme",value:v.theme,onChange:A=>{O({...v,theme:A}),A==="dark"&&!o?C(!0):A==="light"&&o&&C(!1)},options:[{value:"light",label:"Light"},{value:"dark",label:"Dark"}]}),e.jsx(U,{label:"Language",value:v.language,onChange:A=>O({...v,language:A}),options:[{value:"en",label:"English"},{value:"sw",label:"Kiswahili"}]}),e.jsx(U,{label:"Timezone",value:v.timezone,onChange:A=>O({...v,timezone:A}),options:[{value:"Africa/Nairobi",label:"Nairobi (EAT)"},{value:"Africa/Dar_es_Salaam",label:"Dar es Salaam (EAT)"},{value:"UTC",label:"UTC"}]}),e.jsx(U,{label:"Date Format",value:v.dateFormat,onChange:A=>O({...v,dateFormat:A}),options:[{value:"DD/MM/YYYY",label:"DD/MM/YYYY"},{value:"MM/DD/YYYY",label:"MM/DD/YYYY"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD"}]}),e.jsx(U,{label:"Time Format",value:v.timeFormat,onChange:A=>O({...v,timeFormat:A}),options:[{value:"12h",label:"12 Hour (AM/PM)"},{value:"24h",label:"24 Hour"}]}),e.jsx(U,{label:"Currency",value:v.currency,onChange:A=>O({...v,currency:A}),options:[{value:"KES",label:"Kenyan Shilling (KES)"},{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"}]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Animations"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable smooth transitions and animations"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.animations,onChange:A=>O({...v,animations:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Sound Effects"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Play sounds for notifications and actions"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.soundEffects,onChange:A=>O({...v,soundEffects:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Appearance Settings"})]})})]}),S==="data"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(Le,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Data Management"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Total Records"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j.totalRecords}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Source & Transport records"})]}),e.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(mt,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Data Size"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.totalSize}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total storage used"})]}),e.jsxs("div",{className:"p-6 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Ge,{className:"h-5 w-5 text-purple-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Last Backup"})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:new Date(j.lastBackup).toLocaleDateString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatic backup"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(oe,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Export Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Download all your data including records, reports, and settings as a JSON file."}),e.jsxs("button",{onClick:H,disabled:n,className:"btn-secondary w-full flex items-center justify-center space-x-2",children:[n?e.jsx(he,{className:"h-4 w-4 animate-spin"}):e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:n?"Exporting...":"Export Data"})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(dt,{className:"h-6 w-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Import Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Import data from CSV or Excel files. Supported formats: CSV, XLSX, JSON."}),e.jsxs("button",{className:"btn-primary w-full flex items-center justify-center space-x-2",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:"Import Data"})]})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Backup Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Backup Frequency",value:b.backupFrequency,onChange:A=>a({...b,backupFrequency:A}),options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}]}),e.jsx(M,{label:"Data Retention (days)",type:"number",value:b.dataRetention.toString(),onChange:A=>a({...b,dataRetention:parseInt(A)})})]})]}),e.jsxs("div",{className:"p-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(je,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:"Data Security"})]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Your data is encrypted and stored securely. Only you and authorized administrators can access your information. All exports are encrypted and require authentication to open."})]})]}),S==="system"&&(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(ue,{className:"h-6 w-6 text-bright-green"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"System Administration"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"System Status"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:"Operational"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All systems running normally"})]}),e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(ze,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Active Users"})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:"12"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currently online"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(re,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.maintenanceMode?"System is in maintenance mode":"Enable maintenance mode for system updates"})]})]}),e.jsx("button",{onClick:ce,disabled:n,className:`px-4 py-2 rounded-lg font-medium transition-colors ${b.maintenanceMode?"bg-green-600 hover:bg-green-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:n?"Processing...":b.maintenanceMode?"Disable":"Enable"})]})}),e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ia,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Auto Backup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatic daily backups to cloud storage"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.autoBackup,onChange:A=>a({...b,autoBackup:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})}),e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ye,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"System Logs"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable detailed system activity logging"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.systemLogs,onChange:A=>a({...b,systemLogs:A.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})})]}),e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Version"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Update"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"2024-01-20"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Database Size"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"2.4 MB"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Uptime"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"99.9%"})]})]})]})]})]})})]})]})},La=()=>{var T,l,k,g,I,b;const{user:r}=le(),[o,C]=x.useState(!1),[N,f]=x.useState(null),[c,m]=x.useState({search:"",type:"all",status:"all",areaCode:"all",paymentTerms:"all"}),[u,S]=x.useState([{id:"1",buyerId:"BYR-001",firstName:"Ahmed",lastName:"Hassan",email:"ahmed.hassan@email.com",phone:"+254 712 345678",company:"Hassan Enterprises",buyerType:"company",location:"Nairobi CBD",areaCode:"AC005",preferredDeliveryTime:"09:00-12:00",creditLimit:5e5,currentBalance:125e3,paymentTerms:"net30",status:"active",registrationDate:new Date(Date.now()-90*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-2*24*60*60*1e3).toISOString(),totalPurchases:45,totalValue:225e4,averageOrderValue:5e4,loyaltyPoints:2250,rating:4.8,notes:"Reliable buyer, always pays on time",emergencyContact:{name:"Fatima Hassan",phone:"+254 723 456789",relationship:"Wife"},documents:{idCopy:!0,businessLicense:!0,taxCertificate:!0}},{id:"2",buyerId:"BYR-002",firstName:"Mary",lastName:"Wanjiku",email:"mary.wanjiku@email.com",phone:"+254 734 567890",buyerType:"individual",location:"Mombasa",areaCode:"AC003",preferredDeliveryTime:"14:00-17:00",creditLimit:1e5,currentBalance:0,paymentTerms:"cash",status:"active",registrationDate:new Date(Date.now()-60*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-5*24*60*60*1e3).toISOString(),totalPurchases:12,totalValue:48e4,averageOrderValue:4e4,loyaltyPoints:480,rating:4.5,notes:"Prefers morning deliveries"},{id:"3",buyerId:"BYR-003",firstName:"Cooperative",lastName:"Farmers Union",email:"info@farmersunion.co.ke",phone:"+254 745 678901",company:"Meru Farmers Cooperative",buyerType:"cooperative",location:"Meru Town",areaCode:"AC001",preferredDeliveryTime:"08:00-10:00",creditLimit:1e6,currentBalance:25e4,paymentTerms:"net60",status:"active",registrationDate:new Date(Date.now()-120*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-1*24*60*60*1e3).toISOString(),totalPurchases:78,totalValue:39e5,averageOrderValue:5e4,loyaltyPoints:3900,rating:4.9,notes:"Large volume buyer, seasonal patterns",emergencyContact:{name:"John Mwangi",phone:"+254 756 789012",relationship:"Secretary"},documents:{idCopy:!0,businessLicense:!0,taxCertificate:!0}},{id:"4",buyerId:"BYR-004",firstName:"Omar",lastName:"Ali",email:"omar.ali@email.com",phone:"+254 767 890123",buyerType:"individual",location:"Garissa",areaCode:"AC004",preferredDeliveryTime:"10:00-14:00",creditLimit:75e3,currentBalance:45e3,paymentTerms:"credit",status:"suspended",registrationDate:new Date(Date.now()-30*24*60*60*1e3).toISOString(),lastPurchaseDate:new Date(Date.now()-15*24*60*60*1e3).toISOString(),totalPurchases:8,totalValue:24e4,averageOrderValue:3e4,loyaltyPoints:240,rating:3.2,notes:"Payment issues, account suspended"}]),[t,n]=x.useState({firstName:"",lastName:"",email:"",phone:"",company:"",buyerType:"individual",location:"",areaCode:"",preferredDeliveryTime:"",creditLimit:0,currentBalance:0,paymentTerms:"cash",status:"pending",lastPurchaseDate:"",notes:"",emergencyContact:{name:"",phone:"",relationship:""},documents:{idCopy:!1,businessLicense:!1,taxCertificate:!1}}),i=()=>{n({firstName:"",lastName:"",email:"",phone:"",company:"",buyerType:"individual",location:"",areaCode:"",preferredDeliveryTime:"",creditLimit:0,currentBalance:0,paymentTerms:"cash",status:"pending",lastPurchaseDate:"",notes:"",emergencyContact:{name:"",phone:"",relationship:""},documents:{idCopy:!1,businessLicense:!1,taxCertificate:!1}}),f(null)},D=a=>{if(a){f(a);const{id:E,buyerId:s,registrationDate:v,totalPurchases:O,totalValue:j,averageOrderValue:B,loyaltyPoints:G,rating:Z,...W}=a;n(W)}else i();C(!0)},d=()=>{C(!1),i()},R=a=>{a.preventDefault();const E=new Date().toISOString(),s={...t,registrationDate:E,totalPurchases:0,totalValue:0,averageOrderValue:0,loyaltyPoints:0,rating:0};if(N)S(u.map(v=>v.id===N.id?{...s,id:N.id,buyerId:N.buyerId}:v));else{const v=Date.now().toString(),O=`BYR-${String(u.length+1).padStart(3,"0")}`;S([...u,{...s,id:v,buyerId:O}])}d()},q=a=>{window.confirm(`Are you sure you want to delete buyer ${a.firstName} ${a.lastName}?`)&&S(u.filter(E=>E.id!==a.id))},K=x.useMemo(()=>u.filter(a=>{var B;const E=c.search===""||a.firstName.toLowerCase().includes(c.search.toLowerCase())||a.lastName.toLowerCase().includes(c.search.toLowerCase())||a.email.toLowerCase().includes(c.search.toLowerCase())||((B=a.company)==null?void 0:B.toLowerCase().includes(c.search.toLowerCase()))||a.buyerId.toLowerCase().includes(c.search.toLowerCase()),s=c.type==="all"||a.buyerType===c.type,v=c.status==="all"||a.status===c.status,O=c.areaCode==="all"||a.areaCode===c.areaCode,j=c.paymentTerms==="all"||a.paymentTerms===c.paymentTerms;return E&&s&&v&&O&&j}),[u,c]),p=[{key:"buyerId",label:"Buyer ID",sortable:!0},{key:"firstName",label:"Name",render:(a,E)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[a," ",E.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:E.company||"Individual"})]}),sortable:!0},{key:"buyerType",label:"Type",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="company"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":a==="cooperative"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"location",label:"Location",render:(a,E)=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a}),e.jsx("p",{className:"text-xs text-gray-500",children:E.areaCode})]}),sortable:!0},{key:"status",label:"Status",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":a==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":a==="inactive"?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"totalValue",label:"Total Value",render:a=>Q(a),sortable:!0},{key:"currentBalance",label:"Balance",render:a=>e.jsx("span",{className:a>0?"text-red-600":"text-green-600",children:Q(a)}),sortable:!0},{key:"rating",label:"Rating",render:a=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(st,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm font-medium",children:a.toFixed(1)})]}),sortable:!0}],F=x.useMemo(()=>{const a=u.length,E=u.filter(j=>j.status==="active").length,s=u.reduce((j,B)=>j+B.totalValue,0),v=u.reduce((j,B)=>j+B.currentBalance,0),O=u.length>0?u.reduce((j,B)=>j+B.rating,0)/u.length:0;return{totalBuyers:a,activeBuyers:E,totalValue:s,totalBalance:v,averageRating:O}},[u]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Buyers Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive buyer database and relationship management"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>D(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Buyer"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500 flex-shrink-0",children:e.jsx(ze,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Buyers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:F.totalBuyers})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500 flex-shrink-0",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:F.activeBuyers})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500 flex-shrink-0",children:e.jsx(Ve,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Value"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:Q(F.totalValue)})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500 flex-shrink-0",children:e.jsx(da,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Outstanding"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:Q(F.totalBalance)})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500 flex-shrink-0",children:e.jsx(st,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Avg Rating"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:F.averageRating.toFixed(1)})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(Fe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search buyers...",value:c.search,onChange:a=>m({...c,search:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Type",value:c.type,onChange:a=>m({...c,type:a}),options:[{value:"all",label:"All Types"},{value:"individual",label:"Individual"},{value:"company",label:"Company"},{value:"cooperative",label:"Cooperative"}]}),e.jsx(U,{label:"Status",value:c.status,onChange:a=>m({...c,status:a}),options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}]}),e.jsx(U,{label:"Area Code",value:c.areaCode,onChange:a=>m({...c,areaCode:a}),options:[{value:"all",label:"All Areas"},{value:"AC001",label:"AC001 - Embu Area"},{value:"AC002",label:"AC002 - Mecca Area"},{value:"AC003",label:"AC003 - Ena Area"},{value:"AC004",label:"AC004 - Ugweri Area"}]}),e.jsx(U,{label:"Payment Terms",value:c.paymentTerms,onChange:a=>m({...c,paymentTerms:a}),options:[{value:"all",label:"All Terms"},{value:"cash",label:"Cash"},{value:"credit",label:"Credit"},{value:"net30",label:"Net 30"},{value:"net60",label:"Net 60"}]})]})]}),e.jsx(w,{className:"p-6 overflow-x-auto",children:e.jsx(Ke,{data:K,columns:p,onEdit:D,onDelete:q,emptyMessage:"No buyers found matching the current filters."})}),e.jsx(ke,{isOpen:o,onClose:d,title:N?"Edit Buyer":"Add New Buyer",size:"xl",children:e.jsx("div",{className:"max-h-[80vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(M,{label:"First Name",type:"text",value:t.firstName,onChange:a=>n({...t,firstName:a}),required:!0}),e.jsx(M,{label:"Last Name",type:"text",value:t.lastName,onChange:a=>n({...t,lastName:a}),required:!0}),e.jsx(M,{label:"Email",type:"email",value:t.email,onChange:a=>n({...t,email:a}),required:!0}),e.jsx(M,{label:"Phone",type:"tel",value:t.phone,onChange:a=>n({...t,phone:a}),required:!0}),e.jsx(M,{label:"Company (Optional)",type:"text",value:t.company||"",onChange:a=>n({...t,company:a})}),e.jsx(U,{label:"Buyer Type",value:t.buyerType,onChange:a=>n({...t,buyerType:a}),options:[{value:"individual",label:"Individual"},{value:"company",label:"Company"},{value:"cooperative",label:"Cooperative"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Location & Delivery"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Location",type:"text",value:t.location,onChange:a=>n({...t,location:a}),required:!0}),e.jsx(U,{label:"Area Code",value:t.areaCode,onChange:a=>n({...t,areaCode:a}),options:[{value:"AC001",label:"AC001 - Embu Area"},{value:"AC002",label:"AC002 - Mecca Area"},{value:"AC003",label:"AC003 - Ena Area"},{value:"AC004",label:"AC004 - Ugweri Area"}],required:!0}),e.jsx(M,{label:"Preferred Delivery Time",type:"text",value:t.preferredDeliveryTime,onChange:a=>n({...t,preferredDeliveryTime:a}),placeholder:"e.g., 09:00-12:00"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Credit Limit",type:"number",value:t.creditLimit,onChange:a=>n({...t,creditLimit:Number(a)}),required:!0}),e.jsx(M,{label:"Current Balance",type:"number",value:t.currentBalance,onChange:a=>n({...t,currentBalance:Number(a)}),required:!0}),e.jsx(U,{label:"Payment Terms",value:t.paymentTerms,onChange:a=>n({...t,paymentTerms:a}),options:[{value:"cash",label:"Cash"},{value:"credit",label:"Credit"},{value:"net30",label:"Net 30"},{value:"net60",label:"Net 60"}],required:!0}),e.jsx(U,{label:"Status",value:t.status,onChange:a=>n({...t,status:a}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(M,{label:"Contact Name",type:"text",value:((T=t.emergencyContact)==null?void 0:T.name)||"",onChange:a=>n({...t,emergencyContact:{...t.emergencyContact,name:a}})}),e.jsx(M,{label:"Contact Phone",type:"tel",value:((l=t.emergencyContact)==null?void 0:l.phone)||"",onChange:a=>n({...t,emergencyContact:{...t.emergencyContact,phone:a}})}),e.jsx(M,{label:"Relationship",type:"text",value:((k=t.emergencyContact)==null?void 0:k.relationship)||"",onChange:a=>n({...t,emergencyContact:{...t.emergencyContact,relationship:a}})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Document Verification"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((g=t.documents)==null?void 0:g.idCopy)||!1,onChange:a=>n({...t,documents:{...t.documents,idCopy:a.target.checked}}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"ID Copy"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((I=t.documents)==null?void 0:I.businessLicense)||!1,onChange:a=>n({...t,documents:{...t.documents,businessLicense:a.target.checked}}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Business License"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((b=t.documents)==null?void 0:b.taxCertificate)||!1,onChange:a=>n({...t,documents:{...t.documents,taxCertificate:a.target.checked}}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Tax Certificate"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:t.notes||"",onChange:a=>n({...t,notes:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Additional notes about this buyer..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:N?"Update Buyer":"Create Buyer"})]})]})})})]})},Ia=()=>{var S;const{sourceRecords:r,user:o}=le(),[C,N]=x.useState("30d"),[f,c]=x.useState("revenue");if((o==null?void 0:o.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})});const m=x.useMemo(()=>{const t=r.length,n=r.reduce((T,l)=>T+l.quantitySold,0),i=r.reduce((T,l)=>T+l.totalCost,0),D=r.reduce((T,l)=>T+(l.totalPackagingCost||0),0),d=[{code:"AC001",name:"Embu Area",volume:r.filter(T=>T.areaCode==="AC001").reduce((T,l)=>T+l.quantitySold,0),revenue:r.filter(T=>T.areaCode==="AC001").reduce((T,l)=>T+l.totalCost,0)},{code:"AC002",name:"Mecca Area",volume:r.filter(T=>T.areaCode==="AC002").reduce((T,l)=>T+l.quantitySold,0),revenue:r.filter(T=>T.areaCode==="AC002").reduce((T,l)=>T+l.totalCost,0)},{code:"AC003",name:"Ena Area",volume:r.filter(T=>T.areaCode==="AC003").reduce((T,l)=>T+l.quantitySold,0),revenue:r.filter(T=>T.areaCode==="AC003").reduce((T,l)=>T+l.totalCost,0)},{code:"AC004",name:"Ugweri Area",volume:r.filter(T=>T.areaCode==="AC004").reduce((T,l)=>T+l.quantitySold,0),revenue:r.filter(T=>T.areaCode==="AC004").reduce((T,l)=>T+l.totalCost,0)}],R=[{month:"Jan",volume:1250,revenue:625e3,trips:45},{month:"Feb",volume:1380,revenue:69e4,trips:52},{month:"Mar",volume:1520,revenue:76e4,trips:58},{month:"Apr",volume:1680,revenue:84e4,trips:64},{month:"May",volume:1450,revenue:725e3,trips:55},{month:"Jun",volume:1620,revenue:81e4,trips:62}],q=t>0?n/t:0,K=t>0?i/t:0,p=i>0?(i-D)/i*100:0,F=d.sort((T,l)=>l.revenue-T.revenue).slice(0,3);return{totalRecords:t,totalVolume:n,totalRevenue:i,totalPackagingCost:D,areaPerformance:d,monthlyTrends:R,avgVolumePerTrip:q,avgRevenuePerTrip:K,packagingEfficiency:p,topAreas:F}},[r]),u=(t,n)=>t>n?e.jsx(pe,{className:"h-4 w-4 text-green-500"}):t<n?e.jsx(qe,{className:"h-4 w-4 text-red-500"}):e.jsx(me,{className:"h-4 w-4 text-gray-500"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive business intelligence and performance analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:C,onChange:t=>N(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green",children:[e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"}),e.jsx("option",{value:"1y",children:"Last Year"})]}),e.jsxs("select",{value:f,onChange:t=>c(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green",children:[e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"volume",children:"Volume"}),e.jsx("option",{value:"efficiency",children:"Efficiency"}),e.jsx("option",{value:"performance",children:"Performance"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:Q(m.totalRevenue)}),e.jsxs("div",{className:"flex items-center mt-2",children:[u(m.totalRevenue,m.totalRevenue*.9),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+12.5%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-900/20 flex-shrink-0",children:e.jsx(Ve,{className:"h-5 w-5 text-green-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Volume"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:[(m.totalVolume/1e3).toFixed(1),"K kg"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[u(m.totalVolume,m.totalVolume*.95),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+8.3%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900/20 flex-shrink-0",children:e.jsx(de,{className:"h-5 w-5 text-blue-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Trips"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:m.totalRecords}),e.jsxs("div",{className:"flex items-center mt-2",children:[u(m.totalRecords,m.totalRecords*.88),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+15.2%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-purple-100 dark:bg-purple-900/20 flex-shrink-0",children:e.jsx(fe,{className:"h-5 w-5 text-purple-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Efficiency"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:[m.packagingEfficiency.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[u(m.packagingEfficiency,m.packagingEfficiency*.98),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"+2.1%"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex-shrink-0",children:e.jsx(De,{className:"h-5 w-5 text-yellow-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Monthly Trends"}),e.jsx(ye,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-4",children:m.monthlyTrends.map((t,n)=>{const i=Math.max(...m.monthlyTrends.map(d=>d.revenue)),D=t.revenue/i*100;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.month}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q(t.revenue)})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-bright-green h-2 rounded-full transition-all duration-500",style:{width:`${D}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[t.volume,"kg"]}),e.jsxs("span",{children:[t.trips," trips"]})]})]},t.month)})})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Area Performance"}),e.jsx(be,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-4",children:m.areaPerformance.map((t,n)=>{const i=Math.max(...m.areaPerformance.map(d=>d.revenue)),D=i>0?t.revenue/i*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",t.code,")"]})]}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q(t.revenue)})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${D}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[t.volume,"kg"]}),e.jsxs("span",{children:[(t.revenue/t.volume||0).toFixed(0),"/kg"]})]})]},t.code)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Average Metrics"}),e.jsx(me,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Volume per Trip"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[m.avgVolumePerTrip.toFixed(1),"kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue per Trip"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q(m.avgRevenuePerTrip)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Packaging Efficiency"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[m.packagingEfficiency.toFixed(1),"%"]})]})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Top Performers"}),e.jsx(pe,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"space-y-3",children:m.topAreas.map((t,n)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${n===0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":n===1?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200"}`,children:n+1}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.name})]}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q(t.revenue)})]},t.code))})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Quick Insights"}),e.jsx(He,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Best performing area: ",(S=m.topAreas[0])==null?void 0:S.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue growth: +12.5% this month"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(De,{className:"h-4 w-4 text-purple-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Efficiency target: 95% (Current: ",m.packagingEfficiency.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monitor: AC004 performance below average"})]})]})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Real-time Activity"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"3"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Trips"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"7"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Pickups"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"12"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed Today"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"2"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alerts"})]})]})]})]})},qa=()=>{const{sourceRecords:r,user:o}=le(),[C,N]=x.useState(30),[f,c]=x.useState(!0);if((o==null?void 0:o.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})});const m=[{id:"1",type:"warning",title:"High Memory Usage",description:"Server memory usage is at 85%. Consider optimizing or scaling.",timestamp:new Date(Date.now()-5*60*1e3).toISOString(),source:"Server Monitor",resolved:!1},{id:"2",type:"error",title:"Database Connection Timeout",description:"Failed to connect to primary database. Using backup connection.",timestamp:new Date(Date.now()-15*60*1e3).toISOString(),source:"Database Monitor",resolved:!0},{id:"3",type:"info",title:"Scheduled Maintenance",description:"System maintenance scheduled for tonight at 2:00 AM.",timestamp:new Date(Date.now()-2*60*60*1e3).toISOString(),source:"System Admin",resolved:!1},{id:"4",type:"success",title:"Backup Completed",description:"Daily backup completed successfully. 2.3GB backed up.",timestamp:new Date(Date.now()-4*60*60*1e3).toISOString(),source:"Backup Service",resolved:!0}],u=[{name:"CPU Usage",value:"45%",status:"healthy",trend:"stable",lastUpdated:new Date().toISOString()},{name:"Memory Usage",value:"78%",status:"warning",trend:"up",lastUpdated:new Date().toISOString()},{name:"Disk Space",value:"62%",status:"healthy",trend:"stable",lastUpdated:new Date().toISOString()},{name:"Database Connections",value:"23/100",status:"healthy",trend:"down",lastUpdated:new Date().toISOString()},{name:"Active Users",value:r.length>0?Math.floor(r.length*.3):0,status:"healthy",trend:"up",lastUpdated:new Date().toISOString()},{name:"API Response Time",value:"120ms",status:"healthy",trend:"stable",lastUpdated:new Date().toISOString()}],S=x.useMemo(()=>{const d=r.length,R=r.filter(F=>{const T=new Date(F.date),l=new Date;return T.toDateString()===l.toDateString()}).length,q=r.filter(F=>F.status==="in-transit").length,K=r.filter(F=>F.status==="loaded").length,p=r.filter(F=>F.status==="delivered").length;return{totalRecords:d,todayRecords:R,activeTrips:q,pendingPickups:K,completedToday:p}},[r]),t=d=>{switch(d){case"error":return e.jsx(re,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(re,{className:"h-4 w-4 text-yellow-500"});case"info":return e.jsx(me,{className:"h-4 w-4 text-blue-500"});case"success":return e.jsx(ee,{className:"h-4 w-4 text-green-500"})}},n=d=>{switch(d){case"error":return"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20";case"warning":return"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-900/20";case"info":return"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20";case"success":return"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20"}},i=d=>{switch(d){case"healthy":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/20";case"warning":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/20";case"critical":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/20"}},D=d=>{switch(d){case"up":return e.jsx(pe,{className:"h-3 w-3 text-green-500"});case"down":return e.jsx(qe,{className:"h-3 w-3 text-red-500"});case"stable":return e.jsx(me,{className:"h-3 w-3 text-gray-500"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"System Monitoring"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time system health monitoring and alerts"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500 animate-pulse":"bg-gray-400"}`}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Auto-refresh: ",f?"ON":"OFF"]})]}),e.jsxs("select",{value:C,onChange:d=>N(Number(d.target.value)),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm",children:[e.jsx("option",{value:10,children:"10s"}),e.jsx("option",{value:30,children:"30s"}),e.jsx("option",{value:60,children:"1m"}),e.jsx("option",{value:300,children:"5m"})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-2 px-3 py-1 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Status"}),e.jsx("p",{className:"text-xl font-bold text-green-600 truncate",children:"Healthy"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"All systems operational"})]}),e.jsx("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-900/20 flex-shrink-0",children:e.jsx(ee,{className:"h-5 w-5 text-green-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Alerts"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600 truncate",children:m.filter(d=>!d.resolved).length}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"Requires attention"})]}),e.jsx("div",{className:"p-2 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex-shrink-0",children:e.jsx(re,{className:"h-5 w-5 text-yellow-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Uptime"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:"99.9%"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"Last 30 days"})]}),e.jsx("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900/20 flex-shrink-0",children:e.jsx(Mt,{className:"h-5 w-5 text-blue-600"})})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Response Time"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:"120ms"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:"Average"})]}),e.jsx("div",{className:"p-2 rounded-full bg-purple-100 dark:bg-purple-900/20 flex-shrink-0",children:e.jsx(He,{className:"h-5 w-5 text-purple-600"})})]})})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Metrics"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map((d,R)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:d.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[D(d.trend),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(d.status)}`,children:d.status})]})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:d.value}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated: ",ve(d.lastUpdated)]})]},R))})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Operational Metrics"}),e.jsx(me,{className:"h-5 w-5 text-gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(de,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.totalRecords}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Records"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(Se,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.todayRecords}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Records"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(fe,{className:"h-8 w-8 text-yellow-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.activeTrips}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Trips"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(be,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.pendingPickups}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Pickups"})]}),e.jsxs("div",{className:"text-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx(ee,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.completedToday}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed Today"})]})]})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Alerts"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[m.filter(d=>!d.resolved).length," unresolved"]}),e.jsx(je,{className:"h-5 w-5 text-gray-500"})]})]}),e.jsx("div",{className:"space-y-4",children:m.map(d=>e.jsx("div",{className:`p-4 border rounded-lg ${n(d.type)} ${d.resolved?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[t(d.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:d.title}),d.resolved&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200 rounded-full text-xs font-medium",children:"Resolved"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Source: ",d.source]}),e.jsxs("span",{children:["Time: ",ve(d.timestamp)]})]})]})]}),!d.resolved&&e.jsx("button",{className:"px-3 py-1 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:"Resolve"})]})},d.id))})]}),e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Performance Trends"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last 24 hours"})]})]}),e.jsx("div",{className:"h-64 bg-gray-50 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(me,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Performance chart would be displayed here"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Integration with monitoring tools like Grafana or custom charts"})]})})]})]})},Oa=()=>{const{user:r}=le(),[o,C]=x.useState(!1),[N,f]=x.useState(null),[c,m]=x.useState(null),[u,S]=x.useState(!1),[t,n]=x.useState({search:"",type:"all",severity:"all",status:"all",dateRange:{start:"",end:""}}),[i,D]=x.useState([{id:"1",transportCode:"TRIP-001",sourceAreaCode:"AC001",destinationAreaCode:"AC005",driverName:"John Kimani",driverPhone:"+254 712 345678",vehicleReg:"KAA 123A",discrepancyType:"quantity",description:"Quantity mismatch between pickup and delivery",expectedValue:50,actualValue:47,discrepancyAmount:-3,severity:"medium",status:"investigating",reportedBy:"Sarah Mwangi",reportedAt:new Date(Date.now()-2*60*60*1e3).toISOString(),assignedTo:"Admin User",investigationNotes:"Driver claims no knowledge of missing goods. Checking CCTV footage."},{id:"2",transportCode:"TRIP-002",sourceAreaCode:"AC002",destinationAreaCode:"AC003",driverName:"Peter Wanjiku",driverPhone:"+254 723 456789",vehicleReg:"KBC 567B",discrepancyType:"condition",description:"Goods arrived in poor condition",expectedValue:"Good",actualValue:"Damaged",discrepancyAmount:0,severity:"high",status:"resolved",reportedBy:"Buyer Representative",reportedAt:new Date(Date.now()-6*60*60*1e3).toISOString(),assignedTo:"Admin User",investigationNotes:"Driver reported rough road conditions.",resolutionNotes:"Compensation provided to buyer. Driver warned about handling.",resolvedAt:new Date(Date.now()-1*60*60*1e3).toISOString(),resolvedBy:"Admin User"},{id:"3",transportCode:"TRIP-003",sourceAreaCode:"AC003",destinationAreaCode:"AC001",driverName:"Mary Njoki",driverPhone:"+254 734 567890",vehicleReg:"KAB 789C",discrepancyType:"time",description:"Delivery delayed by 3 hours",expectedValue:"14:00",actualValue:"17:00",discrepancyAmount:180,severity:"low",status:"pending",reportedBy:"Destination Manager",reportedAt:new Date(Date.now()-30*60*1e3).toISOString()}]),[d,R]=x.useState({transportCode:"",sourceAreaCode:"",destinationAreaCode:"",driverName:"",driverPhone:"",vehicleReg:"",discrepancyType:"quantity",description:"",expectedValue:"",actualValue:"",discrepancyAmount:0,severity:"medium",status:"pending",reportedBy:(r==null?void 0:r.name)||"",assignedTo:"",investigationNotes:"",resolutionNotes:"",resolvedAt:"",resolvedBy:""}),q=()=>{R({transportCode:"",sourceAreaCode:"",destinationAreaCode:"",driverName:"",driverPhone:"",vehicleReg:"",discrepancyType:"quantity",description:"",expectedValue:"",actualValue:"",discrepancyAmount:0,severity:"medium",status:"pending",reportedBy:(r==null?void 0:r.name)||"",assignedTo:"",investigationNotes:"",resolutionNotes:"",resolvedAt:"",resolvedBy:""}),f(null)},K=a=>{if(a){f(a);const{id:E,reportedAt:s,...v}=a;R(v)}else q();C(!0)},p=()=>{C(!1),q()},F=a=>{m(a),S(!0)},T=a=>{a.preventDefault();const E=new Date().toISOString(),s={...d,reportedAt:E};if(N)D(i.map(v=>v.id===N.id?{...s,id:N.id}:v));else{const v=Date.now().toString();D([...i,{...s,id:v}])}p()},l=a=>{window.confirm("Are you sure you want to delete this discrepancy report?")&&D(i.filter(E=>E.id!==a.id))},k=a=>{const E=new Date().toISOString();D(i.map(s=>s.id===a?{...s,status:"resolved",resolvedAt:E,resolvedBy:(r==null?void 0:r.name)||"Unknown"}:s))},g=x.useMemo(()=>i.filter(a=>{const E=t.search===""||a.transportCode.toLowerCase().includes(t.search.toLowerCase())||a.driverName.toLowerCase().includes(t.search.toLowerCase())||a.description.toLowerCase().includes(t.search.toLowerCase()),s=t.type==="all"||a.discrepancyType===t.type,v=t.severity==="all"||a.severity===t.severity,O=t.status==="all"||a.status===t.status,j=(t.dateRange.start===""||a.reportedAt>=t.dateRange.start)&&(t.dateRange.end===""||a.reportedAt<=t.dateRange.end);return E&&s&&v&&O&&j}),[i,t]),I=[{key:"transportCode",label:"Transport Code",sortable:!0},{key:"driverName",label:"Driver",render:(a,E)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a}),e.jsx("p",{className:"text-xs text-gray-500",children:E.vehicleReg})]}),sortable:!0},{key:"discrepancyType",label:"Type",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="quantity"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":a==="condition"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":a==="time"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200":a==="location"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"severity",label:"Severity",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="critical"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":a==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200":a==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"status",label:"Status",render:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a==="resolved"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":a==="investigating"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":a==="pending"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)}),sortable:!0},{key:"reportedAt",label:"Reported",render:a=>ve(a),sortable:!0}],b=x.useMemo(()=>{const a=i.length,E=i.filter(j=>j.status==="pending").length,s=i.filter(j=>j.status==="investigating").length,v=i.filter(j=>j.status==="resolved").length,O=i.filter(j=>j.severity==="critical").length;return{totalReports:a,pendingReports:E,investigatingReports:s,resolvedReports:v,criticalReports:O}},[i]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Discrepancy Reports"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track and manage discrepancies between pickup and delivery"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>K(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Report Discrepancy"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500",children:e.jsx(Ee,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Reports"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:b.totalReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-500",children:e.jsx(Se,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:b.pendingReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500",children:e.jsx(me,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Investigating"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:b.investigatingReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:b.resolvedReports})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500",children:e.jsx(re,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Critical"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:b.criticalReports})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(Fe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search reports...",value:t.search,onChange:a=>n({...t,search:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Type",value:t.type,onChange:a=>n({...t,type:a}),options:[{value:"all",label:"All Types"},{value:"quantity",label:"Quantity"},{value:"condition",label:"Condition"},{value:"time",label:"Time"},{value:"location",label:"Location"},{value:"other",label:"Other"}]}),e.jsx(U,{label:"Severity",value:t.severity,onChange:a=>n({...t,severity:a}),options:[{value:"all",label:"All Severity"},{value:"critical",label:"Critical"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]}),e.jsx(U,{label:"Status",value:t.status,onChange:a=>n({...t,status:a}),options:[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"investigating",label:"Investigating"},{value:"resolved",label:"Resolved"},{value:"dismissed",label:"Dismissed"}]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{label:"Start Date",type:"date",value:t.dateRange.start,onChange:a=>n({...t,dateRange:{...t.dateRange,start:a}})}),e.jsx(M,{label:"End Date",type:"date",value:t.dateRange.end,onChange:a=>n({...t,dateRange:{...t.dateRange,end:a}})})]})]})]}),e.jsx(w,{className:"p-6",children:e.jsx(Ke,{data:g,columns:I,onEdit:K,onDelete:l,emptyMessage:"No discrepancy reports found.",actions:[{label:"View",icon:e.jsx(Be,{className:"h-4 w-4"}),onClick:F},{label:"Resolve",icon:e.jsx(ee,{className:"h-4 w-4"}),onClick:a=>k(a.id),condition:a=>a.status!=="resolved"}]})}),e.jsx(ke,{isOpen:o,onClose:p,title:N?"Edit Discrepancy Report":"Report Discrepancy",size:"lg",children:e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Transport Code",type:"text",value:d.transportCode,onChange:a=>R({...d,transportCode:a}),required:!0}),e.jsx(U,{label:"Discrepancy Type",value:d.discrepancyType,onChange:a=>R({...d,discrepancyType:a}),options:[{value:"quantity",label:"Quantity Mismatch"},{value:"condition",label:"Condition Issue"},{value:"time",label:"Time Delay"},{value:"location",label:"Location Error"},{value:"other",label:"Other"}],required:!0}),e.jsx(M,{label:"Driver Name",type:"text",value:d.driverName,onChange:a=>R({...d,driverName:a}),required:!0}),e.jsx(M,{label:"Vehicle Registration",type:"text",value:d.vehicleReg,onChange:a=>R({...d,vehicleReg:a}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Discrepancy Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Expected Value",type:"text",value:d.expectedValue,onChange:a=>R({...d,expectedValue:a}),required:!0}),e.jsx(M,{label:"Actual Value",type:"text",value:d.actualValue,onChange:a=>R({...d,actualValue:a}),required:!0}),e.jsx(U,{label:"Severity",value:d.severity,onChange:a=>R({...d,severity:a}),options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],required:!0}),e.jsx(U,{label:"Status",value:d.status,onChange:a=>R({...d,status:a}),options:[{value:"pending",label:"Pending"},{value:"investigating",label:"Investigating"},{value:"resolved",label:"Resolved"},{value:"dismissed",label:"Dismissed"}],required:!0})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:a=>R({...d,description:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Describe the discrepancy in detail...",required:!0})]})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Investigation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{label:"Assigned To",type:"text",value:d.assignedTo||"",onChange:a=>R({...d,assignedTo:a})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Investigation Notes"}),e.jsx("textarea",{value:d.investigationNotes||"",onChange:a=>R({...d,investigationNotes:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Investigation findings and notes..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Resolution Notes"}),e.jsx("textarea",{value:d.resolutionNotes||"",onChange:a=>R({...d,resolutionNotes:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Resolution details and actions taken..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:N?"Update Report":"Create Report"})]})]})}),e.jsx(ke,{isOpen:u,onClose:()=>S(!1),title:"Discrepancy Report Details",size:"lg",children:c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Transport Code"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.transportCode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Driver"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.driverName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.vehicleReg})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 capitalize",children:c.discrepancyType})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:c.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.expectedValue})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Actual"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.actualValue})]})]}),c.investigationNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Investigation Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:c.investigationNotes})]}),c.resolutionNotes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Resolution Notes"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:c.resolutionNotes})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Timeline"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reported"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:ve(c.reportedAt)})]}),c.resolvedAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resolved"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:ve(c.resolvedAt)})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Close"}),c.status!=="resolved"&&e.jsx("button",{onClick:()=>{k(c.id),S(!1)},className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:"Mark Resolved"})]})]})})]})},Fa=()=>{var E;const{user:r,sourceRecords:o,transportLogs:C}=le(),{showSuccessNotification:N,showErrorNotification:f,showWarningNotification:c}=Pe(),[m,u]=x.useState("overview"),[S,t]=x.useState(!1),[n,i]=x.useState(!1),[D,d]=x.useState("config"),[R,q]=x.useState({maintenanceMode:!1,autoBackup:!0,backupFrequency:"daily",dataRetention:365,maxFileSize:10,systemLogs:!0,emailNotifications:!0,smsNotifications:!1,twoFactorAuth:!1,sessionTimeout:30}),[K,p]=x.useState([{id:"1",name:"Full Backup - 2024-01-20",size:"2.4 MB",createdAt:"2024-01-20 14:30:00",type:"full",status:"completed"},{id:"2",name:"Incremental Backup - 2024-01-19",size:"156 KB",createdAt:"2024-01-19 14:30:00",type:"incremental",status:"completed"},{id:"3",name:"Manual Backup - 2024-01-18",size:"1.8 MB",createdAt:"2024-01-18 10:15:00",type:"manual",status:"completed"}]),[F,T]=x.useState([{id:"1",userId:"admin",userName:"Admin User",role:"admin",loginTime:"2024-01-20 09:00:00",lastActivity:"2024-01-20 15:30:00",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",isActive:!0},{id:"2",userId:"user1",userName:"John Kimani",role:"user",loginTime:"2024-01-20 08:30:00",lastActivity:"2024-01-20 14:45:00",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Android 10; Mobile)",isActive:!0}]),l={totalUsers:12,activeUsers:F.filter(s=>s.isActive).length,totalRecords:o.length,systemUptime:"99.9%",storageUsed:"2.4 MB",lastBackup:((E=K[0])==null?void 0:E.createdAt)||"Never",systemLoad:"Low",memoryUsage:"45%",cpuUsage:"23%"};if((r==null?void 0:r.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs(w,{variant:"enhanced",className:"text-center p-8",children:[e.jsx(re,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This page is only accessible to administrators."})]})});const k=async(s,v)=>{t(!0);try{await new Promise(O=>setTimeout(O,1e3)),q(O=>({...O,[s]:v})),s==="maintenanceMode"?c(v?"Maintenance Mode Enabled":"Maintenance Mode Disabled",v?"System is now in maintenance mode. Users will see a maintenance page.":"System is now accessible to all users."):N("Configuration Updated","System configuration has been saved successfully.")}catch{f("Update Failed","Failed to update system configuration.")}finally{t(!1)}},g=async()=>{t(!0);try{await new Promise(v=>setTimeout(v,2e3));const s={id:Date.now().toString(),name:`Manual Backup - ${new Date().toLocaleDateString()}`,size:"1.2 MB",createdAt:new Date().toLocaleString(),type:"manual",status:"completed"};p(v=>[s,...v]),N("Backup Created","System backup has been created successfully."),i(!1)}catch{f("Backup Failed","Failed to create system backup.")}finally{t(!1)}},I=async s=>{t(!0);try{await new Promise(v=>setTimeout(v,500)),T(v=>v.filter(O=>O.id!==s)),N("Session Terminated","User session has been terminated successfully.")}catch{f("Termination Failed","Failed to terminate user session.")}finally{t(!1)}},b=async()=>{t(!0);try{const s={sourceRecords:o,transportLogs:C,systemConfig:R,backups:K,activeSessions:F,exportDate:new Date().toISOString(),version:"1.0"},v=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),O=URL.createObjectURL(v),j=document.createElement("a");j.href=O,j.download=`mwalimu-admin-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(O),N("Data Exported","System data has been exported successfully.")}catch{f("Export Failed","Failed to export system data.")}finally{t(!1)}},a=[{id:"overview",label:"Overview",icon:ye},{id:"users",label:"User Management",icon:ze},{id:"system",label:"System Config",icon:ue},{id:"backup",label:"Backup & Restore",icon:Le},{id:"security",label:"Security",icon:je}];return e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Admin Controls"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"System administration and configuration management"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Online"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Uptime: ",l.systemUptime]})]})})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64",children:e.jsxs(w,{variant:"enhanced",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"System administration tools"})]}),e.jsx("nav",{className:"space-y-2",children:a.map(s=>e.jsxs("button",{onClick:()=>u(s.id),className:`flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-left transition-all duration-200 hover-lift ${m===s.id?"bg-gradient-to-r from-bright-green to-green-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(s.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.label})]},s.id))})]})}),e.jsxs("div",{className:"flex-1",children:[m==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.totalUsers})]}),e.jsx(ze,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.activeUsers})]}),e.jsx(me,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.totalRecords})]}),e.jsx(Le,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.systemUptime})]}),e.jsx(Mt,{className:"h-8 w-8 text-orange-500"})]})})]}),e.jsxs(w,{variant:"enhanced",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"System Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"System Load"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.systemLoad})]})]})}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(mt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Memory Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.memoryUsage})]})]})}),e.jsx("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"CPU Usage"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.cpuUsage})]})]})})]})]})]}),m==="users"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Active Sessions"}),e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add User"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Login Time"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Last Activity"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"IP Address"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:F.map(s=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.userName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.userId})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200"}`,children:s.role})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:s.loginTime}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:s.lastActivity}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:s.ipAddress}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>I(s.id),disabled:S,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 disabled:opacity-50",children:e.jsx(Oe,{className:"h-4 w-4"})})})]},s.id))})]})})]})}),m==="system"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"System Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable maintenance mode to restrict user access"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.maintenanceMode,onChange:s=>k("maintenanceMode",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Automatic Backup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable automatic system backups"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.autoBackup,onChange:s=>k("autoBackup",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Backup Frequency",value:R.backupFrequency,onChange:s=>k("backupFrequency",s),options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}]}),e.jsx(M,{label:"Data Retention (days)",type:"number",value:R.dataRetention.toString(),onChange:s=>k("dataRetention",parseInt(s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Session Timeout (minutes)",type:"number",value:R.sessionTimeout.toString(),onChange:s=>k("sessionTimeout",parseInt(s))}),e.jsx(M,{label:"Max File Size (MB)",type:"number",value:R.maxFileSize.toString(),onChange:s=>k("maxFileSize",parseInt(s))})]})]})]})}),m==="backup"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Backup Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{d("backup"),i(!0)},className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Backup"})]}),e.jsxs("button",{onClick:b,disabled:S,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Data"})]})]})]}),e.jsx("div",{className:"space-y-4",children:K.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="completed"?"bg-green-100 dark:bg-green-900/20":s.status==="failed"?"bg-red-100 dark:bg-red-900/20":"bg-yellow-100 dark:bg-yellow-900/20"}`,children:e.jsx(Le,{className:`h-5 w-5 ${s.status==="completed"?"text-green-600":s.status==="failed"?"text-red-600":"text-yellow-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.size," • ",s.type," • ",s.createdAt]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":s.status==="failed"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:s.status}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(oe,{className:"h-4 w-4"})})]})]},s.id))})]})}),m==="security"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{variant:"enhanced",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Security Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Require 2FA for all admin accounts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.twoFactorAuth,onChange:s=>k("twoFactorAuth",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"System Logging"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable detailed system activity logging"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.systemLogs,onChange:s=>k("systemLogs",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Send security alerts via email"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R.emailNotifications,onChange:s=>k("emailNotifications",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-bright-green/20 dark:peer-focus:ring-bright-green/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-bright-green"})]})]})]})]})})]})]}),n&&e.jsx(ke,{isOpen:n,onClose:()=>i(!1),title:D==="backup"?"Create System Backup":"Add New User",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:D==="backup"?"Create System Backup":"Add New User"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx(Oe,{className:"h-5 w-5"})})]}),D==="backup"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This will create a complete backup of all system data including records, configurations, and user data."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"btn-outline",children:"Cancel"}),e.jsxs("button",{onClick:g,disabled:S,className:"btn-primary flex items-center space-x-2",children:[S?e.jsx(he,{className:"h-4 w-4 animate-spin"}):e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:S?"Creating...":"Create Backup"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{label:"Username",type:"text",value:"",onChange:()=>{},required:!0}),e.jsx(M,{label:"Email",type:"email",value:"",onChange:()=>{},required:!0}),e.jsx(U,{label:"Role",value:"",onChange:()=>{},options:[{value:"user",label:"User"},{value:"admin",label:"Admin"}]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"btn-outline",children:"Cancel"}),e.jsx("button",{className:"btn-primary",children:"Add User"})]})]})]})})]})},Ba=()=>{const{user:r}=le(),[o,C]=x.useState(""),[N,f]=x.useState(""),[c,m]=x.useState(""),[u,S]=x.useState(""),[t,n]=x.useState([]),i=[{id:"1",timestamp:"2024-01-20 15:30:45",userId:"admin",userName:"Admin User",action:"CREATE",resource:"Source Record",details:"Created new pickup record for Area AC001 with 50kg miraa",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"medium"},{id:"2",timestamp:"2024-01-20 14:25:12",userId:"user1",userName:"John Kimani",action:"UPDATE",resource:"Transport Log",details:"Updated trip status from Loading to In Transit",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Android 10; Mobile)",status:"success",severity:"low"},{id:"3",timestamp:"2024-01-20 13:15:30",userId:"admin",userName:"Admin User",action:"DELETE",resource:"Destination Record",details:"Deleted destination record for Trip #TRN001",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"high"},{id:"4",timestamp:"2024-01-20 12:45:18",userId:"user2",userName:"Mary Wanjiku",action:"LOGIN",resource:"Authentication",details:"User logged in successfully",ipAddress:"192.168.1.102",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_0)",status:"success",severity:"low"},{id:"5",timestamp:"2024-01-20 11:30:55",userId:"unknown",userName:"Unknown User",action:"LOGIN",resource:"Authentication",details:"Failed login attempt with invalid credentials",ipAddress:"192.168.1.200",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"failed",severity:"critical"},{id:"6",timestamp:"2024-01-20 10:20:33",userId:"admin",userName:"Admin User",action:"CONFIG",resource:"System Settings",details:"Updated system configuration: enabled maintenance mode",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"high"},{id:"7",timestamp:"2024-01-20 09:15:42",userId:"user1",userName:"John Kimani",action:"VIEW",resource:"Profit Reports",details:"Viewed monthly profit analysis report",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Android 10; Mobile)",status:"success",severity:"low"},{id:"8",timestamp:"2024-01-20 08:45:27",userId:"admin",userName:"Admin User",action:"BACKUP",resource:"System Backup",details:"Created manual system backup",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",status:"success",severity:"medium"}];if((r==null?void 0:r.role)!=="admin")return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs(w,{variant:"enhanced",className:"text-center p-8",children:[e.jsx(re,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This page is only accessible to administrators."})]})});const D=x.useMemo(()=>i.filter(l=>{const k=o===""||l.userName.toLowerCase().includes(o.toLowerCase())||l.action.toLowerCase().includes(o.toLowerCase())||l.resource.toLowerCase().includes(o.toLowerCase())||l.details.toLowerCase().includes(o.toLowerCase()),g=N===""||l.status===N,I=c===""||l.severity===c,b=u===""||l.timestamp.startsWith(u);return k&&g&&I&&b}),[i,o,N,c,u]),d=x.useMemo(()=>{const l=i.length,k=i.filter(a=>a.status==="success").length,g=i.filter(a=>a.status==="failed").length,I=i.filter(a=>a.severity==="critical").length,b=i.filter(a=>a.timestamp.startsWith("2024-01-20")).length;return{totalLogs:l,successLogs:k,failedLogs:g,criticalLogs:I,todayLogs:b,successRate:l>0?Math.round(k/l*100):0}},[i]),R=l=>{switch(l){case"success":return e.jsx(ee,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(re,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(re,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(me,{className:"h-4 w-4 text-gray-500"})}},q=l=>{switch(l){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}},K=l=>{switch(l){case"CREATE":return e.jsx(Ae,{className:"h-4 w-4 text-green-600"});case"UPDATE":return e.jsx(Tt,{className:"h-4 w-4 text-blue-600"});case"DELETE":return e.jsx(_e,{className:"h-4 w-4 text-red-600"});case"LOGIN":return e.jsx(Ie,{className:"h-4 w-4 text-purple-600"});case"VIEW":return e.jsx(Be,{className:"h-4 w-4 text-gray-600"});case"CONFIG":return e.jsx(ue,{className:"h-4 w-4 text-orange-600"});case"BACKUP":return e.jsx(Le,{className:"h-4 w-4 text-indigo-600"});default:return e.jsx(me,{className:"h-4 w-4 text-gray-600"})}},p=l=>{n(k=>k.includes(l)?k.filter(g=>g!==l):[...k,l])},F=()=>{t.length===D.length?n([]):n(D.map(l=>l.id))},T=()=>{const k={auditLogs:t.length>0?D.filter(a=>t.includes(a.id)):D,exportDate:new Date().toISOString(),filters:{searchTerm:o,filterStatus:N,filterSeverity:c,filterDate:u}},g=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),I=URL.createObjectURL(g),b=document.createElement("a");b.href=I,b.download=`audit-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(I)};return e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Audit Logs"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"System activity tracking and compliance monitoring"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Logging Active"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[d.totalLogs," total entries"]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Logs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.totalLogs})]}),e.jsx(Ee,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[d.successRate,"%"]})]}),e.jsx(pe,{className:"h-8 w-8 text-green-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Failed Actions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.failedLogs})]}),e.jsx(re,{className:"h-8 w-8 text-red-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Critical Events"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.criticalLogs})]}),e.jsx(je,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Today's Activity"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.todayLogs})]}),e.jsx(Ge,{className:"h-8 w-8 text-purple-500"})]})})]}),e.jsx(w,{variant:"enhanced",className:"mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:o,onChange:l=>C(l.target.value),className:"pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-bright-green focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 w-full"})]}),e.jsx(U,{label:"",value:N,onChange:l=>f(l),options:[{value:"",label:"All Status"},{value:"success",label:"Success"},{value:"failed",label:"Failed"},{value:"warning",label:"Warning"}],className:"w-full sm:w-40"}),e.jsx(U,{label:"",value:c,onChange:l=>m(l),options:[{value:"",label:"All Severity"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],className:"w-full sm:w-40"}),e.jsx(M,{label:"",type:"date",value:u,onChange:l=>S(l),className:"w-full sm:w-40"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:T,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]})}),e.jsx(w,{variant:"enhanced",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:e.jsx("input",{type:"checkbox",checked:t.length===D.length&&D.length>0,onChange:F,className:"form-checkbox h-4 w-4 text-bright-green rounded"})}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Timestamp"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Action"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Resource"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Details"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Severity"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 dark:text-gray-300",children:"IP Address"})]})}),e.jsx("tbody",{children:D.map(l=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",checked:t.includes(l.id),onChange:()=>p(l.id),className:"form-checkbox h-4 w-4 text-bright-green rounded"})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:l.timestamp})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.userName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.userId})]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[K(l.action),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.action})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:l.resource}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate",children:l.details}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[R(l.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="success"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":l.status==="failed"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:l.status})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q(l.severity)}`,children:l.severity})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:l.ipAddress})]},l.id))})]}),D.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ee,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No logs found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]})]})})]})},Ua=()=>{const{user:r}=le(),{showSuccessNotification:o}=Pe(),[C,N]=x.useState(!1),[f,c]=x.useState(null),[m,u]=x.useState({search:"",role:"all",status:"all",department:"all",accessLevel:"all"}),[S,t]=x.useState([{id:"1",staffId:"STF-001",name:"John Admin",email:"john.admin@mwalimu.com",phone:"+254 712 345678",role:"admin",department:"Management",status:"active",permissions:["all"],lastLogin:new Date(Date.now()-2*60*60*1e3).toISOString(),loginCount:156,accessLevel:"full",securityLevel:"high",twoFactorEnabled:!0,passwordExpiry:new Date(Date.now()+30*24*60*60*1e3).toISOString(),notes:"System administrator with full access"},{id:"2",staffId:"STF-002",name:"Mary Manager",email:"mary.manager@mwalimu.com",phone:"+254 723 456789",role:"manager",department:"Operations",status:"active",permissions:["read","write","approve"],lastLogin:new Date(Date.now()-1*60*60*1e3).toISOString(),loginCount:89,accessLevel:"limited",securityLevel:"medium",twoFactorEnabled:!1,passwordExpiry:new Date(Date.now()+15*24*60*60*1e3).toISOString(),notes:"Operations manager"},{id:"3",staffId:"STF-003",name:"Peter Driver",email:"peter.driver@mwalimu.com",phone:"+254 734 567890",role:"driver",department:"Transport",status:"active",permissions:["read"],lastLogin:new Date(Date.now()-30*60*1e3).toISOString(),loginCount:45,accessLevel:"readonly",securityLevel:"low",twoFactorEnabled:!1,passwordExpiry:new Date(Date.now()+7*24*60*60*1e3).toISOString(),notes:"Transport driver"},{id:"4",staffId:"STF-004",name:"Sarah Operator",email:"sarah.operator@mwalimu.com",phone:"+254 745 678901",role:"operator",department:"Data Entry",status:"suspended",permissions:["read","write"],lastLogin:new Date(Date.now()-24*60*60*1e3).toISOString(),loginCount:23,accessLevel:"limited",securityLevel:"medium",twoFactorEnabled:!0,notes:"Account suspended due to policy violation"}]),[n,i]=x.useState({name:"",email:"",phone:"",role:"operator",department:"",status:"pending",permissions:[],accessLevel:"readonly",securityLevel:"low",twoFactorEnabled:!1,notes:""}),D=()=>{i({name:"",email:"",phone:"",role:"operator",department:"",status:"pending",permissions:[],accessLevel:"readonly",securityLevel:"low",twoFactorEnabled:!1,notes:""}),c(null)},d=l=>{if(l){c(l);const{id:k,staffId:g,loginCount:I,...b}=l;i(b)}else D();N(!0)},R=()=>{N(!1),D()},q=l=>{l.preventDefault();const k={...n,loginCount:0};if(f)t(S.map(g=>g.id===f.id?{...k,id:f.id,staffId:f.staffId}:g)),o("Success","Staff member updated successfully!");else{const g=Date.now().toString(),I=`STF-${String(S.length+1).padStart(3,"0")}`;t([...S,{...k,id:g,staffId:I}]),o("Success","Staff member added successfully!")}R()},K=l=>{window.confirm(`Are you sure you want to delete staff member ${l.name}?`)&&(t(S.filter(k=>k.id!==l.id)),o("Success","Staff member deleted successfully!"))},p=x.useMemo(()=>S.filter(l=>{const k=m.search===""||l.name.toLowerCase().includes(m.search.toLowerCase())||l.email.toLowerCase().includes(m.search.toLowerCase())||l.staffId.toLowerCase().includes(m.search.toLowerCase()),g=m.role==="all"||l.role===m.role,I=m.status==="all"||l.status===m.status,b=m.department==="all"||l.department===m.department,a=m.accessLevel==="all"||l.accessLevel===m.accessLevel;return k&&g&&I&&b&&a}),[S,m]),F=[{key:"staffId",label:"Staff ID",sortable:!0},{key:"name",label:"Name",render:(l,k)=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l}),e.jsx("p",{className:"text-xs text-gray-500",children:k.email})]}),sortable:!0},{key:"role",label:"Role",render:l=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l==="admin"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":l==="manager"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":l==="supervisor"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200":l==="operator"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}`,children:l.charAt(0).toUpperCase()+l.slice(1)}),sortable:!0},{key:"status",label:"Status",render:l=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":l==="suspended"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":l==="inactive"?"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}`,children:l.charAt(0).toUpperCase()+l.slice(1)}),sortable:!0},{key:"accessLevel",label:"Access Level",render:l=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l==="full"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":l==="limited"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200"}`,children:l.charAt(0).toUpperCase()+l.slice(1)}),sortable:!0},{key:"lastLogin",label:"Last Login",render:l=>l?new Date(l).toLocaleDateString():"Never",sortable:!0},{key:"twoFactorEnabled",label:"2FA",render:l=>e.jsx("div",{className:"flex items-center",children:l?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(ct,{className:"h-4 w-4 text-red-500"})}),sortable:!0}],T=x.useMemo(()=>{const l=S.length,k=S.filter(a=>a.status==="active").length,g=S.filter(a=>a.role==="admin").length,I=S.filter(a=>a.twoFactorEnabled).length,b=S.filter(a=>a.status==="suspended").length;return{totalStaff:l,activeStaff:k,adminStaff:g,twoFactorEnabled:I,suspendedStaff:b}},[S]);return(r==null?void 0:r.role)!=="admin"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-xl text-red-500",children:"Access Denied: Admins only."})}):e.jsxs("div",{className:"space-y-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Staff Control"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive staff management and access control system"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:()=>d(),className:"flex items-center space-x-2 px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Staff"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500 flex-shrink-0",children:e.jsx(ze,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Total Staff"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:T.totalStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500 flex-shrink-0",children:e.jsx(lt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:T.activeStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500 flex-shrink-0",children:e.jsx(je,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Admins"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:T.adminStaff})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500 flex-shrink-0",children:e.jsx(ue,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"2FA Enabled"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:T.twoFactorEnabled})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500 flex-shrink-0",children:e.jsx(ca,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"text-right min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Suspended"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:T.suspendedStaff})]})]})})]}),e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(Fe,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff...",value:m.search,onChange:l=>u({...m,search:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-bright-green focus:border-bright-green"})]}),e.jsx(U,{label:"Role",value:m.role,onChange:l=>u({...m,role:l}),options:[{value:"all",label:"All Roles"},{value:"admin",label:"Admin"},{value:"manager",label:"Manager"},{value:"supervisor",label:"Supervisor"},{value:"operator",label:"Operator"},{value:"driver",label:"Driver"}]}),e.jsx(U,{label:"Status",value:m.status,onChange:l=>u({...m,status:l}),options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}]}),e.jsx(U,{label:"Department",value:m.department,onChange:l=>u({...m,department:l}),options:[{value:"all",label:"All Departments"},{value:"Management",label:"Management"},{value:"Operations",label:"Operations"},{value:"Transport",label:"Transport"},{value:"Data Entry",label:"Data Entry"}]}),e.jsx(U,{label:"Access Level",value:m.accessLevel,onChange:l=>u({...m,accessLevel:l}),options:[{value:"all",label:"All Levels"},{value:"full",label:"Full Access"},{value:"limited",label:"Limited Access"},{value:"readonly",label:"Read Only"}]})]})]}),e.jsx(w,{className:"p-6 overflow-x-auto",children:e.jsx(Ke,{data:p,columns:F,onEdit:d,onDelete:K,emptyMessage:"No staff members found matching the current filters."})}),e.jsx(ke,{isOpen:C,onClose:R,title:f?"Edit Staff Member":"Add New Staff Member",size:"xl",children:e.jsx("div",{className:"max-h-[80vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Full Name",type:"text",value:n.name,onChange:l=>i({...n,name:l}),required:!0}),e.jsx(M,{label:"Email",type:"email",value:n.email,onChange:l=>i({...n,email:l}),required:!0}),e.jsx(M,{label:"Phone",type:"tel",value:n.phone,onChange:l=>i({...n,phone:l}),required:!0}),e.jsx(M,{label:"Department",type:"text",value:n.department,onChange:l=>i({...n,department:l}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Role & Access Control"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Role",value:n.role,onChange:l=>i({...n,role:l}),options:[{value:"admin",label:"Administrator"},{value:"manager",label:"Manager"},{value:"supervisor",label:"Supervisor"},{value:"operator",label:"Operator"},{value:"driver",label:"Driver"}],required:!0}),e.jsx(U,{label:"Status",value:n.status,onChange:l=>i({...n,status:l}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending",label:"Pending"}],required:!0}),e.jsx(U,{label:"Access Level",value:n.accessLevel,onChange:l=>i({...n,accessLevel:l}),options:[{value:"full",label:"Full Access"},{value:"limited",label:"Limited Access"},{value:"readonly",label:"Read Only"}],required:!0}),e.jsx(U,{label:"Security Level",value:n.securityLevel,onChange:l=>i({...n,securityLevel:l}),options:[{value:"high",label:"High Security"},{value:"medium",label:"Medium Security"},{value:"low",label:"Low Security"}],required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Security Settings"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:n.twoFactorEnabled,onChange:l=>i({...n,twoFactorEnabled:l.target.checked}),className:"h-4 w-4 text-bright-green rounded border-gray-300 focus:ring-bright-green"}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Two-Factor Authentication"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:n.notes||"",onChange:l=>i({...n,notes:l.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Additional notes about this staff member..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-bright-green text-white rounded-lg hover:bg-green-600 transition-colors",children:f?"Update Staff Member":"Create Staff Member"})]})]})})})]})},$a=()=>{var I;const{user:r}=le(),{showSuccessNotification:o,showErrorNotification:C}=Pe(),[N,f]=x.useState(!1),[c,m]=x.useState(null),[u,S]=x.useState("general"),[t,n]=x.useState([{id:"1",category:"general",key:"app_name",label:"Application Name",description:"The name displayed in the application header",type:"string",value:"Mwalimu Transporters",required:!0,sensitive:!1,lastModified:new Date(Date.now()-7*24*60*60*1e3).toISOString(),modifiedBy:"admin"},{id:"2",category:"general",key:"timezone",label:"Default Timezone",description:"The default timezone for the application",type:"select",value:"Africa/Nairobi",options:[{value:"Africa/Nairobi",label:"Nairobi (EAT)"},{value:"Africa/Dar_es_Salaam",label:"Dar es Salaam (EAT)"},{value:"Africa/Kampala",label:"Kampala (EAT)"},{value:"UTC",label:"UTC"}],required:!0,sensitive:!1},{id:"3",category:"general",key:"language",label:"Default Language",description:"The default language for the application interface",type:"select",value:"en",options:[{value:"en",label:"English"},{value:"sw",label:"Swahili"},{value:"fr",label:"French"}],required:!0,sensitive:!1},{id:"4",category:"security",key:"password_min_length",label:"Minimum Password Length",description:"Minimum number of characters required for passwords",type:"number",value:8,required:!0,sensitive:!1},{id:"5",category:"security",key:"session_timeout",label:"Session Timeout (minutes)",description:"How long a user session remains active before requiring re-authentication",type:"number",value:30,required:!0,sensitive:!1},{id:"6",category:"security",key:"two_factor_required",label:"Require Two-Factor Authentication",description:"Force all users to enable two-factor authentication",type:"boolean",value:!1,required:!1,sensitive:!1},{id:"7",category:"security",key:"api_key",label:"API Secret Key",description:"Secret key used for API authentication",type:"password",value:"••••••••••••••••",required:!0,sensitive:!0},{id:"8",category:"notifications",key:"email_notifications",label:"Email Notifications",description:"Enable email notifications for system events",type:"boolean",value:!0,required:!1,sensitive:!1},{id:"9",category:"notifications",key:"push_notifications",label:"Push Notifications",description:"Enable push notifications for mobile devices",type:"boolean",value:!0,required:!1,sensitive:!1},{id:"10",category:"notifications",key:"notification_sound",label:"Notification Sound",description:"Play sound when notifications are received",type:"boolean",value:!1,required:!1,sensitive:!1},{id:"11",category:"appearance",key:"theme",label:"Default Theme",description:"The default theme for new users",type:"select",value:"light",options:[{value:"light",label:"Light Theme"},{value:"dark",label:"Dark Theme"},{value:"auto",label:"Auto (System)"}],required:!0,sensitive:!1},{id:"12",category:"appearance",key:"primary_color",label:"Primary Color",description:"The primary color used throughout the application",type:"select",value:"green",options:[{value:"green",label:"Green"},{value:"blue",label:"Blue"},{value:"purple",label:"Purple"},{value:"red",label:"Red"}],required:!0,sensitive:!1},{id:"13",category:"system",key:"maintenance_mode",label:"Maintenance Mode",description:"Enable maintenance mode to restrict access to the system",type:"boolean",value:!1,required:!1,sensitive:!1},{id:"14",category:"system",key:"auto_backup",label:"Automatic Backup",description:"Enable automatic daily backups of system data",type:"boolean",value:!0,required:!1,sensitive:!1},{id:"15",category:"system",key:"log_level",label:"Log Level",description:"The level of detail in system logs",type:"select",value:"info",options:[{value:"debug",label:"Debug"},{value:"info",label:"Info"},{value:"warn",label:"Warning"},{value:"error",label:"Error"}],required:!0,sensitive:!1}]),[i,D]=x.useState({}),d=[{key:"general",label:"General",icon:ue,color:"blue",description:"Basic application settings"},{key:"security",label:"Security",icon:je,color:"red",description:"Security and privacy settings"},{key:"notifications",label:"Notifications",icon:we,color:"emerald",description:"Notification preferences"},{key:"appearance",label:"Appearance",icon:nt,color:"purple",description:"Theme and visual settings"},{key:"system",label:"System",icon:Le,color:"lime",description:"System configuration"}],R=x.useMemo(()=>t.filter(b=>b.category===u),[t,u]),q=b=>{b?(m(b),D(b)):(m(null),D({})),f(!0)},K=()=>{f(!1),m(null),D({})},p=b=>{b.preventDefault(),c&&(n(t.map(a=>a.id===c.id?{...a,value:i.value,lastModified:new Date().toISOString(),modifiedBy:(r==null?void 0:r.name)||"admin"}:a)),o("Success","Setting updated successfully!")),K()},F=b=>{window.confirm(`Reset "${b.label}" to default value?`)&&o("Success",`"${b.label}" reset to default value`)},T=()=>{o("Success","All settings saved successfully!")},l=()=>{const b=JSON.stringify(t,null,2),a=new Blob([b],{type:"application/json"}),E=URL.createObjectURL(a),s=document.createElement("a");s.href=E,s.download="system-settings.json",s.click(),URL.revokeObjectURL(E),o("Success","Settings exported successfully!")},k=()=>{const b=document.createElement("input");b.type="file",b.accept=".json",b.onchange=a=>{var s;const E=(s=a.target.files)==null?void 0:s[0];if(E){const v=new FileReader;v.onload=O=>{var j;try{const B=JSON.parse((j=O.target)==null?void 0:j.result);n(B),o("Success","Settings imported successfully!")}catch{C("Error","Invalid settings file format")}},v.readAsText(E)}},b.click()},g=b=>{var a;switch(b.type){case"boolean":return e.jsxs("div",{className:"flex items-center",children:[b.value?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(ct,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:b.value?"Enabled":"Disabled"})]});case"password":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(it,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:b.value})]});case"select":const E=(a=b.options)==null?void 0:a.find(s=>s.value===b.value);return e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(E==null?void 0:E.label)||b.value});default:return e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.value})}};return e.jsxs("div",{className:"space-y-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-purple",children:"Settings & Configuration"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your application preferences and system configuration"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[R.length," settings in ",(I=d.find(b=>b.key===u))==null?void 0:I.label]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:k,className:"btn-blue flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Import"]}),e.jsxs("button",{onClick:l,className:"btn-emerald flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Export"]}),e.jsxs("button",{onClick:T,className:"btn-purple flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Save All"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:d.map(b=>{const a=b.icon,E=u===b.key,s=t.filter(v=>v.category===b.key).length;return e.jsx(w,{variant:E?b.color:"default",className:`p-4 cursor-pointer transition-all duration-200 hover-lift ${E?"ring-2 ring-opacity-50":""}`,onClick:()=>S(b.key),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`p-3 rounded-xl mx-auto mb-3 ${E?`gradient-${b.color}`:"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(a,{className:`h-6 w-6 mx-auto ${E?"text-white":"text-gray-600 dark:text-gray-400"}`})}),e.jsx("h3",{className:`font-semibold mb-1 ${E?`text-gradient-${b.color}`:"text-gray-900 dark:text-gray-100"}`,children:b.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:b.description}),e.jsxs("div",{className:`text-sm font-medium ${E?`text-gradient-${b.color}`:"text-gray-600 dark:text-gray-400"}`,children:[s," settings"]})]})},b.key)})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:R.map(b=>e.jsxs(w,{variant:"glass",className:"p-6 hover-lift",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:b.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[b.required&&e.jsxs("span",{className:"text-xs bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200 px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),"Required"]}),b.sensitive&&e.jsxs("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(it,{className:"h-3 w-3"}),"Sensitive"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:b.description})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:g(b)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>q(b),className:"btn-blue text-xs flex items-center gap-1",children:[e.jsx(ue,{className:"h-3 w-3"}),"Edit"]}),e.jsxs("button",{onClick:()=>F(b),className:"btn-lime text-xs flex items-center gap-1",children:[e.jsx(he,{className:"h-3 w-3"}),"Reset"]})]})]})}),b.lastModified&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"h-3 w-3"}),e.jsxs("span",{children:["Modified ",new Date(b.lastModified).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"h-3 w-3"}),e.jsxs("span",{children:["by ",b.modifiedBy]})]})]})]},b.id))}),e.jsx(ke,{isOpen:N,onClose:K,title:c?`Edit ${c.label}`:"Add New Setting",size:"lg",type:"default",icon:e.jsx(ue,{className:"h-6 w-6"}),children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ce,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Setting Information"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:c.description})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Value"}),c.type==="boolean"?e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:i.value||!1,onChange:b=>D({...i,value:b.target.checked}),className:"h-5 w-5 text-emerald-600 rounded border-gray-300 focus:ring-emerald-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[i.value?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(ct,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:i.value?"Enabled":"Disabled"})]})]}):c.type==="select"?e.jsx(U,{label:"Value",value:i.value||"",onChange:b=>D({...i,value:b}),options:c.options||[]}):c.type==="password"?e.jsx("div",{className:"relative",children:e.jsx(M,{label:"Password",type:"password",value:i.value||"",onChange:b=>D({...i,value:b}),placeholder:"Enter new password"})}):e.jsx(M,{label:"Value",type:c.type==="number"?"number":"text",value:i.value||"",onChange:b=>D({...i,value:b})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:K,className:"btn-blue",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-emerald",children:"Save Changes"})]})]})})]})};function Va(){return e.jsx(pa,{children:e.jsx(ya,{children:e.jsx($t,{children:e.jsxs(Vt,{children:[e.jsx(ne,{path:"/login",element:e.jsx(Na,{})}),e.jsx(ne,{path:"/dashboard",element:e.jsx(ge,{children:e.jsx(xe,{title:"Dashboard",subtitle:"Overview of your transport operations",children:e.jsx(ka,{})})})}),e.jsx(ne,{path:"/source-records",element:e.jsx(ge,{children:e.jsx(xe,{title:"Source Records",subtitle:"Manage pickup records and goods received",children:e.jsx(Sa,{})})})}),e.jsx(ne,{path:"/transport-log",element:e.jsx(ge,{children:e.jsx(xe,{title:"Transport Log",subtitle:"Track vehicles, drivers, and deliveries",children:e.jsx(Aa,{})})})}),e.jsx(ne,{path:"/destination-records",element:e.jsx(ge,{children:e.jsx(xe,{title:"Destination Records",subtitle:"Record deliveries and buyer information",children:e.jsx(Pa,{})})})}),e.jsx(ne,{path:"/profit-reports",element:e.jsx(ge,{children:e.jsx(xe,{title:"Profit Reports",subtitle:"Financial analysis and performance metrics",children:e.jsx(Ra,{})})})}),e.jsx(ne,{path:"/area-performance",element:e.jsx(ge,{children:e.jsx(xe,{title:"Area Performance",subtitle:"Pickup point analytics and statistics",children:e.jsx(Ta,{})})})}),e.jsx(ne,{path:"/buyers",element:e.jsx(ge,{children:e.jsx(xe,{title:"Buyers Management",subtitle:"Customer database and relationship management",children:e.jsx(La,{})})})}),e.jsx(ne,{path:"/staff",element:e.jsx(ge,{children:e.jsx(xe,{title:"Staff Management",subtitle:"Driver and employee administration",children:e.jsx(Ma,{})})})}),e.jsx(ne,{path:"/settings",element:e.jsx(ge,{children:e.jsx(xe,{title:"Settings",subtitle:"Configure your account and preferences",children:e.jsx(Ea,{})})})}),e.jsx(ne,{path:"/analytics",element:e.jsx(ge,{children:e.jsx(xe,{title:"Analytics Dashboard",subtitle:"Business intelligence and insights",children:e.jsx(Ia,{})})})}),e.jsx(ne,{path:"/monitoring",element:e.jsx(ge,{children:e.jsx(xe,{title:"System Monitoring",subtitle:"Real-time system health and alerts",children:e.jsx(qa,{})})})}),e.jsx(ne,{path:"/discrepancies",element:e.jsx(ge,{children:e.jsx(xe,{title:"Discrepancy Reports",subtitle:"Track delivery issues and problems",children:e.jsx(Oa,{})})})}),e.jsx(ne,{path:"/admin-controls",element:e.jsx(ge,{children:e.jsx(xe,{title:"Admin Controls",subtitle:"System administration and configuration",children:e.jsx(Fa,{})})})}),e.jsx(ne,{path:"/audit-logs",element:e.jsx(ge,{children:e.jsx(xe,{title:"Audit Logs",subtitle:"Activity tracking and compliance monitoring",children:e.jsx(Ba,{})})})}),e.jsx(ne,{path:"/staff-control",element:e.jsx(ge,{children:e.jsx(xe,{title:"Staff Control",subtitle:"Staff management and access control system",children:e.jsx(Ua,{})})})}),e.jsx(ne,{path:"/settings-card",element:e.jsx(ge,{children:e.jsx(xe,{title:"Settings Card",subtitle:"System configuration and application settings",children:e.jsx($a,{})})})}),e.jsx(ne,{path:"/",element:e.jsx(at,{to:"/dashboard",replace:!0})}),e.jsx(ne,{path:"*",element:e.jsx(at,{to:"/dashboard",replace:!0})})]})})})})}ot.createRoot(document.getElementById("root")).render(e.jsx(Bt.StrictMode,{children:e.jsx(Va,{})}));
