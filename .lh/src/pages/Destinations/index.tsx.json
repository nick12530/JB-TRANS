{
    "sourceFile": "src/pages/Destinations/index.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1763056579045,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763057431678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,11 +4,11 @@\n import { FormInput } from '../../components/FormInput';\r\n import { FormSelect } from '../../components/FormSelect';\r\n import { useApp } from '../../context/AppContext';\r\n import { DestinationRecord } from '../../types';\r\n-import { MapPin, Plus, Calendar, Package, Trash2 } from 'lucide-react';\r\n+import { MapPin, Plus, Calendar, Package, Trash2, Settings, BarChart3, Edit2, TrendingUp, TrendingDown, Activity } from 'lucide-react';\r\n \r\n-const DESTINATIONS = [\r\n+const DEFAULT_DESTINATIONS = [\r\n   'KONGO',\r\n   'MIRITINI',\r\n   'MARIAKANI',\r\n   'SAMBURU TOWN',\r\n"
                },
                {
                    "date": 1763057865524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,37 +4,15 @@\n import { FormInput } from '../../components/FormInput';\r\n import { FormSelect } from '../../components/FormSelect';\r\n import { useApp } from '../../context/AppContext';\r\n import { DestinationRecord } from '../../types';\r\n-import { MapPin, Plus, Calendar, Package, Trash2, Settings, BarChart3, Edit2, TrendingUp, TrendingDown, Activity } from 'lucide-react';\r\n+import { MapPin, Plus, Calendar, Package, Trash2, Settings, BarChart3, Edit2, TrendingUp, TrendingDown, Activity, X } from 'lucide-react';\r\n \r\n-const DEFAULT_DESTINATIONS = [\r\n-  'KONGO',\r\n-  'MIRITINI',\r\n-  'MARIAKANI',\r\n-  'SAMBURU TOWN',\r\n-  'SAMBURU',\r\n-  'KILIFI',\r\n-  'MALINDI',\r\n-  'VOI',\r\n-  'TAVETA',\r\n-  'TESO',\r\n-  'DZONI',\r\n-  'KALOLENI',\r\n-  'MAVUENI',\r\n-  'MAZERAS',\r\n-  'CHASIMBA',\r\n-  'MAUNGU',\r\n-  'MANYATTA',\r\n-  'TARU',\r\n-  'MTITO',\r\n-  'KAMBUU',\r\n-  'MACKNON',\r\n-  'MALIKUBWA',\r\n-];\r\n-\r\n export const DestinationsPage: React.FC = () => {\r\n-  const { destinationRecords, setDestinationRecords, user } = useApp();\r\n+  const { destinationRecords, setDestinationRecords, destinations, setDestinations, user } = useApp();\r\n+  const isAdmin = user?.role === 'admin';\r\n+  \r\n+  // Record form state\r\n   const [form, setForm] = useState<{\r\n     date: string;\r\n     destination: string;\r\n     boxes: number;\r\n@@ -54,11 +32,22 @@\n     smallSacks?: string;\r\n     basins?: string;\r\n   }>({});\r\n   const [successMessage, setSuccessMessage] = useState('');\r\n+  \r\n+  // Filter state\r\n   const [filterDate, setFilterDate] = useState('');\r\n   const [filterDestination, setFilterDestination] = useState('all');\r\n+  const [statsDateRange, setStatsDateRange] = useState<{ start: string; end: string }>({\r\n+    start: new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0],\r\n+    end: new Date().toISOString().split('T')[0],\r\n+  });\r\n \r\n+  // Destination management state (admin only)\r\n+  const [newDestination, setNewDestination] = useState('');\r\n+  const [editingDestination, setEditingDestination] = useState<string | null>(null);\r\n+  const [editDestinationValue, setEditDestinationValue] = useState('');\r\n+\r\n   const filtered = useMemo(() => {\r\n     return destinationRecords.filter(record => {\r\n       const matchDate = !filterDate || record.date === filterDate;\r\n       const matchDestination = filterDestination === 'all' || record.destination === filterDestination;\r\n@@ -76,8 +65,75 @@\n       { boxes: 0, smallSacks: 0, basins: 0 }\r\n     );\r\n   }, [filtered]);\r\n \r\n+  // Admin stats calculations\r\n+  const statsData = useMemo(() => {\r\n+    const rangeRecords = destinationRecords.filter(r => {\r\n+      if (!statsDateRange.start || !statsDateRange.end) return true;\r\n+      return r.date >= statsDateRange.start && r.date <= statsDateRange.end;\r\n+    });\r\n+\r\n+    const byDestination: Record<string, { boxes: number; smallSacks: number; basins: number; count: number }> = {};\r\n+    const byDate: Record<string, { boxes: number; smallSacks: number; basins: number; count: number }> = {};\r\n+    \r\n+    rangeRecords.forEach(record => {\r\n+      // By destination\r\n+      if (!byDestination[record.destination]) {\r\n+        byDestination[record.destination] = { boxes: 0, smallSacks: 0, basins: 0, count: 0 };\r\n+      }\r\n+      byDestination[record.destination].boxes += record.boxes;\r\n+      byDestination[record.destination].smallSacks += record.smallSacks;\r\n+      byDestination[record.destination].basins += record.basins;\r\n+      byDestination[record.destination].count += 1;\r\n+\r\n+      // By date\r\n+      if (!byDate[record.date]) {\r\n+        byDate[record.date] = { boxes: 0, smallSacks: 0, basins: 0, count: 0 };\r\n+      }\r\n+      byDate[record.date].boxes += record.boxes;\r\n+      byDate[record.date].smallSacks += record.smallSacks;\r\n+      byDate[record.date].basins += record.basins;\r\n+      byDate[record.date].count += 1;\r\n+    });\r\n+\r\n+    const totalStats = rangeRecords.reduce(\r\n+      (acc, r) => ({\r\n+        boxes: acc.boxes + r.boxes,\r\n+        smallSacks: acc.smallSacks + r.smallSacks,\r\n+        basins: acc.basins + r.basins,\r\n+        count: acc.count + 1,\r\n+      }),\r\n+      { boxes: 0, smallSacks: 0, basins: 0, count: 0 }\r\n+    );\r\n+\r\n+    const topDestinations = Object.entries(byDestination)\r\n+      .map(([dest, stats]) => ({\r\n+        destination: dest,\r\n+        ...stats,\r\n+        total: stats.boxes + stats.smallSacks + stats.basins,\r\n+      }))\r\n+      .sort((a, b) => b.total - a.total)\r\n+      .slice(0, 10);\r\n+\r\n+    const recentDates = Object.entries(byDate)\r\n+      .sort((a, b) => b[0].localeCompare(a[0]))\r\n+      .slice(0, 7)\r\n+      .map(([date, stats]) => ({ date, ...stats, total: stats.boxes + stats.smallSacks + stats.basins }));\r\n+\r\n+    return {\r\n+      total: totalStats,\r\n+      byDestination,\r\n+      topDestinations,\r\n+      recentDates,\r\n+      averagePerDay: rangeRecords.length > 0 ? {\r\n+        boxes: Math.round(totalStats.boxes / Math.max(1, Object.keys(byDate).length)),\r\n+        smallSacks: Math.round(totalStats.smallSacks / Math.max(1, Object.keys(byDate).length)),\r\n+        basins: Math.round(totalStats.basins / Math.max(1, Object.keys(byDate).length)),\r\n+      } : { boxes: 0, smallSacks: 0, basins: 0 },\r\n+    };\r\n+  }, [destinationRecords, statsDateRange]);\r\n+\r\n   const addRecord = () => {\r\n     setSuccessMessage('');\r\n     setFormErrors({});\r\n \r\n@@ -140,17 +196,312 @@\n       setDestinationRecords(destinationRecords.filter(r => r.id !== id));\r\n     }\r\n   };\r\n \r\n+  // Destination management functions (admin only)\r\n+  const addDestination = () => {\r\n+    if (!newDestination.trim()) return;\r\n+    const trimmed = newDestination.trim().toUpperCase();\r\n+    if (destinations.includes(trimmed)) {\r\n+      alert('This destination already exists');\r\n+      return;\r\n+    }\r\n+    setDestinations([...destinations, trimmed].sort());\r\n+    setNewDestination('');\r\n+  };\r\n+\r\n+  const startEditDestination = (dest: string) => {\r\n+    setEditingDestination(dest);\r\n+    setEditDestinationValue(dest);\r\n+  };\r\n+\r\n+  const saveEditDestination = () => {\r\n+    if (!editingDestination || !editDestinationValue.trim()) return;\r\n+    const trimmed = editDestinationValue.trim().toUpperCase();\r\n+    if (trimmed !== editingDestination && destinations.includes(trimmed)) {\r\n+      alert('This destination already exists');\r\n+      return;\r\n+    }\r\n+    setDestinations(destinations.map(d => d === editingDestination ? trimmed : d).sort());\r\n+    // Update all records with the old destination name\r\n+    setDestinationRecords(destinationRecords.map(r => \r\n+      r.destination === editingDestination ? { ...r, destination: trimmed } : r\r\n+    ));\r\n+    setEditingDestination(null);\r\n+    setEditDestinationValue('');\r\n+  };\r\n+\r\n+  const deleteDestination = (dest: string) => {\r\n+    if (confirm(`Are you sure you want to delete \"${dest}\"? This will not delete records, but you won't be able to select this destination for new records.`)) {\r\n+      setDestinations(destinations.filter(d => d !== dest));\r\n+    }\r\n+  };\r\n+\r\n   const destinationOptions = [\r\n     { value: 'all', label: 'All Destinations' },\r\n-    ...DESTINATIONS.map(d => ({ value: d, label: d })),\r\n+    ...destinations.map(d => ({ value: d, label: d })),\r\n   ];\r\n \r\n   return (\r\n     <div className=\"space-y-6\">\r\n-      <h1 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">Destination Records</h1>\r\n+      <div className=\"flex items-center justify-between\">\r\n+        <h1 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">Destination Records</h1>\r\n+        {isAdmin && (\r\n+          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-eco-100 dark:bg-eco-900/30 rounded-lg border border-eco-300 dark:border-eco-700\">\r\n+            <Settings className=\"h-4 w-4 text-eco-600 dark:text-eco-400\" />\r\n+            <span className=\"text-sm font-semibold text-eco-700 dark:text-eco-300\">Admin Mode</span>\r\n+          </div>\r\n+        )}\r\n+      </div>\r\n \r\n+      {/* Admin: Destination Management */}\r\n+      {isAdmin && (\r\n+        <Card padding=\"lg\" variant=\"enhanced\">\r\n+          <h2 className=\"text-lg font-semibold mb-4 flex items-center text-gray-900 dark:text-gray-100\">\r\n+            <Settings className=\"h-5 w-5 mr-2\" />\r\n+            Destination Management\r\n+          </h2>\r\n+          <div className=\"mb-4 flex gap-2\">\r\n+            <FormInput\r\n+              label=\"Add New Destination\"\r\n+              value={newDestination}\r\n+              onChange={(v) => setNewDestination(String(v))}\r\n+              placeholder=\"Enter destination name\"\r\n+              onKeyDown={(e) => {\r\n+                if (e.key === 'Enter') {\r\n+                  e.preventDefault();\r\n+                  addDestination();\r\n+                }\r\n+              }}\r\n+              className=\"flex-1\"\r\n+            />\r\n+            <div className=\"flex items-end\">\r\n+              <Button onClick={addDestination} className=\"flex items-center\">\r\n+                <Plus className=\"h-4 w-4 mr-2\" />\r\n+                Add\r\n+              </Button>\r\n+            </div>\r\n+          </div>\r\n+          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2\">\r\n+            {destinations.map(dest => (\r\n+              <div\r\n+                key={dest}\r\n+                className=\"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\"\r\n+              >\r\n+                {editingDestination === dest ? (\r\n+                  <>\r\n+                    <FormInput\r\n+                      value={editDestinationValue}\r\n+                      onChange={(v) => setEditDestinationValue(String(v))}\r\n+                      onKeyDown={(e) => {\r\n+                        if (e.key === 'Enter') {\r\n+                          e.preventDefault();\r\n+                          saveEditDestination();\r\n+                        } else if (e.key === 'Escape') {\r\n+                          setEditingDestination(null);\r\n+                          setEditDestinationValue('');\r\n+                        }\r\n+                      }}\r\n+                      className=\"flex-1 mr-2\"\r\n+                    />\r\n+                    <div className=\"flex gap-1\">\r\n+                      <Button size=\"sm\" onClick={saveEditDestination}>\r\n+                        Save\r\n+                      </Button>\r\n+                      <Button size=\"sm\" variant=\"outline\" onClick={() => {\r\n+                        setEditingDestination(null);\r\n+                        setEditDestinationValue('');\r\n+                      }}>\r\n+                        <X className=\"h-3 w-3\" />\r\n+                      </Button>\r\n+                    </div>\r\n+                  </>\r\n+                ) : (\r\n+                  <>\r\n+                    <div className=\"flex items-center gap-2 flex-1\">\r\n+                      <MapPin className=\"h-4 w-4 text-eco-600\" />\r\n+                      <span className=\"font-medium text-gray-900 dark:text-gray-100\">{dest}</span>\r\n+                    </div>\r\n+                    <div className=\"flex gap-1\">\r\n+                      <Button\r\n+                        size=\"sm\"\r\n+                        variant=\"outline\"\r\n+                        onClick={() => startEditDestination(dest)}\r\n+                      >\r\n+                        <Edit2 className=\"h-3 w-3\" />\r\n+                      </Button>\r\n+                      <Button\r\n+                        size=\"sm\"\r\n+                        variant=\"destructive\"\r\n+                        onClick={() => deleteDestination(dest)}\r\n+                      >\r\n+                        <Trash2 className=\"h-3 w-3\" />\r\n+                      </Button>\r\n+                    </div>\r\n+                  </>\r\n+                )}\r\n+              </div>\r\n+            ))}\r\n+          </div>\r\n+        </Card>\r\n+      )}\r\n+\r\n+      {/* Admin: Enhanced Stats Section */}\r\n+      {isAdmin && (\r\n+        <Card padding=\"lg\" variant=\"enhanced\">\r\n+          <h2 className=\"text-lg font-semibold mb-4 flex items-center text-gray-900 dark:text-gray-100\">\r\n+            <BarChart3 className=\"h-5 w-5 mr-2\" />\r\n+            Statistics & Analytics\r\n+          </h2>\r\n+          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n+            <FormInput\r\n+              label=\"Start Date\"\r\n+              type=\"date\"\r\n+              value={statsDateRange.start}\r\n+              onChange={(v) => setStatsDateRange({ ...statsDateRange, start: String(v) })}\r\n+            />\r\n+            <FormInput\r\n+              label=\"End Date\"\r\n+              type=\"date\"\r\n+              value={statsDateRange.end}\r\n+              onChange={(v) => setStatsDateRange({ ...statsDateRange, end: String(v) })}\r\n+            />\r\n+          </div>\r\n+\r\n+          {/* Overall Stats */}\r\n+          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n+            <div className=\"p-4 rounded-lg bg-navy-50 dark:bg-navy-900/20 border border-navy-200 dark:border-navy-800\">\r\n+              <div className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Total Records</div>\r\n+              <div className=\"text-2xl font-bold text-navy-700 dark:text-navy-300\">{statsData.total.count}</div>\r\n+            </div>\r\n+            <div className=\"p-4 rounded-lg bg-eco-50 dark:bg-eco-900/20 border border-eco-200 dark:border-eco-800\">\r\n+              <div className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Total Boxes</div>\r\n+              <div className=\"text-2xl font-bold text-eco-700 dark:text-eco-300\">{statsData.total.boxes}</div>\r\n+            </div>\r\n+            <div className=\"p-4 rounded-lg bg-mint-50 dark:bg-mint-900/20 border border-mint-200 dark:border-mint-800\">\r\n+              <div className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Total Small Sacks</div>\r\n+              <div className=\"text-2xl font-bold text-mint-700 dark:text-mint-300\">{statsData.total.smallSacks}</div>\r\n+            </div>\r\n+            <div className=\"p-4 rounded-lg bg-signal-50 dark:bg-signal-900/20 border border-signal-200 dark:border-signal-800\">\r\n+              <div className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">Total Basins</div>\r\n+              <div className=\"text-2xl font-bold text-signal-700 dark:text-signal-300\">{statsData.total.basins}</div>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          {/* Average Per Day */}\r\n+          <div className=\"mb-6 p-4 bg-gradient-to-r from-navy-50 to-eco-50 dark:from-navy-900/30 dark:to-eco-900/10 rounded-lg border border-navy-200 dark:border-navy-700\">\r\n+            <div className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Average Per Day</div>\r\n+            <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n+              <div>\r\n+                <div className=\"text-xs text-gray-600 dark:text-gray-400\">Boxes</div>\r\n+                <div className=\"text-xl font-bold text-navy-700 dark:text-navy-300\">{statsData.averagePerDay.boxes}</div>\r\n+              </div>\r\n+              <div>\r\n+                <div className=\"text-xs text-gray-600 dark:text-gray-400\">Small Sacks</div>\r\n+                <div className=\"text-xl font-bold text-eco-600 dark:text-eco-400\">{statsData.averagePerDay.smallSacks}</div>\r\n+              </div>\r\n+              <div>\r\n+                <div className=\"text-xs text-gray-600 dark:text-gray-400\">Basins</div>\r\n+                <div className=\"text-xl font-bold text-mint-600 dark:text-mint-400\">{statsData.averagePerDay.basins}</div>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          {/* Top Destinations */}\r\n+          <div className=\"mb-6\">\r\n+            <h3 className=\"text-md font-semibold mb-3 text-gray-900 dark:text-gray-100\">Top 10 Destinations</h3>\r\n+            <div className=\"overflow-x-auto\">\r\n+              <table className=\"min-w-full\">\r\n+                <thead>\r\n+                  <tr className=\"text-left text-sm text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700\">\r\n+                    <th className=\"py-2 pr-4\">Destination</th>\r\n+                    <th className=\"py-2 pr-4 text-center\">Records</th>\r\n+                    <th className=\"py-2 pr-4 text-center\">Boxes</th>\r\n+                    <th className=\"py-2 pr-4 text-center\">Small Sacks</th>\r\n+                    <th className=\"py-2 pr-4 text-center\">Basins</th>\r\n+                    <th className=\"py-2 pr-4 text-center\">Total Items</th>\r\n+                  </tr>\r\n+                </thead>\r\n+                <tbody>\r\n+                  {statsData.topDestinations.map((item, idx) => (\r\n+                    <tr key={item.destination} className=\"border-b border-gray-200 dark:border-gray-700 text-sm\">\r\n+                      <td className=\"py-2 pr-4\">\r\n+                        <div className=\"flex items-center gap-2\">\r\n+                          <span className=\"text-xs font-bold text-gray-500 dark:text-gray-400\">#{idx + 1}</span>\r\n+                          <MapPin className=\"h-4 w-4 text-eco-600\" />\r\n+                          <span className=\"font-medium text-gray-900 dark:text-gray-100\">{item.destination}</span>\r\n+                        </div>\r\n+                      </td>\r\n+                      <td className=\"py-2 pr-4 text-center\">{item.count}</td>\r\n+                      <td className=\"py-2 pr-4 text-center\">\r\n+                        <span className=\"px-2 py-1 rounded bg-navy-100 dark:bg-navy-900/30 text-navy-800 dark:text-navy-200 font-semibold\">\r\n+                          {item.boxes}\r\n+                        </span>\r\n+                      </td>\r\n+                      <td className=\"py-2 pr-4 text-center\">\r\n+                        <span className=\"px-2 py-1 rounded bg-eco-100 dark:bg-eco-900/30 text-eco-800 dark:text-eco-200 font-semibold\">\r\n+                          {item.smallSacks}\r\n+                        </span>\r\n+                      </td>\r\n+                      <td className=\"py-2 pr-4 text-center\">\r\n+                        <span className=\"px-2 py-1 rounded bg-mint-100 dark:bg-mint-900/30 text-mint-800 dark:text-mint-200 font-semibold\">\r\n+                          {item.basins}\r\n+                        </span>\r\n+                      </td>\r\n+                      <td className=\"py-2 pr-4 text-center font-bold text-gray-900 dark:text-gray-100\">{item.total}</td>\r\n+                    </tr>\r\n+                  ))}\r\n+                  {statsData.topDestinations.length === 0 && (\r\n+                    <tr>\r\n+                      <td colSpan={6} className=\"py-6 text-center text-gray-500 dark:text-gray-400\">\r\n+                        No data for selected date range\r\n+                      </td>\r\n+                    </tr>\r\n+                  )}\r\n+                </tbody>\r\n+              </table>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          {/* Recent Days Activity */}\r\n+          <div>\r\n+            <h3 className=\"text-md font-semibold mb-3 text-gray-900 dark:text-gray-100\">Recent 7 Days Activity</h3>\r\n+            <div className=\"space-y-2\">\r\n+              {statsData.recentDates.map(item => (\r\n+                <div\r\n+                  key={item.date}\r\n+                  className=\"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\"\r\n+                >\r\n+                  <div className=\"flex items-center gap-3\">\r\n+                    <Calendar className=\"h-4 w-4 text-gray-400\" />\r\n+                    <span className=\"font-medium text-gray-900 dark:text-gray-100\">\r\n+                      {new Date(item.date).toLocaleDateString()}\r\n+                    </span>\r\n+                  </div>\r\n+                  <div className=\"flex items-center gap-4\">\r\n+                    <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n+                      Boxes: <b className=\"text-navy-700 dark:text-navy-300\">{item.boxes}</b>\r\n+                    </span>\r\n+                    <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n+                      Sacks: <b className=\"text-eco-600 dark:text-eco-400\">{item.smallSacks}</b>\r\n+                    </span>\r\n+                    <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n+                      Basins: <b className=\"text-mint-600 dark:text-mint-400\">{item.basins}</b>\r\n+                    </span>\r\n+                    <span className=\"text-sm font-bold text-gray-900 dark:text-gray-100\">\r\n+                      Total: {item.total}\r\n+                    </span>\r\n+                  </div>\r\n+                </div>\r\n+              ))}\r\n+              {statsData.recentDates.length === 0 && (\r\n+                <p className=\"text-center text-gray-500 dark:text-gray-400 py-4\">No activity in recent days</p>\r\n+              )}\r\n+            </div>\r\n+          </div>\r\n+        </Card>\r\n+      )}\r\n+\r\n       {/* Add Record Form */}\r\n       <Card padding=\"lg\" variant=\"enhanced\">\r\n         <h2 className=\"text-lg font-semibold mb-4 flex items-center text-gray-900 dark:text-gray-100\">\r\n           <Plus className=\"h-5 w-5 mr-2\" />\r\n@@ -178,9 +529,9 @@\n               if (formErrors.destination) {\r\n                 setFormErrors({ ...formErrors, destination: undefined });\r\n               }\r\n             }}\r\n-            options={DESTINATIONS.map(d => ({ value: d, label: d }))}\r\n+            options={destinations.map(d => ({ value: d, label: d }))}\r\n             error={formErrors.destination}\r\n             required\r\n             placeholder=\"Select destination\"\r\n           />\r\n@@ -318,8 +669,13 @@\n                   <div className=\"px-2 py-1 rounded bg-mint-100 dark:bg-mint-900/30 text-mint-800 dark:text-mint-200\">\r\n                     Basins: <b>{record.basins}</b>\r\n                   </div>\r\n                 </div>\r\n+                {isAdmin && (\r\n+                  <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\r\n+                    Created by: {record.createdBy || 'System'}\r\n+                  </div>\r\n+                )}\r\n                 <div className=\"mt-2 flex justify-end\">\r\n                   <Button\r\n                     size=\"sm\"\r\n                     variant=\"destructive\"\r\n@@ -346,9 +702,9 @@\n                   <th className=\"py-3 pr-4\">Destination</th>\r\n                   <th className=\"py-3 pr-4 text-center\">Boxes</th>\r\n                   <th className=\"py-3 pr-4 text-center\">Small Sacks</th>\r\n                   <th className=\"py-3 pr-4 text-center\">Basins</th>\r\n-                  <th className=\"py-3 pr-4\">Created By</th>\r\n+                  {isAdmin && <th className=\"py-3 pr-4\">Created By</th>}\r\n                   <th className=\"py-3 pr-4\">Actions</th>\r\n                 </tr>\r\n               </thead>\r\n               <tbody>\r\n@@ -383,11 +739,13 @@\n                       <span className=\"px-2 py-1 rounded bg-mint-100 dark:bg-mint-900/30 text-mint-800 dark:text-mint-200 font-semibold\">\r\n                         {record.basins}\r\n                       </span>\r\n                     </td>\r\n-                    <td className=\"py-3 pr-4 text-gray-600 dark:text-gray-400\">\r\n-                      {record.createdBy || 'System'}\r\n-                    </td>\r\n+                    {isAdmin && (\r\n+                      <td className=\"py-3 pr-4 text-gray-600 dark:text-gray-400\">\r\n+                        {record.createdBy || 'System'}\r\n+                      </td>\r\n+                    )}\r\n                     <td className=\"py-3 pr-4\">\r\n                       <Button\r\n                         size=\"sm\"\r\n                         variant=\"destructive\"\r\n@@ -401,9 +759,9 @@\n                   </tr>\r\n                 ))}\r\n                 {filtered.length === 0 && (\r\n                   <tr>\r\n-                    <td colSpan={7} className=\"py-6 text-center text-gray-500 dark:text-gray-400\">\r\n+                    <td colSpan={isAdmin ? 7 : 6} className=\"py-6 text-center text-gray-500 dark:text-gray-400\">\r\n                       No records found\r\n                     </td>\r\n                   </tr>\r\n                 )}\r\n@@ -414,5 +772,4 @@\n       </Card>\r\n     </div>\r\n   );\r\n };\r\n-\r\n"
                },
                {
                    "date": 1763059623934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n import { FormInput } from '../../components/FormInput';\r\n import { FormSelect } from '../../components/FormSelect';\r\n import { useApp } from '../../context/AppContext';\r\n import { DestinationRecord } from '../../types';\r\n-import { MapPin, Plus, Calendar, Package, Trash2, Settings, BarChart3, Edit2, TrendingUp, TrendingDown, Activity, X } from 'lucide-react';\r\n+import { MapPin, Plus, Calendar, Trash2, Settings, BarChart3, Edit2, X } from 'lucide-react';\r\n \r\n export const DestinationsPage: React.FC = () => {\r\n   const { destinationRecords, setDestinationRecords, destinations, setDestinations, user } = useApp();\r\n   const isAdmin = user?.role === 'admin';\r\n@@ -289,8 +289,9 @@\n               >\r\n                 {editingDestination === dest ? (\r\n                   <>\r\n                     <FormInput\r\n+                      label=\"\"\r\n                       value={editDestinationValue}\r\n                       onChange={(v) => setEditDestinationValue(String(v))}\r\n                       onKeyDown={(e) => {\r\n                         if (e.key === 'Enter') {\r\n"
                }
            ],
            "date": 1763056579045,
            "name": "Commit-0",
            "content": "import React, { useState, useMemo } from 'react';\r\nimport { Card } from '../../components/Card';\r\nimport { Button } from '../../components/Button';\r\nimport { FormInput } from '../../components/FormInput';\r\nimport { FormSelect } from '../../components/FormSelect';\r\nimport { useApp } from '../../context/AppContext';\r\nimport { DestinationRecord } from '../../types';\r\nimport { MapPin, Plus, Calendar, Package, Trash2 } from 'lucide-react';\r\n\r\nconst DESTINATIONS = [\r\n  'KONGO',\r\n  'MIRITINI',\r\n  'MARIAKANI',\r\n  'SAMBURU TOWN',\r\n  'SAMBURU',\r\n  'KILIFI',\r\n  'MALINDI',\r\n  'VOI',\r\n  'TAVETA',\r\n  'TESO',\r\n  'DZONI',\r\n  'KALOLENI',\r\n  'MAVUENI',\r\n  'MAZERAS',\r\n  'CHASIMBA',\r\n  'MAUNGU',\r\n  'MANYATTA',\r\n  'TARU',\r\n  'MTITO',\r\n  'KAMBUU',\r\n  'MACKNON',\r\n  'MALIKUBWA',\r\n];\r\n\r\nexport const DestinationsPage: React.FC = () => {\r\n  const { destinationRecords, setDestinationRecords, user } = useApp();\r\n  const [form, setForm] = useState<{\r\n    date: string;\r\n    destination: string;\r\n    boxes: number;\r\n    smallSacks: number;\r\n    basins: number;\r\n  }>({\r\n    date: new Date().toISOString().split('T')[0],\r\n    destination: '',\r\n    boxes: 0,\r\n    smallSacks: 0,\r\n    basins: 0,\r\n  });\r\n  const [formErrors, setFormErrors] = useState<{\r\n    date?: string;\r\n    destination?: string;\r\n    boxes?: string;\r\n    smallSacks?: string;\r\n    basins?: string;\r\n  }>({});\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [filterDate, setFilterDate] = useState('');\r\n  const [filterDestination, setFilterDestination] = useState('all');\r\n\r\n  const filtered = useMemo(() => {\r\n    return destinationRecords.filter(record => {\r\n      const matchDate = !filterDate || record.date === filterDate;\r\n      const matchDestination = filterDestination === 'all' || record.destination === filterDestination;\r\n      return matchDate && matchDestination;\r\n    });\r\n  }, [destinationRecords, filterDate, filterDestination]);\r\n\r\n  const totals = useMemo(() => {\r\n    return filtered.reduce(\r\n      (acc, record) => ({\r\n        boxes: acc.boxes + record.boxes,\r\n        smallSacks: acc.smallSacks + record.smallSacks,\r\n        basins: acc.basins + record.basins,\r\n      }),\r\n      { boxes: 0, smallSacks: 0, basins: 0 }\r\n    );\r\n  }, [filtered]);\r\n\r\n  const addRecord = () => {\r\n    setSuccessMessage('');\r\n    setFormErrors({});\r\n\r\n    const errors: typeof formErrors = {};\r\n\r\n    if (!form.date) {\r\n      errors.date = 'Date is required';\r\n    }\r\n\r\n    if (!form.destination) {\r\n      errors.destination = 'Destination is required';\r\n    }\r\n\r\n    if (form.boxes < 0) {\r\n      errors.boxes = 'Boxes cannot be negative';\r\n    }\r\n\r\n    if (form.smallSacks < 0) {\r\n      errors.smallSacks = 'Small sacks cannot be negative';\r\n    }\r\n\r\n    if (form.basins < 0) {\r\n      errors.basins = 'Basins cannot be negative';\r\n    }\r\n\r\n    if (form.boxes === 0 && form.smallSacks === 0 && form.basins === 0) {\r\n      errors.boxes = 'At least one quantity must be greater than 0';\r\n    }\r\n\r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n\r\n    const newRecord: DestinationRecord = {\r\n      id: Date.now().toString(),\r\n      date: form.date,\r\n      destination: form.destination,\r\n      boxes: form.boxes,\r\n      smallSacks: form.smallSacks,\r\n      basins: form.basins,\r\n      createdAt: new Date().toISOString(),\r\n      createdBy: user?.name,\r\n    };\r\n\r\n    setDestinationRecords([newRecord, ...destinationRecords]);\r\n    setForm({\r\n      date: new Date().toISOString().split('T')[0],\r\n      destination: '',\r\n      boxes: 0,\r\n      smallSacks: 0,\r\n      basins: 0,\r\n    });\r\n    setSuccessMessage(`Record for ${form.destination} on ${form.date} has been added successfully!`);\r\n    setTimeout(() => setSuccessMessage(''), 3000);\r\n  };\r\n\r\n  const deleteRecord = (id: string) => {\r\n    if (confirm('Are you sure you want to delete this record?')) {\r\n      setDestinationRecords(destinationRecords.filter(r => r.id !== id));\r\n    }\r\n  };\r\n\r\n  const destinationOptions = [\r\n    { value: 'all', label: 'All Destinations' },\r\n    ...DESTINATIONS.map(d => ({ value: d, label: d })),\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">Destination Records</h1>\r\n\r\n      {/* Add Record Form */}\r\n      <Card padding=\"lg\" variant=\"enhanced\">\r\n        <h2 className=\"text-lg font-semibold mb-4 flex items-center text-gray-900 dark:text-gray-100\">\r\n          <Plus className=\"h-5 w-5 mr-2\" />\r\n          Add Destination Record\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n          <FormInput\r\n            label=\"Date\"\r\n            type=\"date\"\r\n            value={form.date}\r\n            onChange={(v) => {\r\n              setForm({ ...form, date: String(v) });\r\n              if (formErrors.date) {\r\n                setFormErrors({ ...formErrors, date: undefined });\r\n              }\r\n            }}\r\n            error={formErrors.date}\r\n            required\r\n          />\r\n          <FormSelect\r\n            label=\"Destination\"\r\n            value={form.destination}\r\n            onChange={(v) => {\r\n              setForm({ ...form, destination: String(v) });\r\n              if (formErrors.destination) {\r\n                setFormErrors({ ...formErrors, destination: undefined });\r\n              }\r\n            }}\r\n            options={DESTINATIONS.map(d => ({ value: d, label: d }))}\r\n            error={formErrors.destination}\r\n            required\r\n            placeholder=\"Select destination\"\r\n          />\r\n          <FormInput\r\n            label=\"Boxes\"\r\n            type=\"number\"\r\n            value={form.boxes}\r\n            onChange={(v) => {\r\n              setForm({ ...form, boxes: Number(v) || 0 });\r\n              if (formErrors.boxes) {\r\n                setFormErrors({ ...formErrors, boxes: undefined });\r\n              }\r\n            }}\r\n            error={formErrors.boxes}\r\n            min={0}\r\n            placeholder=\"0\"\r\n          />\r\n          <FormInput\r\n            label=\"Small Sacks\"\r\n            type=\"number\"\r\n            value={form.smallSacks}\r\n            onChange={(v) => {\r\n              setForm({ ...form, smallSacks: Number(v) || 0 });\r\n              if (formErrors.smallSacks) {\r\n                setFormErrors({ ...formErrors, smallSacks: undefined });\r\n              }\r\n            }}\r\n            error={formErrors.smallSacks}\r\n            min={0}\r\n            placeholder=\"0\"\r\n          />\r\n          <FormInput\r\n            label=\"Basins\"\r\n            type=\"number\"\r\n            value={form.basins}\r\n            onChange={(v) => {\r\n              setForm({ ...form, basins: Number(v) || 0 });\r\n              if (formErrors.basins) {\r\n                setFormErrors({ ...formErrors, basins: undefined });\r\n              }\r\n            }}\r\n            error={formErrors.basins}\r\n            min={0}\r\n            placeholder=\"0\"\r\n          />\r\n        </div>\r\n        {successMessage && (\r\n          <div className=\"mt-4 p-3 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-300 rounded-lg\">\r\n            {successMessage}\r\n          </div>\r\n        )}\r\n        <div className=\"mt-4\">\r\n          <Button onClick={addRecord} className=\"flex items-center\">\r\n            <Plus className=\"h-4 w-4 mr-2\" />\r\n            Add Record\r\n          </Button>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Filters and Totals */}\r\n      <Card padding=\"lg\" variant=\"enhanced\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n          <FormInput\r\n            label=\"Filter by Date\"\r\n            type=\"date\"\r\n            value={filterDate}\r\n            onChange={(v) => setFilterDate(String(v))}\r\n            placeholder=\"Select date\"\r\n          />\r\n          <FormSelect\r\n            label=\"Filter by Destination\"\r\n            value={filterDestination}\r\n            onChange={(v) => setFilterDestination(String(v))}\r\n            options={destinationOptions}\r\n          />\r\n          <div className=\"flex items-end\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"w-full\"\r\n              onClick={() => {\r\n                setFilterDate('');\r\n                setFilterDestination('all');\r\n              }}\r\n            >\r\n              Clear Filters\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <div className=\"grid grid-cols-3 gap-4 text-center p-4 bg-gradient-to-r from-navy-50 to-eco-50 dark:from-navy-900/30 dark:to-eco-900/10 rounded-lg border border-navy-200 dark:border-navy-700\">\r\n          <div>\r\n            <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Total Boxes</div>\r\n            <div className=\"text-2xl font-bold text-navy-700 dark:text-navy-300\">{totals.boxes}</div>\r\n          </div>\r\n          <div>\r\n            <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Total Small Sacks</div>\r\n            <div className=\"text-2xl font-bold text-eco-600 dark:text-eco-400\">{totals.smallSacks}</div>\r\n          </div>\r\n          <div>\r\n            <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Total Basins</div>\r\n            <div className=\"text-2xl font-bold text-mint-600 dark:text-mint-400\">{totals.basins}</div>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Records Table */}\r\n      <Card padding=\"lg\" variant=\"enhanced\">\r\n        <h2 className=\"text-lg font-semibold mb-4 flex items-center text-gray-900 dark:text-gray-100\">\r\n          <Calendar className=\"h-5 w-5 mr-2\" />\r\n          Records ({filtered.length})\r\n        </h2>\r\n        <div className=\"overflow-x-auto\">\r\n          {/* Mobile View */}\r\n          <div className=\"md:hidden space-y-2\">\r\n            {filtered.map(record => (\r\n              <div\r\n                key={record.id}\r\n                className=\"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\"\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <MapPin className=\"h-4 w-4 text-eco-600\" />\r\n                    <span className=\"font-semibold text-gray-900 dark:text-gray-100\">{record.destination}</span>\r\n                  </div>\r\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                    {new Date(record.date).toLocaleDateString()}\r\n                  </span>\r\n                </div>\r\n                <div className=\"grid grid-cols-3 gap-2 text-xs\">\r\n                  <div className=\"px-2 py-1 rounded bg-navy-100 dark:bg-navy-900/30 text-navy-800 dark:text-navy-200\">\r\n                    Boxes: <b>{record.boxes}</b>\r\n                  </div>\r\n                  <div className=\"px-2 py-1 rounded bg-eco-100 dark:bg-eco-900/30 text-eco-800 dark:text-eco-200\">\r\n                    Sacks: <b>{record.smallSacks}</b>\r\n                  </div>\r\n                  <div className=\"px-2 py-1 rounded bg-mint-100 dark:bg-mint-900/30 text-mint-800 dark:text-mint-200\">\r\n                    Basins: <b>{record.basins}</b>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-2 flex justify-end\">\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"destructive\"\r\n                    onClick={() => deleteRecord(record.id)}\r\n                    className=\"flex items-center\"\r\n                  >\r\n                    <Trash2 className=\"h-3 w-3 mr-1\" />\r\n                    Delete\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {filtered.length === 0 && (\r\n              <p className=\"text-center text-gray-500 dark:text-gray-400 py-6\">No records found</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Desktop Table */}\r\n          <div className=\"hidden md:block overflow-x-auto\">\r\n            <table className=\"min-w-full\">\r\n              <thead>\r\n                <tr className=\"text-left text-sm text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700\">\r\n                  <th className=\"py-3 pr-4\">Date</th>\r\n                  <th className=\"py-3 pr-4\">Destination</th>\r\n                  <th className=\"py-3 pr-4 text-center\">Boxes</th>\r\n                  <th className=\"py-3 pr-4 text-center\">Small Sacks</th>\r\n                  <th className=\"py-3 pr-4 text-center\">Basins</th>\r\n                  <th className=\"py-3 pr-4\">Created By</th>\r\n                  <th className=\"py-3 pr-4\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map(record => (\r\n                  <tr\r\n                    key={record.id}\r\n                    className=\"border-b border-gray-200 dark:border-gray-700 text-sm hover:bg-gray-50 dark:hover:bg-gray-800/50\"\r\n                  >\r\n                    <td className=\"py-3 pr-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Calendar className=\"h-4 w-4 text-gray-400\" />\r\n                        {new Date(record.date).toLocaleDateString()}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"py-3 pr-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <MapPin className=\"h-4 w-4 text-eco-600\" />\r\n                        <span className=\"font-medium text-gray-900 dark:text-gray-100\">{record.destination}</span>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"py-3 pr-4 text-center\">\r\n                      <span className=\"px-2 py-1 rounded bg-navy-100 dark:bg-navy-900/30 text-navy-800 dark:text-navy-200 font-semibold\">\r\n                        {record.boxes}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"py-3 pr-4 text-center\">\r\n                      <span className=\"px-2 py-1 rounded bg-eco-100 dark:bg-eco-900/30 text-eco-800 dark:text-eco-200 font-semibold\">\r\n                        {record.smallSacks}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"py-3 pr-4 text-center\">\r\n                      <span className=\"px-2 py-1 rounded bg-mint-100 dark:bg-mint-900/30 text-mint-800 dark:text-mint-200 font-semibold\">\r\n                        {record.basins}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"py-3 pr-4 text-gray-600 dark:text-gray-400\">\r\n                      {record.createdBy || 'System'}\r\n                    </td>\r\n                    <td className=\"py-3 pr-4\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"destructive\"\r\n                        onClick={() => deleteRecord(record.id)}\r\n                        className=\"flex items-center\"\r\n                      >\r\n                        <Trash2 className=\"h-3 w-3 mr-1\" />\r\n                        Delete\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"py-6 text-center text-gray-500 dark:text-gray-400\">\r\n                      No records found\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\n"
        }
    ]
}